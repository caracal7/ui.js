var u=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var B=u((mT,Do)=>{var Co=e=>e.reduce((t,r)=>Array.isArray(r)?t.concat(Co(r)):t.concat(r),[]);Do.exports=Co});var Go=u((qT,Zo)=>{var tq=e=>Object.assign({},e);Zo.exports=tq});var Xo=u((xT,Io)=>{var rq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e);Io.exports=rq});var er=u((wT,$o)=>{var nq=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];$o.exports=nq});var Lo=u((vT,Yo)=>{var sq=er(),oq=e=>{let t=sq();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Yo.exports=oq});var sn=u((yT,Uo)=>{var iq=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e);Uo.exports=iq});var Wo=u((ET,Ho)=>{var cq=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=t[3],i=t[4],c=t[5],a=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],m=t[12],g=t[13],q=t[14],w=t[15],v=r*c-n*i,E=r*a-s*i,x=r*l-o*i,P=n*a-s*c,y=n*l-o*c,A=s*l-o*a,b=f*g-h*m,M=f*q-p*m,T=f*w-d*m,S=h*q-p*g,O=h*w-d*g,G=p*w-d*q,R=v*G-E*O+x*S+P*T-y*M+A*b;return R?(R=1/R,e[0]=(c*G-a*O+l*S)*R,e[1]=(s*O-n*G-o*S)*R,e[2]=(g*A-q*y+w*P)*R,e[3]=(p*y-h*A-d*P)*R,e[4]=(a*T-i*G-l*M)*R,e[5]=(r*G-s*T+o*M)*R,e[6]=(q*x-m*A-w*E)*R,e[7]=(f*A-p*x+d*E)*R,e[8]=(i*O-c*T+l*b)*R,e[9]=(n*T-r*O-o*b)*R,e[10]=(m*y-g*x+w*v)*R,e[11]=(h*x-f*y-d*v)*R,e[12]=(c*M-i*S-a*b)*R,e[13]=(r*S-n*M+s*b)*R,e[14]=(g*E-m*P-q*v)*R,e[15]=(f*P-h*E+p*v)*R,e):null};Ho.exports=cq});var Ko=u((PT,_o)=>{var aq=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15];_o.exports=aq});var I=u((AT,Qo)=>{var lq=Math.PI*2;Qo.exports={EPS:1e-5,NEPS:1e-13,TAU:lq,spatialResolution:1e5}});var J=u((bT,jo)=>{var{NEPS:uq}=I(),Jo=e=>Math.abs(e)<uq?0:e,fq=e=>Jo(Math.sin(e)),hq=e=>Jo(Math.cos(e));jo.exports={sin:fq,cos:hq}});var on=u((MT,ei)=>{var pq=e=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);ei.exports=pq});var cn=u((ST,ti)=>{var{EPS:dq}=I(),{sin:gq,cos:mq}=J(),qq=on(),xq=(e,t,r)=>{let[n,s,o]=r,i=n*n+s*s+o*o;if(Math.abs(i)<dq)return qq(e);let c=1/Math.sqrt(i);n*=c,s*=c,o*=c;let a=gq(t),l=mq(t),f=1-l;return e[0]=n*n*f+l,e[1]=s*n*f+o*a,e[2]=o*n*f-s*a,e[3]=0,e[4]=n*s*f-o*a,e[5]=s*s*f+l,e[6]=o*s*f+n*a,e[7]=0,e[8]=n*o*f+s*a,e[9]=s*o*f-n*a,e[10]=o*o*f+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};ti.exports=xq});var ni=u((TT,ri)=>{var wq=(e,t)=>(e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);ri.exports=wq});var oi=u((kT,si)=>{var{sin:an,cos:ln}=J(),vq=(e,t,r,n)=>{let s=an(t),o=ln(t),i=an(r),c=ln(r),a=an(n),l=ln(n);return e[0]=c*o,e[1]=c*s,e[2]=-i,e[3]=0,e[4]=a*i*o-l*s,e[5]=l*o+a*i*s,e[6]=a*c,e[7]=0,e[8]=a*s+l*i*o,e[9]=l*i*s-a*o,e[10]=l*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};si.exports=vq});var ci=u((OT,ii)=>{var yq=(e,t)=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e);ii.exports=yq});var li=u((NT,ai)=>{var Eq=er(),Pq=(e,t,r,n,s,o,i,c,a,l,f,h,p,d,m,g)=>{let q=Eq();return q[0]=e,q[1]=t,q[2]=r,q[3]=n,q[4]=s,q[5]=o,q[6]=i,q[7]=c,q[8]=a,q[9]=l,q[10]=f,q[11]=h,q[12]=p,q[13]=d,q[14]=m,q[15]=g,q};ai.exports=Pq});var un=u((VT,ui)=>{var Aq=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e);ui.exports=Aq});var fn=u((FT,fi)=>{var bq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e);fi.exports=bq});var wt=u((RT,hi)=>{var Mq=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2];hi.exports=Mq});var di=u((BT,pi)=>{var Sq=wt(),Tq=(e,t)=>{let r=e[0],n=e[1],s=e[2],o=t[0],i=t[1],c=t[2],a=Math.sqrt(r*r+n*n+s*s),l=Math.sqrt(o*o+i*i+c*c),f=a*l,h=f&&Sq(e,t)/f;return Math.acos(Math.min(Math.max(h,-1),1))};pi.exports=Tq});var vt=u((zT,gi)=>{var kq=()=>[0,0,0];gi.exports=kq});var qi=u((CT,mi)=>{var Oq=vt(),Nq=e=>{let t=Oq();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};mi.exports=Nq});var hn=u((DT,xi)=>{var Vq=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);xi.exports=Vq});var He=u((ZT,wi)=>{var Fq=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[0],c=r[1],a=r[2];return e[0]=s*a-o*c,e[1]=o*i-n*a,e[2]=n*c-s*i,e};wi.exports=Fq});var pn=u((GT,vi)=>{var Rq=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+n*n+s*s)};vi.exports=Rq});var Ei=u((IT,yi)=>{var Bq=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e);yi.exports=Bq});var Ai=u((XT,Pi)=>{var zq=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];Pi.exports=zq});var Mi=u(($T,bi)=>{var Cq=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e);bi.exports=Cq});var Ti=u((YT,Si)=>{var Dq=vt(),Zq=(e,t,r)=>{let n=Dq();return n[0]=e,n[1]=t,n[2]=r,n};Si.exports=Zq});var Oi=u((LT,ki)=>{var Gq=(e,t,r=0)=>(e[0]=t[0],e[1]=t[1],e[2]=r,e);ki.exports=Gq});var dn=u((UT,Ni)=>{var Iq=e=>{let t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)};Ni.exports=Iq});var Fi=u((HT,Vi)=>{var Xq=(e,t,r,n)=>(e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e[2]=t[2]+n*(r[2]-t[2]),e);Vi.exports=Xq});var gn=u((WT,Ri)=>{var $q=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e);Ri.exports=$q});var mn=u((_T,Bi)=>{var Yq=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e);Bi.exports=Yq});var Ci=u((KT,zi)=>{var Lq=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e);zi.exports=Lq});var Zi=u((QT,Di)=>{var Uq=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e);Di.exports=Uq});var tr=u((JT,Gi)=>{var Hq=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=s*o,e};Gi.exports=Hq});var Xi=u((jT,Ii)=>{var Wq=un(),_q=vt(),Kq=He(),Qq=(e,t)=>{let r=Wq(_q(),t),n=0+(r[0]<r[1]&&r[0]<r[2]),s=0+(r[1]<=r[0]&&r[1]<r[2]),o=0+(r[2]<=r[0]&&r[2]<=r[1]);return Kq(e,t,[n,s,o])};Ii.exports=Qq});var Yi=u((ek,$i)=>{var Jq=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0],o[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),o[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};$i.exports=Jq});var Ui=u((tk,Li)=>{var jq=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),o[1]=s[1],o[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Li.exports=jq});var Wi=u((rk,Hi)=>{var e3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],o[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),o[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=t[2],e};Hi.exports=e3});var qn=u((nk,_i)=>{var t3=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e);_i.exports=t3});var Qi=u((sk,Ki)=>{var r3=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e[2]=Math.round(t[2]/r)*r+0,e);Ki.exports=r3});var xn=u((ok,Ji)=>{var n3=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s};Ji.exports=n3});var wn=u((ik,ji)=>{var s3=e=>{let t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n};ji.exports=s3});var yt=u((ck,ec)=>{var o3=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e);ec.exports=o3});var rc=u((ak,tc)=>{var i3=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}]`;tc.exports=i3});var sc=u((lk,nc)=>{var c3=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[3]*n+r[7]*s+r[11]*o+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*s+r[8]*o+r[12])/i,e[1]=(r[1]*n+r[5]*s+r[9]*o+r[13])/i,e[2]=(r[2]*n+r[6]*s+r[10]*o+r[14])/i,e};nc.exports=c3});var V=u((uk,oc)=>{oc.exports={abs:un(),add:fn(),angle:di(),clone:qi(),copy:hn(),create:vt(),cross:He(),distance:pn(),divide:Ei(),dot:wt(),equals:Ai(),fromScalar:Mi(),fromValues:Ti(),fromVec2:Oi(),length:dn(),lerp:Fi(),max:gn(),min:mn(),multiply:Ci(),negate:Zi(),normalize:tr(),orthogonal:Xi(),rotateX:Yi(),rotateY:Ui(),rotateZ:Wi(),scale:qn(),snap:Qi(),squaredDistance:xn(),squaredLength:wn(),subtract:yt(),toString:rc(),transform:sc()}});var cc=u((fk,ic)=>{var Ae=V(),a3=cn(),l3=(e,t,r)=>{let n=Ae.normalize(Ae.create(),t),s=Ae.normalize(Ae.create(),r),o=Ae.cross(Ae.create(),s,n),i=Ae.dot(s,n);if(i===-1)return a3(e,Math.PI,Ae.orthogonal(o,n));let c=1/(1+i);return e[0]=o[0]*o[0]*c+i,e[1]=o[1]*o[0]*c-o[2],e[2]=o[2]*o[0]*c+o[1],e[3]=0,e[4]=o[0]*o[1]*c+o[2],e[5]=o[1]*o[1]*c+i,e[6]=o[2]*o[1]*c-o[0],e[7]=0,e[8]=o[0]*o[2]*c-o[1],e[9]=o[1]*o[2]*c+o[0],e[10]=o[2]*o[2]*c+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};ic.exports=l3});var lc=u((hk,ac)=>{var{sin:u3,cos:f3}=J(),h3=(e,t)=>{let r=u3(t),n=f3(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};ac.exports=h3});var fc=u((pk,uc)=>{var{sin:p3,cos:d3}=J(),g3=(e,t)=>{let r=p3(t),n=d3(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};uc.exports=g3});var pc=u((dk,hc)=>{var{sin:m3,cos:q3}=J(),x3=(e,t)=>{let r=m3(t),n=q3(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};hc.exports=x3});var gc=u((gk,dc)=>{var w3=e=>e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[12]===0&&e[13]===0&&e[14]===0&&e[15]===1;dc.exports=w3});var qc=u((mk,mc)=>{var v3=e=>xe(e[1])&&xe(e[2])&&xe(e[3])&&xe(e[4])&&xe(e[6])&&xe(e[7])&&xe(e[8])&&xe(e[9])&&xe(e[11])&&e[15]===1,xe=e=>Math.abs(e)<Number.EPSILON;mc.exports=v3});var wc=u((qk,xc)=>{var y3=e=>{let t=e[4]*e[9]-e[8]*e[5],r=e[8]*e[1]-e[0]*e[9],n=e[0]*e[5]-e[4]*e[1];return t*e[2]+r*e[6]+n*e[10]<0};xc.exports=y3});var yc=u((xk,vc)=>{var E3=(e,t)=>{let[r,n,s,o]=t;return e[0]=1-2*r*r,e[1]=-2*n*r,e[2]=-2*s*r,e[3]=0,e[4]=-2*r*n,e[5]=1-2*n*n,e[6]=-2*s*n,e[7]=0,e[8]=-2*r*s,e[9]=-2*n*s,e[10]=1-2*s*s,e[11]=0,e[12]=2*r*o,e[13]=2*n*o,e[14]=2*s*o,e[15]=1,e};vc.exports=E3});var Pc=u((wk,Ec)=>{var P3=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=t[3],c=t[4],a=t[5],l=t[6],f=t[7],h=t[8],p=t[9],d=t[10],m=t[11],g=t[12],q=t[13],w=t[14],v=t[15],E=r[0],x=r[1],P=r[2],y=r[3];return e[0]=E*n+x*c+P*h+y*g,e[1]=E*s+x*a+P*p+y*q,e[2]=E*o+x*l+P*d+y*w,e[3]=E*i+x*f+P*m+y*v,E=r[4],x=r[5],P=r[6],y=r[7],e[4]=E*n+x*c+P*h+y*g,e[5]=E*s+x*a+P*p+y*q,e[6]=E*o+x*l+P*d+y*w,e[7]=E*i+x*f+P*m+y*v,E=r[8],x=r[9],P=r[10],y=r[11],e[8]=E*n+x*c+P*h+y*g,e[9]=E*s+x*a+P*p+y*q,e[10]=E*o+x*l+P*d+y*w,e[11]=E*i+x*f+P*m+y*v,E=r[12],x=r[13],P=r[14],y=r[15],e[12]=E*n+x*c+P*h+y*g,e[13]=E*s+x*a+P*p+y*q,e[14]=E*o+x*l+P*d+y*w,e[15]=E*i+x*f+P*m+y*v,e};Ec.exports=P3});var bc=u((vk,Ac)=>{var{EPS:A3}=I(),{sin:b3,cos:M3}=J(),S3=sn(),T3=(e,t,r,n)=>{let[s,o,i]=n,c=s*s+o*o+i*i;if(Math.abs(c)<A3)return S3(e,t);let a=1/Math.sqrt(c);s*=a,o*=a,i*=a;let l=b3(r),f=M3(r),h=1-f,p=t[0],d=t[1],m=t[2],g=t[3],q=t[4],w=t[5],v=t[6],E=t[7],x=t[8],P=t[9],y=t[10],A=t[11],b=s*s*h+f,M=o*s*h+i*l,T=i*s*h-o*l,S=s*o*h-i*l,O=o*o*h+f,G=i*o*h+s*l,R=s*i*h+o*l,D=o*i*h-s*l,N=i*i*h+f;return e[0]=p*b+q*M+x*T,e[1]=d*b+w*M+P*T,e[2]=m*b+v*M+y*T,e[3]=g*b+E*M+A*T,e[4]=p*S+q*O+x*G,e[5]=d*S+w*O+P*G,e[6]=m*S+v*O+y*G,e[7]=g*S+E*O+A*G,e[8]=p*R+q*D+x*N,e[9]=d*R+w*D+P*N,e[10]=m*R+v*D+y*N,e[11]=g*R+E*D+A*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e};Ac.exports=T3});var Sc=u((yk,Mc)=>{var{sin:k3,cos:O3}=J(),N3=(e,t,r)=>{let n=k3(r),s=O3(r),o=t[4],i=t[5],c=t[6],a=t[7],l=t[8],f=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+l*n,e[5]=i*s+f*n,e[6]=c*s+h*n,e[7]=a*s+p*n,e[8]=l*s-o*n,e[9]=f*s-i*n,e[10]=h*s-c*n,e[11]=p*s-a*n,e};Mc.exports=N3});var kc=u((Ek,Tc)=>{var{sin:V3,cos:F3}=J(),R3=(e,t,r)=>{let n=V3(r),s=F3(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[8],f=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-l*n,e[1]=i*s-f*n,e[2]=c*s-h*n,e[3]=a*s-p*n,e[8]=o*n+l*s,e[9]=i*n+f*s,e[10]=c*n+h*s,e[11]=a*n+p*s,e};Tc.exports=R3});var Nc=u((Pk,Oc)=>{var{sin:B3,cos:z3}=J(),C3=(e,t,r)=>{let n=B3(r),s=z3(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[4],f=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+l*n,e[1]=i*s+f*n,e[2]=c*s+h*n,e[3]=a*s+p*n,e[4]=l*s-o*n,e[5]=f*s-i*n,e[6]=h*s-c*n,e[7]=p*s-a*n,e};Oc.exports=C3});var Fc=u((Ak,Vc)=>{var D3=(e,t,r)=>{let n=r[0],s=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};Vc.exports=D3});var Bc=u((bk,Rc)=>{var Z3=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e);Rc.exports=Z3});var Cc=u((Mk,zc)=>{var G3=e=>e.map(t=>t.toFixed(7)).toString();zc.exports=G3});var Zc=u((Sk,Dc)=>{var I3=(e,t,r)=>{let n=r[0],s=r[1],o=r[2],i,c,a,l,f,h,p,d,m,g,q,w;return t===e?(e[12]=t[0]*n+t[4]*s+t[8]*o+t[12],e[13]=t[1]*n+t[5]*s+t[9]*o+t[13],e[14]=t[2]*n+t[6]*s+t[10]*o+t[14],e[15]=t[3]*n+t[7]*s+t[11]*o+t[15]):(i=t[0],c=t[1],a=t[2],l=t[3],f=t[4],h=t[5],p=t[6],d=t[7],m=t[8],g=t[9],q=t[10],w=t[11],e[0]=i,e[1]=c,e[2]=a,e[3]=l,e[4]=f,e[5]=h,e[6]=p,e[7]=d,e[8]=m,e[9]=g,e[10]=q,e[11]=w,e[12]=i*n+f*s+m*o+t[12],e[13]=c*n+h*s+g*o+t[13],e[14]=a*n+p*s+q*o+t[14],e[15]=l*n+d*s+w*o+t[15]),e};Dc.exports=I3});var Y=u((Tk,Gc)=>{Gc.exports={add:Xo(),clone:Lo(),copy:sn(),create:er(),invert:Wo(),equals:Ko(),fromRotation:cn(),fromScaling:ni(),fromTaitBryanRotation:oi(),fromTranslation:ci(),fromValues:li(),fromVectorRotation:cc(),fromXRotation:lc(),fromYRotation:fc(),fromZRotation:pc(),identity:on(),isIdentity:gc(),isOnlyTransformScale:qc(),isMirroring:wc(),mirrorByPlane:yc(),multiply:Pc(),rotate:bc(),rotateX:Sc(),rotateY:kc(),rotateZ:Nc(),scale:Fc(),subtract:Bc(),toString:Cc(),translate:Zc()}});var Et=u((kk,Ic)=>{var X3=Y(),$3=e=>(e===void 0&&(e=[]),{sides:e,transforms:X3.create()});Ic.exports=$3});var $c=u((Ok,Xc)=>{var Y3=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e);Xc.exports=Y3});var Lc=u((Nk,Yc)=>{var L3=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e);Yc.exports=L3});var rr=u((Vk,Uc)=>{var U3=e=>Math.atan2(e[1],e[0]);Uc.exports=U3});var Wc=u((Fk,Hc)=>{Hc.exports=rr()});var Kc=u((Rk,_c)=>{var H3=rr(),W3=e=>H3(e)*57.29577951308232;_c.exports=W3});var Pt=u((Bk,Qc)=>{var _3=()=>[0,0];Qc.exports=_3});var jc=u((zk,Jc)=>{var K3=Pt(),Q3=e=>{let t=K3();return t[0]=e[0],t[1]=e[1],t};Jc.exports=Q3});var ta=u((Ck,ea)=>{var J3=(e,t)=>(e[0]=t[0],e[1]=t[1],e);ea.exports=J3});var na=u((Dk,ra)=>{var j3=(e,t,r)=>(e[0]=0,e[1]=0,e[2]=t[0]*r[1]-t[1]*r[0],e);ra.exports=j3});var oa=u((Zk,sa)=>{var ex=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)};sa.exports=ex});var ca=u((Gk,ia)=>{var tx=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e);ia.exports=tx});var la=u((Ik,aa)=>{var rx=(e,t)=>e[0]*t[0]+e[1]*t[1];aa.exports=rx});var fa=u((Xk,ua)=>{var nx=(e,t)=>e[0]===t[0]&&e[1]===t[1];ua.exports=nx});var vn=u(($k,ha)=>{var{sin:sx,cos:ox}=J(),ix=(e,t)=>(e[0]=ox(t),e[1]=sx(t),e);ha.exports=ix});var da=u((Yk,pa)=>{var cx=vn(),ax=(e,t)=>cx(e,t*.017453292519943295);pa.exports=ax});var ma=u((Lk,ga)=>{var lx=(e,t)=>(e[0]=t,e[1]=t,e);ga.exports=lx});var xa=u((Uk,qa)=>{var ux=Pt(),fx=(e,t)=>{let r=ux();return r[0]=e,r[1]=t,r};qa.exports=fx});var va=u((Hk,wa)=>{var hx=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]);wa.exports=hx});var Ea=u((Wk,ya)=>{var px=(e,t,r,n)=>{let s=t[0],o=t[1];return e[0]=s+n*(r[0]-s),e[1]=o+n*(r[1]-o),e};ya.exports=px});var Aa=u((_k,Pa)=>{var dx=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e);Pa.exports=dx});var Ma=u((Kk,ba)=>{var gx=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e);ba.exports=gx});var Ta=u((Qk,Sa)=>{var mx=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e);Sa.exports=mx});var Oa=u((Jk,ka)=>{var qx=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e);ka.exports=qx});var yn=u((jk,Na)=>{var xx=(e,t,r,n)=>{let s=t[0]-r[0],o=t[1]-r[1],i=Math.cos(n),c=Math.sin(n);return e[0]=s*i-o*c+r[0],e[1]=s*c+o*i+r[1],e};Na.exports=xx});var Fa=u((eO,Va)=>{var{TAU:wx}=I(),vx=Pt(),yx=yn(),Ex=(e,t)=>yx(e,t,vx(),wx/4);Va.exports=Ex});var Ba=u((tO,Ra)=>{var Px=(e,t)=>{let r=t[0],n=t[1],s=r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e};Ra.exports=Px});var Ca=u((rO,za)=>{var Ax=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e);za.exports=Ax});var Za=u((nO,Da)=>{var bx=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e);Da.exports=bx});var Ia=u((sO,Ga)=>{var Mx=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n};Ga.exports=Mx});var $a=u((oO,Xa)=>{var Sx=e=>{let t=e[0],r=e[1];return t*t+r*r};Xa.exports=Sx});var La=u((iO,Ya)=>{var Tx=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e);Ya.exports=Tx});var Ha=u((cO,Ua)=>{var kx=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}]`;Ua.exports=kx});var _a=u((aO,Wa)=>{var Ox=(e,t,r)=>{let n=t[0],s=t[1];return e[0]=r[0]*n+r[4]*s+r[12],e[1]=r[1]*n+r[5]*s+r[13],e};Wa.exports=Ox});var Z=u((lO,Ka)=>{Ka.exports={abs:$c(),add:Lc(),angle:Wc(),angleDegrees:Kc(),angleRadians:rr(),clone:jc(),copy:ta(),create:Pt(),cross:na(),distance:oa(),divide:ca(),dot:la(),equals:fa(),fromAngleDegrees:da(),fromAngleRadians:vn(),fromScalar:ma(),fromValues:xa(),length:va(),lerp:Ea(),max:Aa(),min:Ma(),multiply:Ta(),negate:Oa(),normal:Fa(),normalize:Ba(),rotate:yn(),scale:Ca(),snap:Za(),squaredDistance:Ia(),squaredLength:$a(),subtract:La(),toString:Ha(),transform:_a()}});var Ja=u((uO,Qa)=>{var En=Z(),Nx=Et(),Vx=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.length;if(t<3)throw new Error("the given points must define a closed geometry with three or more points");En.equals(e[0],e[t-1])&&--t;let r=[],n=e[t-1];for(let s=0;s<t;s++){let o=e[s];r.push([En.clone(n),En.clone(o)]),n=o}return Nx(r)};Qa.exports=Vx});var tl=u((fO,el)=>{var Fx=Y(),ja=Z(),Rx=Et(),Bx=e=>{if(e[0]!==0)throw new Error("invalid compact binary data");let t=Rx();t.transforms=Fx.clone(e.slice(1,17));for(let r=21;r<e.length;r+=4){let n=ja.fromValues(e[r+0],e[r+1]),s=ja.fromValues(e[r+2],e[r+3]);t.sides.push([n,s])}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};el.exports=Bx});var Pn=u((hO,rl)=>{var zx=e=>!!(e&&typeof e=="object"&&"sides"in e&&"transforms"in e&&Array.isArray(e.sides)&&"length"in e.transforms);rl.exports=zx});var ol=u((pO,sl)=>{var nl=Y(),nr=Z(),Cx=e=>(nl.isIdentity(e.transforms)||(e.sides=e.sides.map(t=>{let r=nr.transform(nr.create(),t[0],e.transforms),n=nr.transform(nr.create(),t[1],e.transforms);return[r,n]}),e.transforms=nl.create()),e);sl.exports=Cx});var We=u((dO,il)=>{var Dx=ol(),Zx=e=>Dx(e).sides;il.exports=Zx});var An=u((gO,cl)=>{var Gx=Et(),Ix=We(),Xx=e=>{let r=Ix(e).map(n=>[n[1],n[0]]);return r.reverse(),Gx(r)};cl.exports=Xx});var bn=u((mO,al)=>{var At=Z(),$x=We(),Yx=e=>{let t=new Map,r=n=>{let s=n.toString();return t.has(s)?t.get(s):(t.set(s,n),n)};return e.map(n=>n.map(r))},Lx=e=>{let t=new Map;return Yx(e).forEach(n=>{t.has(n[0])?t.get(n[0]).push(n):t.set(n[0],[n])}),t},Ux=e=>{let t=Lx($x(e)),r=[];for(;;){let n;for(let[i,c]of t){if(n=c.shift(),!n){t.delete(i);continue}break}if(n===void 0)break;let s=[],o=n[0];for(;;){s.push(n[0]);let i=n[1];if(i===o)break;let c=t.get(i);if(!c)throw new Error(`geometry is not closed at vertex ${i}`);let a=Hx(n,c);c.length===0&&t.delete(i),n=a}s.length>0&&s.push(s.shift()),r.push(s)}return t.clear(),r},Hx=(e,t)=>{if(t.length===1)return t.pop();let r=At.create(),n=At.angleDegrees(At.subtract(r,e[1],e[0])),s,o;t.forEach((c,a)=>{let f=At.angleDegrees(At.subtract(r,c[1],c[0]))-n;f<-180&&(f+=360),f>=180&&(f-=360),(o===void 0||f>s)&&(o=a,s=f)});let i=t[o];return t.splice(o,1),i};al.exports=Ux});var ul=u((qO,ll)=>{var Wx=We(),_x=e=>{let r=Wx(e).map(n=>n[0]);return r.length>0&&r.push(r.shift()),r};ll.exports=_x});var pl=u((xO,hl)=>{var fl=Z(),Kx=We(),Qx=e=>{let t=Kx(e),r="geom2 ("+t.length+` sides):
[
`;return t.forEach(n=>{r+="  ["+fl.toString(n[0])+", "+fl.toString(n[1])+`]
`}),r+=`]
`,r};hl.exports=Qx});var gl=u((wO,dl)=>{var Jx=e=>{let t=e.sides,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(21+t.length*4);s[0]=0,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=n[0],s[18]=n[1],s[19]=n[2],s[20]=n[3];for(let o=0;o<t.length;o++){let i=o*4+21,c=t[o][0],a=t[o][1];s[i+0]=c[0],s[i+1]=c[1],s[i+2]=a[0],s[i+3]=a[1]}return s};dl.exports=Jx});var xl=u((vO,ql)=>{var ml=Y(),jx=An(),ew=(e,t)=>{let r=ml.multiply(ml.create(),e,t.transforms),n=Object.assign({},t,{transforms:r});return e[0]*e[5]-e[4]*e[1]<0?jx(n):n};ql.exports=ew});var vl=u((yO,wl)=>{var tw=Z(),rw=Pn(),nw=bn(),sw=e=>{if(!rw(e))throw new Error("invalid geom2 structure");if(nw(e),e.sides.forEach(t=>{if(tw.equals(t[0],t[1]))throw new Error(`geom2 self-edge ${t[0]}`)}),!e.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${e.transforms}`)};wl.exports=sw});var z=u((EO,yl)=>{yl.exports={clone:Go(),create:Et(),fromPoints:Ja(),fromCompactBinary:tl(),isA:Pn(),reverse:An(),toOutlines:bn(),toPoints:ul(),toSides:We(),toString:pl(),toCompactBinary:gl(),transform:xl(),validate:vl()}});var Pl=u((PO,El)=>{var ow=e=>Object.assign({},e);El.exports=ow});var bt=u((AO,Al)=>{var iw=Y(),cw=e=>(e===void 0&&(e=[]),{polygons:e,transforms:iw.create()});Al.exports=cw});var Be=u((bO,bl)=>{var aw=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});bl.exports=aw});var Sl=u((MO,Ml)=>{var lw=Be(),uw=V(),fw=(...e)=>{let t,r;return e.length===1?(t=lw(),r=e[0]):(t=e[0],r=e[1]),t.vertices=r.vertices.map(n=>uw.clone(n)),t};Ml.exports=fw});var kl=u((SO,Tl)=>{var hw=V(),pw=Be(),dw=e=>{let t=e.map(r=>hw.clone(r));return pw(t)};Tl.exports=dw});var Nl=u((TO,Ol)=>{var gw=Be(),mw=(e,t)=>{let r=gw(e);return r.plane=t,r};Ol.exports=mw});var Mt=u((kO,Vl)=>{var qw=()=>[0,0,0,0];Vl.exports=qw});var Mn=u((OO,Fl)=>{var xw=Mt(),ww=e=>{let t=xw();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Fl.exports=ww});var Sn=u((NO,Rl)=>{var vw=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e);Rl.exports=vw});var Tn=u((VO,Bl)=>{var yw=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3];Bl.exports=yw});var kn=u((FO,zl)=>{var Ew=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e);zl.exports=Ew});var Dl=u((RO,Cl)=>{var On=V(),Pw=(e,t,r)=>{let n=On.normalize(On.create(),t),s=On.dot(r,n);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=s,e};Cl.exports=Pw});var Nn=u((BO,Zl)=>{var Aw=Mt(),bw=(e,t,r,n)=>{let s=Aw();return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s};Zl.exports=bw});var Vn=u((zO,Gl)=>{var pe=V(),Mw=(e,...t)=>{let r=t.length,n=pe.create(),s=pe.create(),o=i=>{let c=t[i],a=t[(i+1)%r],l=t[(i+2)%r];return pe.subtract(n,a,c),pe.subtract(s,l,c),pe.cross(n,n,s),pe.normalize(n,n),n};return e[0]=0,e[1]=0,e[2]=0,r===3?pe.copy(e,o(0)):(t.forEach((i,c)=>{pe.add(e,e,o(c))}),pe.normalize(e,e)),e[3]=pe.dot(e,t[0]),e};Gl.exports=Mw});var Xl=u((CO,Il)=>{var{EPS:Fn}=I(),se=V(),Sw=(e,t,r,n)=>{let s=se.subtract(se.create(),r,t),o=se.subtract(se.create(),n,t);se.length(s)<Fn&&(s=se.orthogonal(s,o)),se.length(o)<Fn&&(o=se.orthogonal(o,s));let i=se.cross(se.create(),s,o);se.length(i)<Fn&&(o=se.orthogonal(o,s),i=se.cross(i,s,o)),i=se.normalize(i,i);let c=se.dot(i,t);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=c,e};Il.exports=Sw});var Yl=u((DO,$l)=>{var Tw=V(),kw=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]-e[3],n=t[0]-r*e[0],s=t[1]-r*e[1],o=t[2]-r*e[2];return Tw.fromValues(n,s,o)};$l.exports=kw});var Rn=u((ZO,Ll)=>{var Ow=V(),Nw=(e,t)=>Ow.dot(e,t)-e[3];Ll.exports=Nw});var Bn=u((GO,Ul)=>{var Vw=e=>`(${e[0].toFixed(9)}, ${e[1].toFixed(9)}, ${e[2].toFixed(9)}, ${e[3].toFixed(9)})`;Ul.exports=Vw});var Wl=u((IO,Hl)=>{var Fw=Y(),oe=V(),Rw=Vn(),Bw=kn(),zw=(e,t,r)=>{let n=Fw.isMirroring(r),s=oe.orthogonal(oe.create(),t),o=oe.cross(s,t,s),i=oe.cross(oe.create(),t,o),c=oe.fromScalar(oe.create(),t[3]);oe.multiply(c,c,t);let a=oe.add(oe.create(),c,o),l=oe.add(oe.create(),c,i);return c=oe.transform(c,c,r),a=oe.transform(a,a,r),l=oe.transform(l,l,r),Rw(e,c,a,l),n&&Bw(e,e),e};Hl.exports=zw});var fe=u((XO,_l)=>{_l.exports={clone:Mn(),copy:Sn(),create:Mt(),equals:Tn(),flip:kn(),fromNormalAndPoint:Dl(),fromValues:Nn(),fromPoints:Vn(),fromPointsRandom:Xl(),projectionOfPoint:Yl(),signedDistanceToPoint:Rn(),toString:Bn(),transform:Wl()}});var Jl=u(($O,Ql)=>{var Kl=fe(),Cw=Be(),Dw=e=>{let t=e.vertices.slice().reverse(),r=Cw(t);return e.plane&&(r.plane=Kl.flip(Kl.create(),e.plane)),r};Ql.exports=Dw});var zn=u((YO,jl)=>{var Zw=e=>!!(e&&typeof e=="object"&&"vertices"in e&&Array.isArray(e.vertices));jl.exports=Zw});var Cn=u((LO,t1)=>{var e1=fe(),ze=V(),Gw=e=>Iw(e.vertices),Iw=e=>{let t=e.length;if(t>2){let r=e1.fromPoints(e1.create(),...e),n=e[t-2],s=e[t-1];for(let o=0;o<t;o++){let i=e[o];if(!Xw(n,s,i,r))return!1;n=s,s=i}}return!0},Xw=(e,t,r,n)=>{let s=ze.cross(ze.create(),ze.subtract(ze.create(),t,e),ze.subtract(ze.create(),r,t));return ze.dot(s,n)>=0};t1.exports=Gw});var sr=u((UO,n1)=>{var r1=fe(),$w=e=>(e.plane||(e.plane=r1.fromPoints(r1.create(),...e.vertices)),e.plane);n1.exports=$w});var Dn=u((HO,s1)=>{var Yw=sr(),Lw=e=>{let t=e.vertices.length;if(t<3)return 0;let r=e.vertices,n=Yw(e),s=Math.abs(n[0]),o=Math.abs(n[1]),i=Math.abs(n[2]);if(s+o+i===0)return 0;let c=3;s>o&&s>i?c=1:o>i&&(c=2);let a=0,l=0,f=1,h=2;switch(c){case 1:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][1]*(r[h][2]-r[l][2]);a+=r[0][1]*(r[1][2]-r[t-1][2]),a/=2*n[0];break;case 2:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][2]*(r[h][0]-r[l][0]);a+=r[0][2]*(r[1][0]-r[t-1][0]),a/=2*n[1];break;case 3:default:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][0]*(r[h][1]-r[l][1]);a+=r[0][0]*(r[1][1]-r[t-1][1]),a/=2*n[2];break}return a};s1.exports=Lw});var i1=u((WO,o1)=>{var St=V(),Uw=e=>{let t=e.vertices,r=t.length,n=r===0?St.create():St.clone(t[0]),s=St.clone(n);for(let o=1;o<r;o++)St.min(n,n,t[o]),St.max(s,s,t[o]);return[n,s]};o1.exports=Uw});var a1=u((_O,c1)=>{var Hw=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3];c1.exports=Hw});var u1=u((KO,l1)=>{var Ww=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e[3]=t,e);l1.exports=Ww});var h1=u((QO,f1)=>{var _w=(e,t,r)=>{let[n,s,o,i]=t;return e[0]=r[0]*n+r[4]*s+r[8]*o+r[12]*i,e[1]=r[1]*n+r[5]*s+r[9]*o+r[13]*i,e[2]=r[2]*n+r[6]*s+r[10]*o+r[14]*i,e[3]=r[3]*n+r[7]*s+r[11]*o+r[15]*i,e};f1.exports=_w});var Zn=u((JO,p1)=>{p1.exports={clone:Mn(),copy:Sn(),create:Mt(),dot:a1(),equals:Tn(),fromScalar:u1(),fromValues:Nn(),toString:Bn(),transform:h1()}});var m1=u((jO,g1)=>{var Kw=Zn(),d1=new WeakMap,Qw=e=>{let t=d1.get(e);if(t)return t;let r=e.vertices,n=Kw.create();if(r.length===0)return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n;let s=r[0],o=s,i=s,c=s,a=s,l=s;r.forEach(d=>{s[0]>d[0]&&(s=d),o[1]>d[1]&&(o=d),i[2]>d[2]&&(i=d),c[0]<d[0]&&(c=d),a[1]<d[1]&&(a=d),l[2]<d[2]&&(l=d)}),n[0]=(s[0]+c[0])*.5,n[1]=(o[1]+a[1])*.5,n[2]=(i[2]+l[2])*.5;let f=n[0]-c[0],h=n[1]-a[1],p=n[2]-l[2];return n[3]=Math.sqrt(f*f+h*h+p*p),d1.set(e,n),n};g1.exports=Qw});var x1=u((eN,q1)=>{var Gn=V(),Jw=e=>{let t=0,r=e.vertices,n=Gn.create();for(let s=0;s<r.length-2;s++)Gn.cross(n,r[s+1],r[s+2]),t+=Gn.dot(r[0],n);return t/=6,t};q1.exports=Jw});var v1=u((tN,w1)=>{var jw=e=>e.vertices;w1.exports=jw});var E1=u((rN,y1)=>{var ev=V(),tv=e=>{let t="poly3: vertices: [";return e.vertices.forEach(r=>{t+=`${ev.toString(r)}, `}),t+="]",t};y1.exports=tv});var b1=u((nN,A1)=>{var rv=Y(),P1=V(),nv=Be(),sv=(e,t)=>{let r=t.vertices.map(n=>P1.transform(P1.create(),n,e));return rv.isMirroring(e)&&r.reverse(),nv(r)};A1.exports=sv});var S1=u((sN,M1)=>{var ov=Rn(),{NEPS:iv}=I(),cv=V(),av=zn(),lv=Cn(),uv=Dn(),fv=sr(),hv=e=>{if(!av(e))throw new Error("invalid poly3 structure");if(e.vertices.length<3)throw new Error(`poly3 not enough vertices ${e.vertices.length}`);if(uv(e)<=0)throw new Error("poly3 area must be greater than zero");for(let t=0;t<e.vertices.length;t++)if(cv.equals(e.vertices[t],e.vertices[(t+1)%e.vertices.length]))throw new Error(`poly3 duplicate vertex ${e.vertices[t]}`);if(!lv(e))throw new Error("poly3 must be convex");if(e.vertices.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${t}`)}),e.vertices.length>3){let t=fv(e);e.vertices.forEach(r=>{let n=Math.abs(ov(t,r));if(n>iv)throw new Error(`poly3 must be coplanar: vertex ${r} distance ${n}`)})}};M1.exports=hv});var X=u((oN,T1)=>{T1.exports={clone:Sl(),create:Be(),fromPoints:kl(),fromPointsAndPlane:Nl(),invert:Jl(),isA:zn(),isConvex:Cn(),measureArea:Dn(),measureBoundingBox:i1(),measureBoundingSphere:m1(),measureSignedVolume:x1(),plane:sr(),toPoints:v1(),toString:E1(),transform:b1(),validate:S1()}});var O1=u((iN,k1)=>{var pv=X(),dv=bt(),gv=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.map((n,s)=>pv.create(n));return dv(t)};k1.exports=gv});var V1=u((cN,N1)=>{var mv=V(),qv=Y(),xv=X(),wv=bt(),vv=e=>{if(e[0]!==1)throw new Error("invalid compact binary data");let t=wv();t.transforms=qv.clone(e.slice(1,17));let r=e[21],n=22,s=e.length-r*3;for(;s<e.length;){let o=e[n];n++;let i=[];for(let c=0;c<o;c++)i.push(mv.fromValues(e[s],e[s+1],e[s+2])),s+=3;t.polygons.push(xv.create(i))}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};N1.exports=vv});var B1=u((aN,R1)=>{var F1=Y(),yv=X(),Ev=e=>(F1.isIdentity(e.transforms)||(e.polygons=e.polygons.map(t=>yv.transform(e.transforms,t)),e.transforms=F1.create()),e);R1.exports=Ev});var Tt=u((lN,z1)=>{var Pv=B1(),Av=e=>Pv(e).polygons;z1.exports=Av});var D1=u((uN,C1)=>{var bv=X(),Mv=bt(),Sv=Tt(),Tv=e=>{let r=Sv(e).map(n=>bv.invert(n));return Mv(r)};C1.exports=Tv});var In=u((fN,Z1)=>{var kv=e=>!!(e&&typeof e=="object"&&"polygons"in e&&"transforms"in e&&Array.isArray(e.polygons)&&"length"in e.transforms);Z1.exports=kv});var I1=u((hN,G1)=>{var Ov=X(),Nv=Tt(),Vv=e=>Nv(e).map(n=>Ov.toPoints(n));G1.exports=Vv});var $1=u((pN,X1)=>{var Fv=X(),Rv=Tt(),Bv=e=>{let t=Rv(e),r="geom3 ("+t.length+` polygons):
`;return t.forEach(n=>{r+="  "+Fv.toString(n)+`
`}),r};X1.exports=Bv});var L1=u((dN,Y1)=>{var zv=X(),Cv=e=>{let t=e.polygons,r=e.transforms,n=t.length,s=t.reduce((l,f)=>l+f.vertices.length,0),o=[-1,-1,-1,-1];e.color&&(o=e.color);let i=new Float32Array(22+n+s*3);i[0]=1,i[1]=r[0],i[2]=r[1],i[3]=r[2],i[4]=r[3],i[5]=r[4],i[6]=r[5],i[7]=r[6],i[8]=r[7],i[9]=r[8],i[10]=r[9],i[11]=r[10],i[12]=r[11],i[13]=r[12],i[14]=r[13],i[15]=r[14],i[16]=r[15],i[17]=o[0],i[18]=o[1],i[19]=o[2],i[20]=o[3],i[21]=s;let c=22,a=c+n;return t.forEach(l=>{let f=zv.toPoints(l);i[c]=f.length,c++;for(let h=0;h<f.length;h++){let p=f[h];i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],a+=3}}),i};Y1.exports=Cv});var W1=u((gN,H1)=>{var U1=Y(),Dv=(e,t)=>{let r=U1.multiply(U1.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};H1.exports=Dv});var K1=u((mN,_1)=>{var Zv=X(),Gv=In(),Iv=e=>{if(!Gv(e))throw new Error("invalid geom3 structure");if(e.polygons.forEach(Zv.validate),Xv(e),!e.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${e.transforms}`)},Xv=e=>{let t=new Map;e.polygons.forEach(({vertices:n})=>{n.forEach((s,o)=>{let i=`${s}`,c=`${n[(o+1)%n.length]}`,a=`${i}/${c}`,l=t.has(a)?t.get(a):0;t.set(a,l+1)})});let r=[];if(t.forEach((n,s)=>{let o=s.split("/").reverse().join("/"),i=t.get(o);n!==i&&r.push(s.replace("/"," -> "))}),r.length>0)throw new Error(`non-manifold edges ${r.length}
${r.join(`
`)}`)};_1.exports=Iv});var C=u((qN,Q1)=>{Q1.exports={clone:Pl(),create:bt(),fromPoints:O1(),fromCompactBinary:V1(),invert:D1(),isA:In(),toPoints:I1(),toPolygons:Tt(),toString:$1(),toCompactBinary:L1(),transform:W1(),validate:K1()}});var or=u((xN,J1)=>{var $v=e=>Object.assign({},e);J1.exports=$v});var Xn=u((wN,eu)=>{var{EPS:j1}=I(),Yv=Z(),Lv=or(),Uv=e=>{if(e.isClosed)return e;let t=Lv(e);if(t.isClosed=!0,t.points.length>1){let r=t.points,n=r[0],s=r[r.length-1];for(;Yv.distance(n,s)<j1*j1&&(r.pop(),r.length!==1);)s=r[r.length-1]}return t};eu.exports=Uv});var kt=u((vN,tu)=>{var Hv=Y(),Wv=e=>(e===void 0&&(e=[]),{points:e,isClosed:!1,transforms:Hv.create()});tu.exports=Wv});var ir=u((yN,su)=>{var{EPS:ru}=I(),nu=Z(),_v=Xn(),Kv=kt(),Qv=(e,t)=>{let r={closed:!1},{closed:n}=Object.assign({},r,e),s=Kv();if(s.points=t.map(o=>nu.clone(o)),s.points.length>1){let o=s.points[0],i=s.points[s.points.length-1];nu.distance(o,i)<ru*ru&&(n=!0)}return n===!0&&(s=_v(s)),s};su.exports=Qv});var au=u((EN,cu)=>{var ou=Y(),iu=Z(),Jv=e=>(ou.isIdentity(e.transforms)||(e.points=e.points.map(t=>iu.transform(iu.create(),t,e.transforms)),e.transforms=ou.create()),e);cu.exports=Jv});var Ce=u((PN,lu)=>{var jv=au(),ey=e=>jv(e).points;lu.exports=ey});var fu=u((AN,uu)=>{var{TAU:cr}=I(),_=Z(),ty=ir(),ry=Ce(),ny=(e,t)=>{let r={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16},{endpoint:n,radius:s,xaxisrotation:o,clockwise:i,large:c,segments:a}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=_.clone(n),!Array.isArray(s))throw new Error("radius must be an array of X and Y values");if(s.length<2)throw new Error("radius must contain X and Y values");if(a<4)throw new Error("segments must be four or more");let l=1e5;if(t.isClosed)throw new Error("the given path cannot be closed");let f=ry(t);if(f.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let h=s[0],p=s[1],d=f[f.length-1];h=Math.round(h*l)/l,p=Math.round(p*l)/l,n=_.fromValues(Math.round(n[0]*l)/l,Math.round(n[1]*l)/l);let m=!i,g=[];if(h===0||p===0)g.push(n);else{h=Math.abs(h),p=Math.abs(p);let w=o,v=Math.cos(w),E=Math.sin(w),x=_.subtract(_.create(),d,n);_.scale(x,x,.5);let P=Math.round((v*x[0]+E*x[1])*l)/l,y=Math.round((-E*x[0]+v*x[1])*l)/l,A=_.fromValues(P,y),b=A[0]*A[0]/(h*h)+A[1]*A[1]/(p*p);if(b>1){let ne=Math.sqrt(b);h*=ne,p*=ne,h=Math.round(h*l)/l,p=Math.round(p*l)/l}let M=Math.sqrt((h*h*p*p-h*h*A[1]*A[1]-p*p*A[0]*A[0])/(h*h*A[1]*A[1]+p*p*A[0]*A[0]));m===c&&(M=-M);let T=_.fromValues(h*A[1]/p,-p*A[0]/h);_.scale(T,T,M);let S=_.fromValues(v*T[0]-E*T[1],E*T[0]+v*T[1]);S=_.add(S,S,_.scale(_.create(),_.add(_.create(),d,n),.5));let O=_.fromValues((A[0]-T[0])/h,(A[1]-T[1])/p),G=_.fromValues((-A[0]-T[0])/h,(-A[1]-T[1])/p),R=_.angleRadians(O),N=_.angleRadians(G)-R;N=N%cr,!m&&N>0?N-=cr:m&&N<0&&(N+=cr);let ee=Math.ceil(Math.abs(N)/cr*a)+1;ee<1&&(ee=1);for(let ne=1;ne<ee;ne++){let Pe=R+ne/ee*N,xt=Math.cos(Pe),Jt=Math.sin(Pe),Ue=_.fromValues(v*h*xt-E*p*Jt,E*h*xt+v*p*Jt);_.add(Ue,Ue,S),g.push(Ue)}ee&&g.push(e.endpoint)}return g=f.concat(g),ty({},g)};uu.exports=ny});var $n=u((bN,hu)=>{var sy=ir(),oy=Ce(),{equals:iy}=Z(),cy=(...e)=>{let t=!1,r=[];return e.forEach((n,s)=>{let o=oy(n).slice();if(r.length>0&&o.length>0&&iy(o[0],r[r.length-1])&&o.shift(),o.length>0&&t)throw new Error(`Cannot concatenate to a closed path; check the ${s}th path`);t=n.isClosed,r=r.concat(o)}),sy({closed:t},r)};hu.exports=cy});var Yn=u((MN,pu)=>{var ay=$n(),ly=kt(),uy=(e,t)=>ay(t,ly(e));pu.exports=uy});var gu=u((SN,du)=>{var{TAU:fy}=I(),le=Z(),hy=Z(),py=Yn(),dy=Ce(),gy=(e,t)=>{let r={segments:16},{controlPoints:n,segments:s}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(s<4)throw new Error("segments must be four or more");if(t.isClosed)throw new Error("the given geometry cannot be closed");let o=dy(t);if(o.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),n[0]===null){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let y=o[o.length-2];if("lastBezierControlPoint"in t&&(y=t.lastBezierControlPoint),!Array.isArray(y))throw new Error("the given path must contain TWO or more points if given a null control point");let A=le.scale(le.create(),o[o.length-1],2);le.subtract(A,A,y),n[0]=A}n.unshift(o[o.length-1]);let c=n.length-1,a=[],l=1;for(let y=0;y<=c;++y)y>0&&(l*=y),a.push(l);let f=[];for(let y=0;y<=c;++y){let A=a[c]/(a[y]*a[c-y]);f.push(A)}let h=le.create(),p=le.create(),d=hy.create(),m=y=>{let A=1,b=Math.pow(1-y,c),M=y!==1?1/(1-y):1,T=le.create();for(let S=0;S<=c;++S){S===c&&(b=1);let O=f[S]*A*b,G=le.scale(h,n[S],O);le.add(T,T,G),A*=y,b*=M}return T},g=[],q=[],w=c+1;for(let y=0;y<w;++y){let A=y/(w-1),b=m(A);g.push(b),q.push(A)}let v=1,E=fy/s,x=Math.sin(E);for(;v<g.length-1;){let y=le.subtract(h,g[v],g[v-1]);le.normalize(y,y);let A=le.subtract(p,g[v+1],g[v]);le.normalize(A,A);let b=le.cross(d,y,A);if(Math.abs(b[2])>x){let M=q[v-1],T=q[v+1],S=M+(T-M)*1/3,O=M+(T-M)*2/3,G=m(S),R=m(O);g.splice(v,1,G,R),q.splice(v,1,S,O),v--,v<1&&(v=1)}else++v}g.shift();let P=py(g,t);return P.lastBezierControlPoint=n[n.length-2],P};du.exports=gy});var xu=u((TN,qu)=>{var my=Z(),mu=Ce(),qy=(e,t)=>{if(e.isClosed!==t.isClosed||e.points.length!==t.points.length)return!1;let r=mu(e),n=mu(t),s=r.length,o=0;do{let i=!1;for(let c=0;c<s;c++)if(!my.equals(r[c],n[(c+o)%s])){i=!0;break}if(i===!1)return!0;if(!e.isClosed)return!1}while(++o<s);return!1};qu.exports=qy});var vu=u((kN,wu)=>{var xy=Y(),wy=Z(),vy=kt(),yy=e=>{if(e[0]!==2)throw new Error("invalid compact binary data");let t=vy();t.transforms=xy.clone(e.slice(1,17)),t.isClosed=!!e[17];for(let r=22;r<e.length;r+=2){let n=wy.fromValues(e[r],e[r+1]);t.points.push(n)}return e[18]>=0&&(t.color=[e[18],e[19],e[20],e[21]]),t};wu.exports=yy});var Ln=u((ON,yu)=>{var Ey=e=>!!(e&&typeof e=="object"&&"points"in e&&"transforms"in e&&"isClosed"in e&&Array.isArray(e.points)&&"length"in e.transforms);yu.exports=Ey});var Pu=u((NN,Eu)=>{var Py=or(),Ay=e=>{let t=Py(e);return t.points=e.points.slice().reverse(),t};Eu.exports=Ay});var bu=u((VN,Au)=>{var by=Z(),My=Ce(),Sy=e=>{let t=My(e),r="path ("+t.length+" points, "+e.isClosed+`):
[
`;return t.forEach(n=>{r+="  "+by.toString(n)+`,
`}),r+=`]
`,r};Au.exports=Sy});var Su=u((FN,Mu)=>{var Ty=e=>{let t=e.points,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(22+t.length*2);s[0]=2,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=e.isClosed?1:0,s[18]=n[0],s[19]=n[1],s[20]=n[2],s[21]=n[3];for(let o=0;o<t.length;o++){let i=o*2+22,c=t[o];s[i]=c[0],s[i+1]=c[1]}return s};Mu.exports=Ty});var Ou=u((RN,ku)=>{var Tu=Y(),ky=(e,t)=>{let r=Tu.multiply(Tu.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};ku.exports=ky});var Vu=u((BN,Nu)=>{var Oy=Z(),Ny=Ln(),Vy=e=>{if(!Ny(e))throw new Error("invalid path2 structure");if(e.points.length>1){for(let t=0;t<e.points.length;t++)if(Oy.equals(e.points[t],e.points[(t+1)%e.points.length]))throw new Error(`path2 duplicate points ${e.points[t]}`)}if(e.points.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`path2 invalid point ${t}`)}),!e.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${e.transforms}`)};Nu.exports=Vy});var $=u((zN,Fu)=>{Fu.exports={appendArc:fu(),appendBezier:gu(),appendPoints:Yn(),clone:or(),close:Xn(),concat:$n(),create:kt(),equals:xu(),fromPoints:ir(),fromCompactBinary:vu(),isA:Ln(),reverse:Pu(),toPoints:Ce(),toString:bu(),toCompactBinary:Su(),transform:Ou(),validate:Vu()}});var Zu=u((CN,Du)=>{var Fy=B(),Ru=z(),Bu=C(),zu=$(),Cu=X(),Ry=(e,t)=>{let r=Ru.clone(t);return r.color=e,r},By=(e,t)=>{let r=Bu.clone(t);return r.color=e,r},zy=(e,t)=>{let r=zu.clone(t);return r.color=e,r},Cy=(e,t)=>{let r=Cu.clone(t);return r.color=e,r},Dy=(e,...t)=>{if(!Array.isArray(e))throw new Error("color must be an array");if(e.length<3)throw new Error("color must contain R, G and B values");if(e.length===3&&(e=[e[0],e[1],e[2],1]),t=Fy(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>Ru.isA(n)?Ry(e,n):Bu.isA(n)?By(e,n):zu.isA(n)?zy(e,n):Cu.isA(n)?Cy(e,n):(n.color=e,n));return r.length===1?r[0]:r};Du.exports=Dy});var Un=u((DN,Gu)=>{var Zy={black:[0,0,0],silver:[.7529411764705882,.7529411764705882,.7529411764705882],gray:[.5019607843137255,.5019607843137255,.5019607843137255],white:[1,1,1],maroon:[.5019607843137255,0,0],red:[1,0,0],purple:[.5019607843137255,0,.5019607843137255],fuchsia:[1,0,1],green:[0,.5019607843137255,0],lime:[0,1,0],olive:[.5019607843137255,.5019607843137255,0],yellow:[1,1,0],navy:[0,0,.5019607843137255],blue:[0,0,1],teal:[0,.5019607843137255,.5019607843137255],aqua:[0,1,1],aliceblue:[.9411764705882353,.9725490196078431,1],antiquewhite:[.9803921568627451,.9215686274509803,.8431372549019608],aquamarine:[.4980392156862745,1,.8313725490196079],azure:[.9411764705882353,1,1],beige:[.9607843137254902,.9607843137254902,.8627450980392157],bisque:[1,.8941176470588236,.7686274509803922],blanchedalmond:[1,.9215686274509803,.803921568627451],blueviolet:[.5411764705882353,.16862745098039217,.8862745098039215],brown:[.6470588235294118,.16470588235294117,.16470588235294117],burlywood:[.8705882352941177,.7215686274509804,.5294117647058824],cadetblue:[.37254901960784315,.6196078431372549,.6274509803921569],chartreuse:[.4980392156862745,1,0],chocolate:[.8235294117647058,.4117647058823529,.11764705882352941],coral:[1,.4980392156862745,.3137254901960784],cornflowerblue:[.39215686274509803,.5843137254901961,.9294117647058824],cornsilk:[1,.9725490196078431,.8627450980392157],crimson:[.8627450980392157,.0784313725490196,.23529411764705882],cyan:[0,1,1],darkblue:[0,0,.5450980392156862],darkcyan:[0,.5450980392156862,.5450980392156862],darkgoldenrod:[.7215686274509804,.5254901960784314,.043137254901960784],darkgray:[.6627450980392157,.6627450980392157,.6627450980392157],darkgreen:[0,.39215686274509803,0],darkgrey:[.6627450980392157,.6627450980392157,.6627450980392157],darkkhaki:[.7411764705882353,.7176470588235294,.4196078431372549],darkmagenta:[.5450980392156862,0,.5450980392156862],darkolivegreen:[.3333333333333333,.4196078431372549,.1843137254901961],darkorange:[1,.5490196078431373,0],darkorchid:[.6,.19607843137254902,.8],darkred:[.5450980392156862,0,0],darksalmon:[.9137254901960784,.5882352941176471,.47843137254901963],darkseagreen:[.5607843137254902,.7372549019607844,.5607843137254902],darkslateblue:[.2823529411764706,.23921568627450981,.5450980392156862],darkslategray:[.1843137254901961,.30980392156862746,.30980392156862746],darkslategrey:[.1843137254901961,.30980392156862746,.30980392156862746],darkturquoise:[0,.807843137254902,.8196078431372549],darkviolet:[.5803921568627451,0,.8274509803921568],deeppink:[1,.0784313725490196,.5764705882352941],deepskyblue:[0,.7490196078431373,1],dimgray:[.4117647058823529,.4117647058823529,.4117647058823529],dimgrey:[.4117647058823529,.4117647058823529,.4117647058823529],dodgerblue:[.11764705882352941,.5647058823529412,1],firebrick:[.6980392156862745,.13333333333333333,.13333333333333333],floralwhite:[1,.9803921568627451,.9411764705882353],forestgreen:[.13333333333333333,.5450980392156862,.13333333333333333],gainsboro:[.8627450980392157,.8627450980392157,.8627450980392157],ghostwhite:[.9725490196078431,.9725490196078431,1],gold:[1,.8431372549019608,0],goldenrod:[.8549019607843137,.6470588235294118,.12549019607843137],greenyellow:[.6784313725490196,1,.1843137254901961],grey:[.5019607843137255,.5019607843137255,.5019607843137255],honeydew:[.9411764705882353,1,.9411764705882353],hotpink:[1,.4117647058823529,.7058823529411765],indianred:[.803921568627451,.3607843137254902,.3607843137254902],indigo:[.29411764705882354,0,.5098039215686274],ivory:[1,1,.9411764705882353],khaki:[.9411764705882353,.9019607843137255,.5490196078431373],lavender:[.9019607843137255,.9019607843137255,.9803921568627451],lavenderblush:[1,.9411764705882353,.9607843137254902],lawngreen:[.48627450980392156,.9882352941176471,0],lemonchiffon:[1,.9803921568627451,.803921568627451],lightblue:[.6784313725490196,.8470588235294118,.9019607843137255],lightcoral:[.9411764705882353,.5019607843137255,.5019607843137255],lightcyan:[.8784313725490196,1,1],lightgoldenrodyellow:[.9803921568627451,.9803921568627451,.8235294117647058],lightgray:[.8274509803921568,.8274509803921568,.8274509803921568],lightgreen:[.5647058823529412,.9333333333333333,.5647058823529412],lightgrey:[.8274509803921568,.8274509803921568,.8274509803921568],lightpink:[1,.7137254901960784,.7568627450980392],lightsalmon:[1,.6274509803921569,.47843137254901963],lightseagreen:[.12549019607843137,.6980392156862745,.6666666666666666],lightskyblue:[.5294117647058824,.807843137254902,.9803921568627451],lightslategray:[.4666666666666667,.5333333333333333,.6],lightslategrey:[.4666666666666667,.5333333333333333,.6],lightsteelblue:[.6901960784313725,.7686274509803922,.8705882352941177],lightyellow:[1,1,.8784313725490196],limegreen:[.19607843137254902,.803921568627451,.19607843137254902],linen:[.9803921568627451,.9411764705882353,.9019607843137255],magenta:[1,0,1],mediumaquamarine:[.4,.803921568627451,.6666666666666666],mediumblue:[0,0,.803921568627451],mediumorchid:[.7294117647058823,.3333333333333333,.8274509803921568],mediumpurple:[.5764705882352941,.4392156862745098,.8588235294117647],mediumseagreen:[.23529411764705882,.7019607843137254,.44313725490196076],mediumslateblue:[.4823529411764706,.40784313725490196,.9333333333333333],mediumspringgreen:[0,.9803921568627451,.6039215686274509],mediumturquoise:[.2823529411764706,.8196078431372549,.8],mediumvioletred:[.7803921568627451,.08235294117647059,.5215686274509804],midnightblue:[.09803921568627451,.09803921568627451,.4392156862745098],mintcream:[.9607843137254902,1,.9803921568627451],mistyrose:[1,.8941176470588236,.8823529411764706],moccasin:[1,.8941176470588236,.7098039215686275],navajowhite:[1,.8705882352941177,.6784313725490196],oldlace:[.9921568627450981,.9607843137254902,.9019607843137255],olivedrab:[.4196078431372549,.5568627450980392,.13725490196078433],orange:[1,.6470588235294118,0],orangered:[1,.27058823529411763,0],orchid:[.8549019607843137,.4392156862745098,.8392156862745098],palegoldenrod:[.9333333333333333,.9098039215686274,.6666666666666666],palegreen:[.596078431372549,.984313725490196,.596078431372549],paleturquoise:[.6862745098039216,.9333333333333333,.9333333333333333],palevioletred:[.8588235294117647,.4392156862745098,.5764705882352941],papayawhip:[1,.9372549019607843,.8352941176470589],peachpuff:[1,.8549019607843137,.7254901960784313],peru:[.803921568627451,.5215686274509804,.24705882352941178],pink:[1,.7529411764705882,.796078431372549],plum:[.8666666666666667,.6274509803921569,.8666666666666667],powderblue:[.6901960784313725,.8784313725490196,.9019607843137255],rosybrown:[.7372549019607844,.5607843137254902,.5607843137254902],royalblue:[.2549019607843137,.4117647058823529,.8823529411764706],saddlebrown:[.5450980392156862,.27058823529411763,.07450980392156863],salmon:[.9803921568627451,.5019607843137255,.4470588235294118],sandybrown:[.9568627450980393,.6431372549019608,.3764705882352941],seagreen:[.1803921568627451,.5450980392156862,.3411764705882353],seashell:[1,.9607843137254902,.9333333333333333],sienna:[.6274509803921569,.3215686274509804,.17647058823529413],skyblue:[.5294117647058824,.807843137254902,.9215686274509803],slateblue:[.41568627450980394,.35294117647058826,.803921568627451],slategray:[.4392156862745098,.5019607843137255,.5647058823529412],slategrey:[.4392156862745098,.5019607843137255,.5647058823529412],snow:[1,.9803921568627451,.9803921568627451],springgreen:[0,1,.4980392156862745],steelblue:[.27450980392156865,.5098039215686274,.7058823529411765],tan:[.8235294117647058,.7058823529411765,.5490196078431373],thistle:[.8470588235294118,.7490196078431373,.8470588235294118],tomato:[1,.38823529411764707,.2784313725490196],turquoise:[.25098039215686274,.8784313725490196,.8156862745098039],violet:[.9333333333333333,.5098039215686274,.9333333333333333],wheat:[.9607843137254902,.8705882352941177,.7019607843137254],whitesmoke:[.9607843137254902,.9607843137254902,.9607843137254902],yellowgreen:[.6039215686274509,.803921568627451,.19607843137254902]};Gu.exports=Zy});var Xu=u((ZN,Iu)=>{var Gy=Un(),Iy=e=>Gy[e.toLowerCase()];Iu.exports=Iy});var Yu=u((GN,$u)=>{var Xy=e=>{if(e=e.replace("#",""),e.length<6)throw new Error("the given notation must contain 3 or more hex values");let t=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,n=parseInt(e.substring(4,6),16)/255;if(e.length>=8){let s=parseInt(e.substring(6,8),16)/255;return[t,r,n,s]}return[t,r,n]};$u.exports=Xy});var Hn=u((IN,Lu)=>{var $y=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(t-e)*6*r:r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e);Lu.exports=$y});var Hu=u((XN,Uu)=>{var Yy=B(),Wn=Hn(),Ly=(...e)=>{if(e=Yy(e),e.length<3)throw new Error("values must contain H, S and L values");let t=e[0],r=e[1],n=e[2],s=n,o=n,i=n;if(r!==0){let c=n<.5?n*(1+r):n+r-n*r,a=2*n-c;s=Wn(a,c,t+1/3),o=Wn(a,c,t),i=Wn(a,c,t-1/3)}if(e.length>3){let c=e[3];return[s,o,i,c]}return[s,o,i]};Uu.exports=Ly});var _u=u(($N,Wu)=>{var Uy=B(),Hy=(...e)=>{if(e=Uy(e),e.length<3)throw new Error("values must contain H, S and V values");let t=e[0],r=e[1],n=e[2],s=0,o=0,i=0,c=Math.floor(t*6),a=t*6-c,l=n*(1-r),f=n*(1-a*r),h=n*(1-(1-a)*r);switch(c%6){case 0:s=n,o=h,i=l;break;case 1:s=f,o=n,i=l;break;case 2:s=l,o=n,i=h;break;case 3:s=l,o=f,i=n;break;case 4:s=h,o=l,i=n;break;case 5:s=n,o=l,i=f;break}if(e.length>3){let p=e[3];return[s,o,i,p]}return[s,o,i]};Wu.exports=Hy});var Qu=u((YN,Ku)=>{var Wy=B(),_y=(...e)=>{if(e=Wy(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0]*255,r=e[1]*255,n=e[2]*255,s=`#${Number(16777216+t*65536+r*256+n).toString(16).substring(1,7)}`;return e.length>3&&(s=s+Number(e[3]*255).toString(16)),s};Ku.exports=_y});var ju=u((LN,Ju)=>{var Ky=B(),Qy=(...e)=>{if(e=Ky(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c,a=(s+o)/2;if(s===o)i=c=0;else{let l=s-o;switch(c=a>.5?l/(2-s-o):l/(s+o),s){case t:i=(r-n)/l+(r<n?6:0);break;case r:i=(n-t)/l+2;break;case n:i=(t-r)/l+4;break}i/=6}if(e.length>3){let l=e[3];return[i,c,a,l]}return[i,c,a]};Ju.exports=Qy});var t0=u((UN,e0)=>{var Jy=B(),jy=(...e)=>{if(e=Jy(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c=s,a=s-o,l=s===0?0:a/s;if(s===o)i=0;else{switch(s){case t:i=(r-n)/a+(r<n?6:0);break;case r:i=(n-t)/a+2;break;case n:i=(t-r)/a+4;break}i/=6}if(e.length>3){let f=e[3];return[i,l,c,f]}return[i,l,c]};e0.exports=jy});var n0=u((HN,r0)=>{r0.exports={colorize:Zu(),colorNameToRgb:Xu(),cssColors:Un(),hexToRgb:Yu(),hslToRgb:Hu(),hsvToRgb:_u(),hueToColorComponent:Hn(),rgbToHex:Qu(),rgbToHsl:ju(),rgbToHsv:t0()}});var i0=u((WN,o0)=>{var e4=e=>{if(!Array.isArray(e))throw new Error("Bezier points must be a valid array/");if(e.length<2)throw new Error("Bezier points must contain at least 2 values.");let t=t4(e);return{points:e,pointType:t,dimensions:t==="float_single"?0:e[0].length,permutations:s0(e.length-1),tangentPermutations:s0(e.length-2)}},t4=function(e){let t=null;return e.forEach(r=>{let n="";if(Number.isFinite(r))n="float_single";else if(Array.isArray(r))r.forEach(s=>{if(!Number.isFinite(s))throw new Error("Bezier point values must all be numbers.")}),n="float_"+r.length;else throw new Error("Bezier points must all be numbers or arrays of number.");if(t==null)t=n;else if(t!==n)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")}),t},s0=function(e){let t=[];for(let r=0;r<=e;r++)t.push(_n(e)/(_n(r)*_n(e-r)));return t},_n=function(e){let t=1;for(let r=2;r<=e;r++)t*=r;return t};o0.exports=e4});var Kn=u((_N,a0)=>{var r4=(e,t)=>{if(e<0||e>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if(t.pointType==="float_single")return c0(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(c0(t,s,e))}return r}},c0=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<=n;o++)s+=e.permutations[o]*Math.pow(1-r,n-o)*Math.pow(r,o)*t[o];return s};a0.exports=r4});var f0=u((KN,u0)=>{var n4=(e,t)=>{if(e<0||e>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if(t.pointType==="float_single")return l0(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(l0(t,s,e))}return r}},l0=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<n;o++){let i=n*(t[o+1]-t[o]);s+=e.tangentPermutations[o]*Math.pow(1-r,n-1-o)*Math.pow(r,o)*i}return s};u0.exports=n4});var ar=u((QN,p0)=>{var h0=Kn(),s4=(e,t)=>{let r=0,n=[0],s=h0(0,t);for(let o=1;o<=e;o++){let i=h0(o/e,t);r+=o4(i,s),n.push(r),s=i}return n},o4=(e,t)=>{if(Number.isFinite(e)&&Number.isFinite(t))return Math.abs(e-t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)throw new Error("The operands must have the same number of dimensions.");let r=0;for(let n=0;n<e.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)}else throw new Error("The operands must be of the same type, either number or array.")};p0.exports=s4});var g0=u((JN,d0)=>{var i4=ar(),c4=(e,t)=>i4(e,t)[e];d0.exports=c4});var q0=u((jN,m0)=>{var a4=ar(),l4=(e,t)=>{let r={distance:0,segments:100},{distance:n,segments:s}=Object.assign({},r,e),o=a4(s,t),i=0,c=s;for(;i<=c;){let d=Math.floor(i+(c-i)/2),m=o[d]-n;if(m<0)i=d+1;else if(m>0)c=d-1;else{c=d;break}}let a=c;if(o[a]===n)return a/s;let l=o[a],h=o[a+1]-l,p=(n-l)/h;return(a+p)/s};m0.exports=l4});var w0=u((eV,x0)=>{x0.exports={create:i0(),valueAt:Kn(),tangentAt:f0(),lengths:ar(),length:g0(),arcLengthToT:q0()}});var y0=u((tV,v0)=>{v0.exports={bezier:w0()}});var Ot=u((rV,E0)=>{var u4=e=>{let t=0;for(let r=0;r<e.length;r++){let n=(r+1)%e.length;t+=e[r][0]*e[n][1],t-=e[n][0]*e[r][1]}return t/2};E0.exports=u4});var Qn=u((nV,P0)=>{var f4=Ot(),h4=e=>f4(e.vertices);P0.exports=h4});var Jn=u((sV,A0)=>{var p4=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});A0.exports=p4});var jn=u((oV,b0)=>{var d4=Jn(),g4=e=>{let t=e.vertices.slice().reverse();return d4(t)};b0.exports=g4});var S0=u((iV,M0)=>{var m4=Qn(),q4=jn(),x4=(e,t)=>{if(e.length===0)return 0;let r=t.vertices;return r.length<3?0:(m4(t)<0&&(t=q4(t)),e.reduce((s,o)=>s+w4(o,r),0)===e.length?1:0)},w4=(e,t)=>{let r=t.length,n=e[0],s=e[1],o=t[r-1],i=t[0],c=o[1]>s,a=0,l=0;for(let f=r+1;--f;){let h=i[1]>s;if(c!==h){let p=o[0]>n,d=i[0]>n;(p&&d||i[0]-(i[1]-s)*(o[0]-i[0])/(o[1]-i[1])>=n)&&(a=!a)}c=h,o=i,i=t[++l]}return a};M0.exports=x4});var lr=u((cV,T0)=>{T0.exports={arePointsInside:S0(),create:Jn(),flip:jn(),measureArea:Qn()}});var ur=u((aV,k0)=>{k0.exports={geom2:z(),geom3:C(),path2:$(),poly2:lr(),poly3:X()}});var fr=u((lV,O0)=>{var v4=()=>[0,1,0];O0.exports=v4});var V0=u((uV,N0)=>{var y4=fr(),E4=e=>{let t=y4();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};N0.exports=E4});var hr=u((fV,F0)=>{var es=Z(),P4=e=>{let t=es.normal(es.create(),e);return es.negate(t,t),t};F0.exports=P4});var Nt=u((hV,B0)=>{var R0=Z(),A4=e=>R0.scale(R0.create(),e,e[2]);B0.exports=A4});var C0=u((pV,z0)=>{var Vt=Z(),b4=hr(),M4=Nt(),S4=(e,t)=>{let r=M4(e),n=b4(e),s=Vt.subtract(Vt.create(),t,r),o=Vt.dot(s,n);return Vt.scale(s,n,o),Vt.add(s,s,r),s};z0.exports=S4});var ts=u((dV,D0)=>{var T4=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);D0.exports=T4});var G0=u((gV,Z0)=>{var k4=Z(),O4=(e,t)=>{let r=k4.dot(t,e);return r=Math.abs(r-e[2]),r};Z0.exports=O4});var X0=u((mV,I0)=>{var N4=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];I0.exports=N4});var rs=u((qV,$0)=>{var Ft=Z(),V4=(e,t,r)=>{let n=Ft.subtract(Ft.create(),r,t);Ft.normal(n,n),Ft.normalize(n,n);let s=Ft.dot(t,n);return e[0]=n[0],e[1]=n[1],e[2]=s,e};$0.exports=V4});var ns=u((xV,Y0)=>{var F4=fr(),R4=(e,t,r)=>{let n=F4();return n[0]=e,n[1]=t,n[2]=r,n};Y0.exports=R4});var pr=u((wV,L0)=>{var{NEPS:ss}=I(),B4=(e,t)=>Math.abs(e[0]-t[0])<=ss&&Math.abs(e[1]-t[1])<=ss&&Math.abs(e[2]-t[2])<=ss;L0.exports=B4});var os=u((vV,U0)=>{var z4=(e,t,r)=>{let n=r-e[1],s=t[1]-e[1];s<0&&(n=-n,s=-s);let o;return n<=0?o=0:n>=s?o=1:s<1e-10?o=.5:o=n/s,e[0]+o*(t[0]-e[0])};U0.exports=z4});var is=u((yV,H0)=>{var C4=(e,t,r,n)=>{if(e[0]===t[0]&&e[1]===t[1]||r[0]===n[0]&&r[1]===n[1])return;let s=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(Math.abs(s)<Number.MIN_VALUE)return;let o=((n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]))/s,i=((t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]))/s;if(o<0||o>1||i<0||i>1)return;let c=e[0]+o*(t[0]-e[0]),a=e[1]+o*(t[1]-e[1]);return[c,a]};H0.exports=C4});var _0=u((EV,W0)=>{var D4=(e,t,r,n,s,o)=>{let c=1/(e*n-t*r),a=s*n-t*o,l=-s*r+e*o;return a*=c,l*=c,[a,l]};W0.exports=D4});var _e=u((PV,K0)=>{K0.exports={aboutEqualNormals:pr(),area:Ot(),cos:J().cos,interpolateBetween2DPointsForY:os(),intersect:is(),sin:J().sin,solve2Linear:_0()}});var J0=u((AV,Q0)=>{var Z4=Z(),{solve2Linear:G4}=_e(),I4=(e,t)=>{let r=G4(e[0],e[1],t[0],t[1],e[2],t[2]);return Z4.clone(r)};Q0.exports=I4});var tf=u((bV,ef)=>{var j0=Z(),X4=ts(),$4=ns(),Y4=(e,t)=>{let r=j0.negate(j0.create(),t),n=-t[2];return X4(e,$4(r[0],r[1],n))};ef.exports=Y4});var nf=u((MV,rf)=>{var L4=e=>`line2: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)})`;rf.exports=L4});var cf=u((SV,of)=>{var sf=Z(),U4=rs(),H4=Nt(),W4=hr(),_4=(e,t,r)=>{let n=H4(t),s=W4(t);return sf.transform(n,n,r),sf.transform(s,s,r),U4(e,n,s)};of.exports=_4});var lf=u((TV,af)=>{var K4=Nt(),Q4=(e,t)=>{let r=(e[2]-e[1]*t)/e[0];return Number.isNaN(r)&&(r=K4(e)[0]),r};af.exports=Q4});var dr=u((kV,uf)=>{uf.exports={clone:V0(),closestPoint:C0(),copy:ts(),create:fr(),direction:hr(),distanceToPoint:G0(),equals:X0(),fromPoints:rs(),fromValues:ns(),intersectPointOfLines:J0(),origin:Nt(),reverse:tf(),toString:nf(),transform:cf(),xAtY:lf()}});var cs=u((OV,hf)=>{var ff=V(),J4=()=>[ff.fromValues(0,0,0),ff.fromValues(0,0,1)];hf.exports=J4});var gf=u((NV,df)=>{var pf=V(),j4=cs(),eE=e=>{let t=j4();return pf.copy(t[0],e[0]),pf.copy(t[1],e[1]),t};df.exports=eE});var as=u((VV,mf)=>{var De=V(),tE=(e,t)=>{let r=e[0],n=e[1],s=De.dot(De.subtract(De.create(),t,r),n),o=De.dot(n,n),i=s/o,c=De.scale(De.create(),n,i);return De.add(c,c,r),c};mf.exports=tE});var wf=u((FV,xf)=>{var qf=V(),rE=(e,t)=>(qf.copy(e[0],t[0]),qf.copy(e[1],t[1]),e);xf.exports=rE});var yf=u((RV,vf)=>{var nE=e=>e[1];vf.exports=nE});var Pf=u((BV,Ef)=>{var ls=V(),sE=as(),oE=(e,t)=>{let r=sE(e,t),n=ls.subtract(ls.create(),t,r);return ls.length(n)};Ef.exports=oE});var Mf=u((zV,bf)=>{var Af=V(),iE=(e,t)=>!(!Af.equals(e[1],t[1])||!Af.equals(e[0],t[0]));bf.exports=iE});var Ke=u((CV,Sf)=>{var gr=V(),cE=(e,t,r)=>{let n=gr.normalize(gr.create(),r);return gr.copy(e[0],t),gr.copy(e[1],n),e};Sf.exports=cE});var kf=u((DV,Tf)=>{var Ze=V(),{solve2Linear:us}=_e(),{EPS:aE}=I(),lE=Ke(),uE=(e,t,r)=>{let n=Ze.cross(Ze.create(),t,r),s=Ze.length(n);if(s<aE)throw new Error("parallel planes do not intersect");s=1/s,n=Ze.scale(n,n,s);let o=Math.abs(n[0]),i=Math.abs(n[1]),c=Math.abs(n[2]),a,l;return o>=i&&o>=c?(l=us(t[1],t[2],r[1],r[2],t[3],r[3]),a=Ze.fromValues(0,l[0],l[1])):i>=o&&i>=c?(l=us(t[0],t[2],r[0],r[2],t[3],r[3]),a=Ze.fromValues(l[0],0,l[1])):(l=us(t[0],t[1],r[0],r[1],t[3],r[3]),a=Ze.fromValues(l[0],l[1],0)),lE(e,a,n)};Tf.exports=uE});var Vf=u((ZV,Nf)=>{var Of=V(),fE=Ke(),hE=(e,t,r)=>{let n=Of.subtract(Of.create(),r,t);return fE(e,t,n)};Nf.exports=hE});var Rf=u((GV,Ff)=>{var Qe=V(),pE=(e,t)=>{let r=t,n=t[3],s=e[0],o=e[1],i=(n-Qe.dot(r,s))/Qe.dot(r,o);return Qe.add(Qe.create(),s,Qe.scale(Qe.create(),o,i))};Ff.exports=pE});var zf=u((IV,Bf)=>{var dE=e=>e[0];Bf.exports=dE});var Df=u((XV,Cf)=>{var fs=V(),gE=Ke(),mE=(e,t)=>{let r=fs.clone(t[0]),n=fs.negate(fs.create(),t[1]);return gE(e,r,n)};Cf.exports=mE});var Gf=u(($V,Zf)=>{var qE=e=>{let t=e[0],r=e[1];return`line3: point: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}) direction: (${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)})`};Zf.exports=qE});var Xf=u((YV,If)=>{var Je=V(),xE=Ke(),wE=(e,t,r)=>{let n=t[0],s=t[1],o=Je.add(Je.create(),n,s),i=Je.transform(Je.create(),n,r),c=Je.transform(o,o,r),a=Je.subtract(c,c,i);return xE(e,i,a)};If.exports=wE});var Yf=u((LV,$f)=>{$f.exports={clone:gf(),closestPoint:as(),copy:wf(),create:cs(),direction:yf(),distanceToPoint:Pf(),equals:Mf(),fromPlanes:kf(),fromPointAndDirection:Ke(),fromPoints:Vf(),intersectPointOfLineAndPlane:Rf(),origin:zf(),reverse:Df(),toString:Gf(),transform:Xf()}});var Uf=u((UV,Lf)=>{Lf.exports={constants:I(),line2:dr(),line3:Yf(),mat4:Y(),plane:fe(),utils:_e(),vec2:Z(),vec3:V(),vec4:Zn()}});var hs=u((HV,_f)=>{var vE=B(),Hf=z(),Wf=C(),yE=$(),EE=X(),mr=new WeakMap,PE=()=>0,AE=e=>{let t=mr.get(e);return t||(t=Hf.toSides(e).reduce((n,s)=>n+(s[0][0]*s[1][1]-s[0][1]*s[1][0]),0),t*=.5,mr.set(e,t),t)},bE=e=>{let t=mr.get(e);return t||(t=Wf.toPolygons(e).reduce((n,s)=>n+EE.measureArea(s),0),mr.set(e,t),t)},ME=(...e)=>{if(e=vE(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>yE.isA(r)?PE(r):Hf.isA(r)?AE(r):Wf.isA(r)?bE(r):0);return t.length===1?t[0]:t};_f.exports=ME});var Qf=u((WV,Kf)=>{var SE=B(),TE=hs(),kE=(...e)=>{if(e=SE(e),e.length===0)throw new Error("measureAggregateArea: no geometries supplied");let t=TE(e);return e.length===1?t:t.reduce((n,s)=>n+s,0)};Kf.exports=kE});var be=u((_V,rh)=>{var OE=B(),de=Z(),Rt=V(),jf=z(),eh=C(),th=$(),Jf=X(),je=new WeakMap,NE=e=>{let t=je.get(e);if(t)return t;let r=th.toPoints(e),n;r.length===0?n=de.create():n=de.clone(r[0]);let s=de.clone(n);return r.forEach(o=>{de.min(n,n,o),de.max(s,s,o)}),n=[n[0],n[1],0],s=[s[0],s[1],0],t=[n,s],je.set(e,t),t},VE=e=>{let t=je.get(e);if(t)return t;let r=jf.toPoints(e),n;r.length===0?n=de.create():n=de.clone(r[0]);let s=de.clone(n);return r.forEach(o=>{de.min(n,n,o),de.max(s,s,o)}),n=[n[0],n[1],0],s=[s[0],s[1],0],t=[n,s],je.set(e,t),t},FE=e=>{let t=je.get(e);if(t)return t;let r=eh.toPolygons(e),n=Rt.create();if(r.length>0){let o=Jf.toPoints(r[0]);Rt.copy(n,o[0])}let s=Rt.clone(n);return r.forEach(o=>{Jf.toPoints(o).forEach(i=>{Rt.min(n,n,i),Rt.max(s,s,i)})}),n=[n[0],n[1],n[2]],s=[s[0],s[1],s[2]],t=[n,s],je.set(e,t),t},RE=(...e)=>{if(e=OE(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>th.isA(r)?NE(r):jf.isA(r)?VE(r):eh.isA(r)?FE(r):[[0,0,0],[0,0,0]]);return t.length===1?t[0]:t};rh.exports=RE});var qr=u((KV,nh)=>{var BE=B(),zE=mn(),CE=gn(),DE=be(),ZE=(...e)=>{if(e=BE(e),e.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");let t=DE(e);if(e.length===1)return t;let r=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return t.reduce((n,s)=>(n=[zE(n[0],n[0],s[0]),CE(n[1],n[1],s[1])],n),r)};nh.exports=ZE});var ps=u((QV,sh)=>{var{EPS:GE}=I(),IE=(e,t)=>{let r=0;for(let n=0;n<t;n++)r+=e[1][n]-e[0][n];return GE*r/t};sh.exports=IE});var ih=u((JV,oh)=>{var XE=B(),$E=qr(),YE=ps(),{geom2:LE,geom3:UE,path2:HE}=ur(),WE=(...e)=>{if(e=XE(e),e.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");let t=$E(e),r=0;return r=e.reduce((n,s)=>HE.isA(s)||LE.isA(s)?Math.max(n,2):UE.isA(s)?Math.max(n,3):0,r),YE(t,r)};oh.exports=WE});var ds=u((jV,lh)=>{var _E=B(),KE=z(),ah=C(),QE=$(),JE=X(),ch=new WeakMap,jE=()=>0,eP=()=>0,tP=e=>{let t=ch.get(e);return t||(t=ah.toPolygons(e).reduce((n,s)=>n+JE.measureSignedVolume(s),0),ch.set(e,t),t)},rP=(...e)=>{if(e=_E(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>QE.isA(r)?jE(r):KE.isA(r)?eP(r):ah.isA(r)?tP(r):0);return t.length===1?t[0]:t};lh.exports=rP});var fh=u((eF,uh)=>{var nP=B(),sP=ds(),oP=(...e)=>{if(e=nP(e),e.length===0)throw new Error("measureAggregateVolume: no geometries supplied");let t=sP(e);return e.length===1?t:t.reduce((n,s)=>n+s,0)};uh.exports=oP});var xh=u((tF,qh)=>{var iP=B(),ph=Z(),ie=V(),dh=z(),gh=C(),mh=$(),hh=X(),et=new WeakMap,cP=e=>{let t=et.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=mh.toPoints(e);if(s.length>0){let o=0,i=ie.create();s.forEach(c=>{ie.add(r,r,ie.fromVec2(i,c,0)),o++}),ie.scale(r,r,1/o),s.forEach(c=>{n=Math.max(n,ph.squaredDistance(r,c))}),n=Math.sqrt(n)}return t=[r,n],et.set(e,t),t},aP=e=>{let t=et.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=dh.toSides(e);if(s.length>0){let o=0,i=ie.create();s.forEach(c=>{ie.add(r,r,ie.fromVec2(i,c[0],0)),o++}),ie.scale(r,r,1/o),s.forEach(c=>{n=Math.max(n,ph.squaredDistance(r,c[0]))}),n=Math.sqrt(n)}return t=[r,n],et.set(e,t),t},lP=e=>{let t=et.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=gh.toPolygons(e);if(s.length>0){let o=0;s.forEach(i=>{hh.toPoints(i).forEach(c=>{ie.add(r,r,c),o++})}),ie.scale(r,r,1/o),s.forEach(i=>{hh.toPoints(i).forEach(c=>{n=Math.max(n,ie.squaredDistance(r,c))})}),n=Math.sqrt(n)}return t=[r,n],et.set(e,t),t},uP=(...e)=>{e=iP(e);let t=e.map(r=>mh.isA(r)?cP(r):dh.isA(r)?aP(r):gh.isA(r)?lP(r):[[0,0,0],0]);return t.length===1?t[0]:t};qh.exports=uP});var vh=u((rF,wh)=>{var fP=B(),hP=be(),pP=(...e)=>{e=fP(e);let t=e.map(r=>{let n=hP(r);return[n[0][0]+(n[1][0]-n[0][0])/2,n[0][1]+(n[1][1]-n[0][1])/2,n[0][2]+(n[1][2]-n[0][2])/2]});return t.length===1?t[0]:t};wh.exports=pP});var Ah=u((nF,Ph)=>{var dP=B(),ge=V(),yh=z(),Eh=C(),xr=new WeakMap,gP=e=>{let t=xr.get(e);if(t!==void 0)return t;let r=yh.toSides(e),n=0,s=0,o=0;if(r.length>0){for(let c=0;c<r.length;c++){let a=r[c][0],l=r[c][1],f=a[0]*l[1]-a[1]*l[0];n+=f,s+=(a[0]+l[0])*f,o+=(a[1]+l[1])*f}n/=2;let i=1/(n*6);s*=i,o*=i}return t=ge.fromValues(s,o,0),xr.set(e,t),t},mP=e=>{let t=xr.get(e);if(t!==void 0)return t;t=ge.create();let r=Eh.toPolygons(e);if(r.length===0)return t;let n=0,s=ge.create();return r.forEach(o=>{let i=o.vertices;for(let c=0;c<i.length-2;c++){ge.cross(s,i[c+1],i[c+2]);let a=ge.dot(i[0],s)/6;n+=a,ge.add(s,i[0],i[c+1]),ge.add(s,s,i[c+2]);let l=ge.scale(s,s,1/4*a);ge.add(t,t,l)}}),ge.scale(t,t,1/n),xr.set(e,t),t},qP=(...e)=>{e=dP(e);let t=e.map(r=>yh.isA(r)?gP(r):Eh.isA(r)?mP(r):[0,0,0]);return t.length===1?t[0]:t};Ph.exports=qP});var Mh=u((sF,bh)=>{var xP=B(),wP=be(),vP=(...e)=>{e=xP(e);let t=e.map(r=>{let n=wP(r);return[n[1][0]-n[0][0],n[1][1]-n[0][1],n[1][2]-n[0][2]]});return t.length===1?t[0]:t};bh.exports=vP});var we=u((oF,Sh)=>{var yP=B(),{geom2:EP,geom3:PP,path2:AP}=ur(),gs=ps(),ms=be(),bP=e=>gs(ms(e),2),MP=e=>gs(ms(e),2),SP=e=>gs(ms(e),3),TP=(...e)=>{if(e=yP(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>AP.isA(r)?bP(r):EP.isA(r)?MP(r):PP.isA(r)?SP(r):0);return t.length===1?t[0]:t};Sh.exports=TP});var kh=u((iF,Th)=>{Th.exports={measureAggregateArea:Qf(),measureAggregateBoundingBox:qr(),measureAggregateEpsilon:ih(),measureAggregateVolume:fh(),measureArea:hs(),measureBoundingBox:be(),measureBoundingSphere:xh(),measureCenter:vh(),measureCenterOfMass:Ah(),measureDimensions:Mh(),measureEpsilon:we(),measureVolume:ds()}});var K=u((cF,Oh)=>{var kP=(e,t)=>Array.isArray(e)&&e.length>=t?e.every(r=>Number.isFinite(r)):!1,OP=(e,t)=>Number.isFinite(e)&&e>t,NP=(e,t)=>Number.isFinite(e)&&e>=t;Oh.exports={isNumberArray:kP,isGT:OP,isGTE:NP}});var Fh=u((aF,Vh)=>{var{EPS:Nh,TAU:tt}=I(),ve=Z(),VP=$(),{isGT:FP,isGTE:qs,isNumberArray:RP}=K(),BP=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:tt,makeTangent:!1,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,makeTangent:i,segments:c}=Object.assign({},t,e);if(!RP(r,2))throw new Error("center must be an array of X and Y values");if(!FP(n,0))throw new Error("radius must be greater than zero");if(!qs(s,0))throw new Error("startAngle must be positive");if(!qs(o,0))throw new Error("endAngle must be positive");if(!qs(c,4))throw new Error("segments must be four or more");s=s%tt,o=o%tt;let a=tt;s<o&&(a=o-s),s>o&&(a=o+(tt-s));let l=Math.acos((n*n+n*n-Nh*Nh)/(2*n*n)),f=ve.clone(r),h,p=[];if(a<l)h=ve.fromAngleRadians(ve.create(),s),ve.scale(h,h,n),ve.add(h,h,f),p.push(h);else{let d=Math.max(1,Math.floor(c*(a/tt)))+1,m=d*.5/a;m>.25&&(m=.25);let g=i?d+2:d;for(let q=0;q<=g;q++){let w=q;i&&(w=(q-1)*(d-2*m)/d+m,w<0&&(w=0),w>d&&(w=d));let v=s+w*(a/d);h=ve.fromAngleRadians(ve.create(),v),ve.scale(h,h,n),ve.add(h,h,f),p.push(h)}}return VP.fromPoints({closed:!1},p)};Vh.exports=BP});var vs=u((lF,Ch)=>{var{EPS:Rh,TAU:Me}=I(),xs=Z(),Bh=z(),{sin:zP,cos:CP}=J(),{isGTE:ws,isNumberArray:zh}=K(),DP=e=>{let t={center:[0,0],radius:[1,1],startAngle:0,endAngle:Me,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!zh(r,2))throw new Error("center must be an array of X and Y values");if(!zh(n,2))throw new Error("radius must be an array of X and Y values");if(!n.every(d=>d>=0))throw new Error("radius values must be positive");if(!ws(s,0))throw new Error("startAngle must be positive");if(!ws(o,0))throw new Error("endAngle must be positive");if(!ws(i,3))throw new Error("segments must be three or more");if(n[0]===0||n[1]===0)return Bh.create();s=s%Me,o=o%Me;let c=Me;s<o&&(c=o-s),s>o&&(c=o+(Me-s));let a=Math.min(n[0],n[1]),l=Math.acos((a*a+a*a-Rh*Rh)/(2*a*a));if(c<l)throw new Error("startAngle and endAngle do not define a significant rotation");i=Math.floor(i*(c/Me));let f=xs.clone(r),h=c/i,p=[];i=c<Me?i+1:i;for(let d=0;d<i;d++){let m=h*d+s,g=xs.fromValues(n[0]*CP(m),n[1]*zP(m));xs.add(g,f,g),p.push(g)}return c<Me&&p.push(f),Bh.fromPoints(p)};Ch.exports=DP});var ys=u((uF,Dh)=>{var{TAU:ZP}=I(),GP=vs(),{isGTE:IP}=K(),XP=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:ZP,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!IP(n,0))throw new Error("radius must be positive");return n=[n,n],GP({center:r,radius:n,startAngle:s,endAngle:o,segments:i})};Dh.exports=XP});var wr=u((fF,Ih)=>{var Zh=C(),$P=X(),{isNumberArray:Gh}=K(),YP=e=>{let t={center:[0,0,0],size:[2,2,2]},{center:r,size:n}=Object.assign({},t,e);if(!Gh(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Gh(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every(o=>o>=0))throw new Error("size values must be positive");return n[0]===0||n[1]===0||n[2]===0?Zh.create():Zh.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(o=>{let i=o[0].map(c=>[r[0]+n[0]/2*(2*!!(c&1)-1),r[1]+n[1]/2*(2*!!(c&2)-1),r[2]+n[2]/2*(2*!!(c&4)-1)]);return $P.create(i)}))};Ih.exports=YP});var $h=u((hF,Xh)=>{var LP=wr(),{isGTE:UP}=K(),HP=e=>{let t={center:[0,0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!UP(n,0))throw new Error("size must be positive");return n=[n,n,n],LP({center:r,size:n})};Xh.exports=HP});var As=u((pF,Lh)=>{var{EPS:Yh,TAU:Se}=I(),j=V(),WP=C(),_P=X(),{sin:KP,cos:QP}=J(),{isGT:JP,isGTE:Es,isNumberArray:Ps}=K(),jP=e=>{let t={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Se,segments:32},{center:r,height:n,startRadius:s,startAngle:o,endRadius:i,endAngle:c,segments:a}=Object.assign({},t,e);if(!Ps(r,3))throw new Error("center must be an array of X, Y and Z values");if(!JP(n,0))throw new Error("height must be greater then zero");if(!Ps(s,2))throw new Error("startRadius must be an array of X and Y values");if(!s.every(M=>M>=0))throw new Error("startRadius values must be positive");if(!Ps(i,2))throw new Error("endRadius must be an array of X and Y values");if(!i.every(M=>M>=0))throw new Error("endRadius values must be positive");if(i.every(M=>M===0)&&s.every(M=>M===0))throw new Error("at least one radius must be positive");if(!Es(o,0))throw new Error("startAngle must be positive");if(!Es(c,0))throw new Error("endAngle must be positive");if(!Es(a,4))throw new Error("segments must be four or more");o=o%Se,c=c%Se;let l=Se;o<c&&(l=c-o),o>c&&(l=c+(Se-o));let f=Math.min(s[0],s[1],i[0],i[1]),h=Math.acos((f*f+f*f-Yh*Yh)/(2*f*f));if(l<h)throw new Error("startAngle and endAngle do not define a significant rotation");let p=Math.floor(a*(l/Se)),d=j.fromValues(0,0,-(n/2)),m=j.fromValues(0,0,n/2),g=j.subtract(j.create(),m,d),q=j.fromValues(1,0,0),w=j.fromValues(0,1,0),v=j.create(),E=j.create(),x=j.create(),P=(M,T,S)=>{let O=T*l+o;return j.scale(v,q,S[0]*QP(O)),j.scale(E,w,S[1]*KP(O)),j.add(v,v,E),j.scale(x,g,M),j.add(x,x,d),j.add(j.create(),v,x)},y=(...M)=>{let T=M.map(S=>j.add(j.create(),S,r));return _P.create(T)},A=[];for(let M=0;M<p;M++){let T=M/p,S=(M+1)/p;l===Se&&M===p-1&&(S=0),i[0]===s[0]&&i[1]===s[1]?(A.push(y(d,P(0,S,i),P(0,T,i))),A.push(y(P(0,S,i),P(1,S,i),P(1,T,i),P(0,T,i))),A.push(y(m,P(1,T,i),P(1,S,i)))):(s[0]>0&&s[1]>0&&A.push(y(d,P(0,S,s),P(0,T,s))),(s[0]>0||s[1]>0)&&A.push(y(P(0,T,s),P(0,S,s),P(1,T,i))),i[0]>0&&i[1]>0&&A.push(y(m,P(1,T,i),P(1,S,i))),(i[0]>0||i[1]>0)&&A.push(y(P(1,T,i),P(0,S,s),P(1,S,i))))}return l<Se&&(A.push(y(d,P(0,0,s),m)),A.push(y(P(0,0,s),P(1,0,i),m)),A.push(y(d,m,P(0,1,s))),A.push(y(P(0,1,s),m,P(1,1,i)))),WP.create(A)};Lh.exports=jP});var bs=u((dF,Uh)=>{var eA=C(),tA=As(),{isGTE:rA}=K(),nA=e=>{let t={center:[0,0,0],height:2,radius:1,segments:32},{center:r,height:n,radius:s,segments:o}=Object.assign({},t,e);if(!rA(s,0))throw new Error("radius must be positive");return n===0||s===0?eA.create():tA({center:r,height:n,startRadius:[s,s],endRadius:[s,s],segments:o})};Uh.exports=nA});var Ms=u((gF,jh)=>{var{TAU:Hh}=I(),F=V(),Wh=C(),_h=X(),{sin:Kh,cos:Qh}=J(),{isGTE:sA,isNumberArray:Jh}=K(),oA=e=>{let t={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:r,radius:n,segments:s,axes:o}=Object.assign({},t,e);if(!Jh(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Jh(n,3))throw new Error("radius must be an array of X, Y and Z values");if(!n.every(m=>m>=0))throw new Error("radius values must be positive");if(!sA(s,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0||n[2]===0)return Wh.create();let i=F.scale(F.create(),F.normalize(F.create(),o[0]),n[0]),c=F.scale(F.create(),F.normalize(F.create(),o[1]),n[1]),a=F.scale(F.create(),F.normalize(F.create(),o[2]),n[2]),l=Math.round(s/4),f,h=[],p=F.create(),d=F.create();for(let m=0;m<=s;m++){let g=Hh*m/s,q=F.add(F.create(),F.scale(p,i,Qh(g)),F.scale(d,c,Kh(g)));if(m>0){let w,v;for(let E=0;E<=l;E++){let x=Hh/4*E/l,P=Qh(x),y=Kh(x);if(E>0){let A=[],b;b=F.subtract(F.create(),F.scale(p,f,w),F.scale(d,a,v)),A.push(F.add(b,b,r)),b=F.subtract(F.create(),F.scale(p,q,w),F.scale(d,a,v)),A.push(F.add(b,b,r)),E<l&&(b=F.subtract(F.create(),F.scale(p,q,P),F.scale(d,a,y)),A.push(F.add(b,b,r))),b=F.subtract(F.create(),F.scale(p,f,P),F.scale(d,a,y)),A.push(F.add(b,b,r)),h.push(_h.create(A)),A=[],b=F.add(F.create(),F.scale(p,f,w),F.scale(d,a,v)),A.push(F.add(F.create(),r,b)),b=F.add(b,F.scale(p,q,w),F.scale(d,a,v)),A.push(F.add(F.create(),r,b)),E<l&&(b=F.add(b,F.scale(p,q,P),F.scale(d,a,y)),A.push(F.add(F.create(),r,b))),b=F.add(b,F.scale(p,f,P),F.scale(d,a,y)),A.push(F.add(F.create(),r,b)),A.reverse(),h.push(_h.create(A))}w=P,v=y}}f=q}return Wh.create(h)};jh.exports=oA});var Ss=u((mF,t2)=>{var iA=C(),cA=X(),{isNumberArray:e2}=K(),aA=e=>{let t={points:[],faces:[],colors:void 0,orientation:"outward"},{points:r,faces:n,colors:s,orientation:o}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and faces must be arrays");if(r.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(s){if(!Array.isArray(s))throw new Error("colors must be an array");if(s.length!==n.length)throw new Error("faces and colors must have the same length")}r.forEach((c,a)=>{if(!e2(c,3))throw new Error(`point ${a} must be an array of X, Y, Z values`)}),n.forEach((c,a)=>{if(c.length<3)throw new Error(`face ${a} must contain 3 or more indexes`);if(!e2(c,c.length))throw new Error(`face ${a} must be an array of numbers`)}),o!=="outward"&&n.forEach(c=>c.reverse());let i=n.map((c,a)=>{let l=cA.create(c.map(f=>r[f]));return s&&s[a]&&(l.color=s[a]),l});return iA.create(i)};t2.exports=aA});var c2=u((qF,i2)=>{var r2=Y(),n2=V(),s2=C(),lA=Ss(),{isGTE:o2}=K(),uA=e=>{let t={radius:1,frequency:6},{radius:r,frequency:n}=Object.assign({},t,e);if(!o2(r,0))throw new Error("radius must be positive");if(!o2(n,6))throw new Error("frequency must be six or more");if(r===0)return s2.create();n=Math.floor(n/6);let s=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],o=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],i=(p,d,m)=>{let g=p[0],q=p[1],w=p[2],v=m,E=[],x=[];for(let P=0;P<d;P++)for(let y=0;y<d-P;y++){let A=P/d,b=(P+1)/d,M=y/(d-P),T=(y+1)/(d-P),S=d-P-1?y/(d-P-1):1,O=[];O[0]=c(c(g,q,M),w,A),O[1]=c(c(g,q,T),w,A),O[2]=c(c(g,q,S),w,b);for(let G=0;G<3;G++){let R=n2.length(O[G]);for(let D=0;D<3;D++)O[G][D]/=R}if(E.push(O[0],O[1],O[2]),x.push([v,v+1,v+2]),v+=3,y<d-P-1){let G=d-P-1?(y+1)/(d-P-1):1;O[0]=c(c(g,q,T),w,A),O[1]=c(c(g,q,G),w,b),O[2]=c(c(g,q,S),w,b);for(let R=0;R<3;R++){let D=n2.length(O[R]);for(let N=0;N<3;N++)O[R][N]/=D}E.push(O[0],O[1],O[2]),x.push([v,v+1,v+2]),v+=3}}return{points:E,triangles:x,offset:v}},c=(p,d,m)=>{let g=1-m,q=[];for(let w=0;w<3;w++)q[w]=p[w]*g+d[w]*m;return q},a=[],l=[],f=0;for(let p=0;p<o.length;p++){let d=i([s[o[p][0]],s[o[p][1]],s[o[p][2]]],n,f);a=a.concat(d.points),l=l.concat(d.triangles),f=d.offset}let h=lA({points:a,faces:l,orientation:"inward"});return r!==1&&(h=s2.transform(r2.fromScaling(r2.create(),[r,r,r]),h)),h};i2.exports=uA});var l2=u((xF,a2)=>{var fA=$(),hA=e=>{if(!Array.isArray(e))throw new Error("points must be an array");return fA.fromPoints({},e)};a2.exports=hA});var f2=u((wF,u2)=>{var vr=z(),pA=e=>{let t={points:[],paths:[],orientation:"counterclockwise"},{points:r,paths:n,orientation:s}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and paths must be arrays");let o=r;Array.isArray(r[0])&&(Array.isArray(r[0][0])||(o=[r])),o.forEach((f,h)=>{if(!Array.isArray(f))throw new Error("list of points "+h+" must be an array");if(f.length<3)throw new Error("list of points "+h+" must contain three or more points");f.forEach((p,d)=>{if(!Array.isArray(p))throw new Error("list of points "+h+", point "+d+" must be an array");if(p.length<2)throw new Error("list of points "+h+", point "+d+" must contain by X and Y values")})});let i=n;if(n.length===0){let f=0;i=o.map(h=>h.map(p=>f++))}let c=[];o.forEach(f=>f.forEach(h=>c.push(h)));let a=[];i.forEach(f=>{let h=f.map(d=>c[d]),p=vr.fromPoints(h);a=a.concat(vr.toSides(p))});let l=vr.create(a);return s=="clockwise"&&(l=vr.reverse(l)),l};u2.exports=pA});var yr=u((vF,d2)=>{var Te=Z(),h2=z(),{isNumberArray:p2}=K(),dA=e=>{let t={center:[0,0],size:[2,2]},{center:r,size:n}=Object.assign({},t,e);if(!p2(r,2))throw new Error("center must be an array of X and Y values");if(!p2(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(c=>c>=0))throw new Error("size values must be positive");if(n[0]===0||n[1]===0)return h2.create();let s=[n[0]/2,n[1]/2],o=[s[0],-s[1]],i=[Te.subtract(Te.create(),r,s),Te.add(Te.create(),r,o),Te.add(Te.create(),r,s),Te.subtract(Te.create(),r,o)];return h2.fromPoints(i)};d2.exports=dA});var E2=u((yF,y2)=>{var{EPS:Er,TAU:Bt}=I(),Ts=Z(),W=V(),g2=C(),rt=X(),{sin:gA,cos:mA}=J(),{isGTE:m2,isNumberArray:q2}=K(),qA=wr(),x2=(e,t,r,n,s,o)=>{let i=Bt/4*s/n,c=mA(i),a=gA(i),l=n-s,f=r*c,h=t[2]-(r-r*a);o||(h=r-r*a-t[2]),f=f>Er?f:0;let p=W.add(W.create(),e,[t[0]-r,t[1]-r,h]),d=W.add(W.create(),e,[r-t[0],t[1]-r,h]),m=W.add(W.create(),e,[r-t[0],r-t[1],h]),g=W.add(W.create(),e,[t[0]-r,r-t[1],h]),q=[],w=[],v=[],E=[];for(let x=0;x<=l;x++){let P=l>0?Bt/4*x/l:0,y=Ts.fromAngleRadians(Ts.create(),P);Ts.scale(y,y,f);let A=W.fromVec2(W.create(),y);q.push(W.add(W.create(),p,A)),W.rotateZ(A,A,[0,0,0],Bt/4),w.push(W.add(W.create(),d,A)),W.rotateZ(A,A,[0,0,0],Bt/4),v.push(W.add(W.create(),m,A)),W.rotateZ(A,A,[0,0,0],Bt/4),E.push(W.add(W.create(),g,A))}return o?[q,w,v,E]:(q.reverse(),w.reverse(),v.reverse(),E.reverse(),[E,v,w,q])},w2=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n];for(let i=0;i<s.length-1;i++)r.push(rt.create([s[i],s[i+1],o[i]])),i<o.length-1&&r.push(rt.create([o[i],s[i+1],o[i+1]]))}return r},v2=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n],i=s[s.length-1],c=o[o.length-1],a=(n+1)%e.length;s=e[a],o=t[a];let l=s[0],f=o[0];r.push(rt.create([i,l,f,c]))}return r},xA=(e,t)=>{e=[e[3],e[2],e[1],e[0]],e=e.map(o=>o.slice().reverse());let r=[];e.forEach(o=>{o.forEach(i=>r.push(i))});let n=[];t.forEach(o=>{o.forEach(i=>n.push(i))});let s=[];for(let o=0;o<n.length;o++){let i=(o+1)%n.length;s.push(rt.create([r[o],r[i],n[i],n[o]]))}return s},wA=e=>{let t={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!q2(r,3))throw new Error("center must be an array of X, Y and Z values");if(!q2(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every(l=>l>=0))throw new Error("size values must be positive");if(!m2(s,0))throw new Error("roundRadius must be positive");if(!m2(o,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0||n[2]===0)return g2.create();if(s===0)return qA({center:r,size:n});if(n=n.map(l=>l/2),s>n[0]-Er||s>n[1]-Er||s>n[2]-Er)throw new Error("roundRadius must be smaller then the radius of all dimensions");o=Math.floor(o/4);let i=null,c=null,a=[];for(let l=0;l<=o;l++){let f=x2(r,n,s,o,l,!0),h=x2(r,n,s,o,l,!1);if(l===0&&(a=a.concat(xA(h,f))),i&&(a=a.concat(w2(i,f),v2(i,f))),c&&(a=a.concat(w2(c,h),v2(c,h))),l===o){let p=f.map(d=>d[0]);a.push(rt.create(p)),p=h.map(d=>d[0]),a.push(rt.create(p))}i=f,c=h}return g2.create(a)};y2.exports=wA});var T2=u((EF,S2)=>{var{EPS:vA,TAU:P2}=I(),k=V(),A2=C(),yA=X(),{sin:b2,cos:M2}=J(),{isGTE:Pr,isNumberArray:EA}=K(),PA=bs(),AA=e=>{let t={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:r,height:n,radius:s,roundRadius:o,segments:i}=Object.assign({},t,e);if(!EA(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Pr(n,0))throw new Error("height must be positive");if(!Pr(s,0))throw new Error("radius must be positive");if(!Pr(o,0))throw new Error("roundRadius must be positive");if(o>s)throw new Error("roundRadius must be smaller then the radius");if(!Pr(i,4))throw new Error("segments must be four or more");if(n===0||s===0)return A2.create();if(o===0)return PA({center:r,height:n,radius:s});let c=[0,0,-(n/2)],a=[0,0,n/2],l=k.subtract(k.create(),a,c),f=k.length(l);if(2*o>f-vA)throw new Error("height must be larger than twice roundRadius");let h;Math.abs(l[0])>Math.abs(l[1])?h=k.fromValues(0,1,0):h=k.fromValues(1,0,0);let p=k.scale(k.create(),k.normalize(k.create(),l),o),d=k.scale(k.create(),k.normalize(k.create(),k.cross(k.create(),p,h)),s),m=k.scale(k.create(),k.normalize(k.create(),k.cross(k.create(),d,p)),s);k.add(c,c,p),k.subtract(a,a,p);let g=Math.floor(.25*i),q=y=>{let A=y.map(b=>k.add(b,b,r));return yA.create(A)},w=[],v=k.create(),E=k.create(),x;for(let y=0;y<=i;y++){let A=P2*y/i,b=k.add(k.create(),k.scale(v,d,M2(A)),k.scale(E,m,b2(A)));if(y>0){let M=[];M.push(k.add(k.create(),c,b)),M.push(k.add(k.create(),c,x)),M.push(k.add(k.create(),a,x)),M.push(k.add(k.create(),a,b)),w.push(q(M));let T,S;for(let O=0;O<=g;O++){let G=P2/4*O/g,R=M2(G),D=b2(G);if(O>0){M=[];let N;N=k.add(k.create(),c,k.subtract(v,k.scale(v,x,T),k.scale(E,p,S))),M.push(N),N=k.add(k.create(),c,k.subtract(v,k.scale(v,b,T),k.scale(E,p,S))),M.push(N),O<g&&(N=k.add(k.create(),c,k.subtract(v,k.scale(v,b,R),k.scale(E,p,D))),M.push(N)),N=k.add(k.create(),c,k.subtract(v,k.scale(v,x,R),k.scale(E,p,D))),M.push(N),w.push(q(M)),M=[],N=k.add(k.create(),k.scale(v,x,T),k.scale(E,p,S)),k.add(N,N,a),M.push(N),N=k.add(k.create(),k.scale(v,b,T),k.scale(E,p,S)),k.add(N,N,a),M.push(N),O<g&&(N=k.add(k.create(),k.scale(v,b,R),k.scale(E,p,D)),k.add(N,N,a),M.push(N)),N=k.add(k.create(),k.scale(v,x,R),k.scale(E,p,D)),k.add(N,N,a),M.push(N),M.reverse(),w.push(q(M))}T=R,S=D}}x=b}return A2.create(w)};S2.exports=AA});var R2=u((PF,F2)=>{var{EPS:k2,TAU:Ar}=I(),U=Z(),O2=z(),{isGTE:N2,isNumberArray:V2}=K(),bA=yr(),MA=e=>{let t={center:[0,0],size:[2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!V2(r,2))throw new Error("center must be an array of X and Y values");if(!V2(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(g=>g>=0))throw new Error("size values must be positive");if(!N2(s,0))throw new Error("roundRadius must be positive");if(!N2(o,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0)return O2.create();if(s===0)return bA({center:r,size:n});if(n=n.map(g=>g/2),s>n[0]-k2||s>n[1]-k2)throw new Error("roundRadius must be smaller then the radius of all dimensions");let i=Math.floor(o/4),c=U.add(U.create(),r,[n[0]-s,n[1]-s]),a=U.add(U.create(),r,[s-n[0],n[1]-s]),l=U.add(U.create(),r,[s-n[0],s-n[1]]),f=U.add(U.create(),r,[n[0]-s,s-n[1]]),h=[],p=[],d=[],m=[];for(let g=0;g<=i;g++){let q=Ar/4*g/i,w=U.fromAngleRadians(U.create(),q);U.scale(w,w,s),h.push(U.add(U.create(),c,w)),U.rotate(w,w,U.create(),Ar/4),p.push(U.add(U.create(),a,w)),U.rotate(w,w,U.create(),Ar/4),d.push(U.add(U.create(),l,w)),U.rotate(w,w,U.create(),Ar/4),m.push(U.add(U.create(),f,w))}return O2.fromPoints(h.concat(p,d,m))};F2.exports=MA});var ks=u((AF,B2)=>{var SA=Ms(),{isGTE:TA}=K(),kA=e=>{let t={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:r,radius:n,segments:s,axes:o}=Object.assign({},t,e);if(!TA(n,0))throw new Error("radius must be positive");return n=[n,n,n],SA({center:r,radius:n,segments:s,axes:o})};B2.exports=kA});var C2=u((bF,z2)=>{var OA=yr(),{isGTE:NA}=K(),VA=e=>{let t={center:[0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!NA(n,0))throw new Error("size must be positive");return n=[n,n],OA({center:r,size:n})};z2.exports=VA});var I2=u((MF,G2)=>{var{TAU:Z2}=I(),zt=Z(),FA=z(),{isGT:RA,isGTE:br,isNumberArray:BA}=K(),zA=(e,t)=>e>0&&t>1&&t<e/2?Math.cos(Math.PI*t/e)/Math.cos(Math.PI*(t-1)/e):0,D2=(e,t,r,n)=>{let s=Z2/e,o=[];for(let i=0;i<e;i++){let c=zt.fromAngleRadians(zt.create(),s*i+r);zt.scale(c,c,t),zt.add(c,n,c),o.push(c)}return o},CA=e=>{let t={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0},{center:r,vertices:n,outerRadius:s,innerRadius:o,density:i,startAngle:c}=Object.assign({},t,e);if(!BA(r,2))throw new Error("center must be an array of X and Y values");if(!br(n,2))throw new Error("vertices must be two or more");if(!RA(s,0))throw new Error("outerRadius must be greater than zero");if(!br(o,0))throw new Error("innerRadius must be greater than zero");if(!br(c,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),i=Math.floor(i),c=c%Z2,o===0){if(!br(i,2))throw new Error("density must be two or more");o=s*zA(n,i)}let a=zt.clone(r),l=D2(n,s,c,a),f=D2(n,o,c+Math.PI/n,a),h=[];for(let p=0;p<n;p++)h.push(l[p]),h.push(f[p]);return FA.fromPoints(h)};G2.exports=CA});var nt=u((SF,H2)=>{var DA=B(),X2=Y(),$2=fe(),Y2=z(),L2=C(),U2=$(),Mr=(e,...t)=>{let r={origin:[0,0,0],normal:[0,0,1]},{origin:n,normal:s}=Object.assign({},r,e);if(t=DA(t),t.length===0)throw new Error("wrong number of arguments");let o=$2.fromNormalAndPoint($2.create(),s,n);if(Number.isNaN(o[0]))throw new Error("the given origin and normal do not define a proper plane");let i=X2.mirrorByPlane(X2.create(),o),c=t.map(a=>U2.isA(a)?U2.transform(i,a):Y2.isA(a)?Y2.transform(i,a):L2.isA(a)?L2.transform(i,a):a);return c.length===1?c[0]:c},ZA=(...e)=>Mr({normal:[1,0,0]},e),GA=(...e)=>Mr({normal:[0,1,0]},e),IA=(...e)=>Mr({normal:[0,0,1]},e);H2.exports={mirror:Mr,mirrorX:ZA,mirrorY:GA,mirrorZ:IA}});var Os=u((TF,_2)=>{var W2=fe(),Ge=V(),XA=e=>{let t=e.edges;if(t.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");let r=t.reduce((i,c)=>Ge.add(Ge.create(),i,c[0]),Ge.create());Ge.scale(r,r,1/t.length);let n,s=0;t.forEach(i=>{if(!Ge.equals(i[0],i[1])){let c=Ge.squaredDistance(r,i[0]);c>s&&(n=i,s=c)}});let o=t.find(i=>Ge.equals(i[1],n[0]));return W2.fromPoints(W2.create(),o[0],n[0],n[1])};_2.exports=XA});var ke=u((kF,K2)=>{var $A=e=>(e||(e=[]),{edges:e});K2.exports=$A});var j2=u((OF,J2)=>{var YA=ke(),Q2=V(),LA=(...e)=>{let t,r;return e.length===1?(t=YA(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[Q2.clone(n[0]),Q2.clone(n[1])]),t};J2.exports=LA});var tp=u((NF,ep)=>{var UA=V(),HA=(e,t)=>{let r=e.edges,n=t.edges;return r.length!==n.length?!1:r.reduce((o,i,c)=>{let a=n[c],l=UA.squaredDistance(i[0],a[0]);return o&&l<Number.EPSILON},!0)};ep.exports=HA});var np=u((VF,rp)=>{var Sr=V(),WA=ke(),_A=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");if(e.length<3)throw new Error("the given points must contain THREE or more points");let t=[],r=e[e.length-1];return e.forEach(n=>{n.length===2&&t.push([Sr.fromVec2(Sr.create(),r),Sr.fromVec2(Sr.create(),n)]),n.length===3&&t.push([r,n]),r=n}),WA(t)};rp.exports=_A});var op=u((FF,sp)=>{var Tr=V(),KA=ke(),QA=e=>{if(!Array.isArray(e))throw new Error("the given sides must be an array");let t=[];return e.forEach(r=>{t.push([Tr.fromVec2(Tr.create(),r[0]),Tr.fromVec2(Tr.create(),r[1])])}),KA(t)};sp.exports=QA});var cp=u((RF,ip)=>{var JA=e=>!!(e&&typeof e=="object"&&"edges"in e&&Array.isArray(e.edges));ip.exports=JA});var lp=u((BF,ap)=>{var jA=ke(),eb=(...e)=>{let t,r;return e.length===1?(t=jA(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[n[1],n[0]]),t};ap.exports=eb});var fp=u((zF,up)=>{var tb=e=>e.edges;up.exports=tb});var pp=u((CF,hp)=>{var rb=(e,t)=>{let r,n,s,o,i,c=1;do{n=e,e=null;let a=null;for(i=0;n;){i++,s=n;let l=0;for(r=0;r<c&&(l++,s=s.nextZ,!!s);r++);let f=c;for(;l>0||f>0&&s;)l!==0&&(f===0||!s||t(n)<=t(s))?(o=n,n=n.nextZ,l--):(o=s,s=s.nextZ,f--),a?a.nextZ=o:e=o,o.prevZ=a,a=o;n=s}a.nextZ=null,c*=2}while(i>1);return e};hp.exports=rb});var Ns=u((DF,dp)=>{var nb=pp(),kr=class{constructor(t,r,n){this.i=t,this.x=r,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}},sb=(e,t,r,n)=>{let s=new kr(e,t,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s},ob=e=>{e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)};dp.exports={Node:kr,insertNode:sb,removeNode:ob,sortLinked:nb}});var Or=u((ZF,gp)=>{var ib=(e,t,r,n,s,o,i,c)=>(s-i)*(t-c)-(e-i)*(o-c)>=0&&(e-i)*(n-c)-(r-i)*(t-c)>=0&&(r-i)*(o-c)-(s-i)*(n-c)>=0,cb=(e,t,r)=>(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y);gp.exports={area:cb,pointInTriangle:ib}});var Vs=u((GF,vp)=>{var{Node:mp,insertNode:qp,removeNode:Vr}=Ns(),{area:ce}=Or(),ab=(e,t,r,n,s)=>{let o;if(s===db(e,t,r,n)>0)for(let i=t;i<r;i+=n)o=qp(i,e[i],e[i+1],o);else for(let i=r-n;i>=t;i-=n)o=qp(i,e[i],e[i+1],o);return o&&Fr(o,o.next)&&(Vr(o),o=o.next),o},xp=(e,t)=>{if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(Fr(r,r.next)||ce(r.prev,r,r.next)===0)){if(Vr(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t},lb=(e,t,r)=>{let n=e;do{let s=n.prev,o=n.next.next;!Fr(s,o)&&wp(s,n,n.next,o)&&Ct(s,o)&&Ct(o,s)&&(t.push(s.i/r),t.push(n.i/r),t.push(o.i/r),Vr(n),Vr(n.next),n=e=o),n=n.next}while(n!==e);return xp(n)},ub=(e,t)=>{let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&wp(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1},Ct=(e,t)=>ce(e.prev,e,e.next)<0?ce(e,t,e.next)>=0&&ce(e,e.prev,t)>=0:ce(e,t,e.prev)<0||ce(e,e.next,t)<0,fb=(e,t)=>{let r=e,n=!1,s=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&s<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n},hb=(e,t)=>{let r=new mp(e.i,e.x,e.y),n=new mp(t.i,t.x,t.y),s=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n},pb=(e,t)=>e.next.i!==t.i&&e.prev.i!==t.i&&!ub(e,t)&&(Ct(e,t)&&Ct(t,e)&&fb(e,t)&&(ce(e.prev,e,t.prev)||ce(e,t.prev,t))||Fr(e,t)&&ce(e.prev,e,e.next)>0&&ce(t.prev,t,t.next)>0),wp=(e,t,r,n)=>{let s=Math.sign(ce(e,t,r)),o=Math.sign(ce(e,t,n)),i=Math.sign(ce(r,n,e)),c=Math.sign(ce(r,n,t));return!!(s!==o&&i!==c||s===0&&Nr(e,r,t)||o===0&&Nr(e,n,t)||i===0&&Nr(r,e,n)||c===0&&Nr(r,t,n))},Nr=(e,t,r)=>t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y),db=(e,t,r,n)=>{let s=0;for(let o=t,i=r-n;o<r;o+=n)s+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return s},Fr=(e,t)=>e.x===t.x&&e.y===t.y;vp.exports={cureLocalIntersections:lb,filterPoints:xp,isValidDiagonal:pb,linkedPolygon:ab,locallyInside:Ct,splitPolygon:hb}});var Pp=u((IF,Ep)=>{var{filterPoints:Fs,linkedPolygon:gb,locallyInside:mb,splitPolygon:qb}=Vs(),{area:yp,pointInTriangle:xb}=Or(),wb=(e,t,r,n)=>{let s=[];for(let o=0,i=t.length;o<i;o++){let c=t[o]*n,a=o<i-1?t[o+1]*n:e.length,l=gb(e,c,a,n,!1);l===l.next&&(l.steiner=!0),s.push(Pb(l))}s.sort((o,i)=>o.x-i.x);for(let o=0;o<s.length;o++)r=vb(s[o],r),r=Fs(r,r.next);return r},vb=(e,t)=>{let r=yb(e,t);if(!r)return t;let n=qb(r,e),s=Fs(r,r.next);return Fs(n,n.next),t===r?s:t},yb=(e,t)=>{let r=t,n=e.x,s=e.y,o=-1/0,i;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){let h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=n&&h>o){if(o=h,h===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===o)return i;let c=i,a=i.x,l=i.y,f=1/0;r=i;do{if(n>=r.x&&r.x>=a&&n!==r.x&&xb(s<l?n:o,s,a,l,s<l?o:n,s,r.x,r.y)){let h=Math.abs(s-r.y)/(n-r.x);mb(r,e)&&(h<f||h===f&&(r.x>i.x||r.x===i.x&&Eb(i,r)))&&(i=r,f=h)}r=r.next}while(r!==c);return i},Eb=(e,t)=>yp(e.prev,e,t.prev)<0&&yp(t.next,e,e.next)<0,Pb=e=>{let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r};Ep.exports=wb});var bp=u((XF,Ap)=>{var Ab=Pp(),{removeNode:bb,sortLinked:Mb}=Ns(),{cureLocalIntersections:Sb,filterPoints:Rr,isValidDiagonal:Tb,linkedPolygon:kb,splitPolygon:Ob}=Vs(),{area:Ie,pointInTriangle:Dt}=Or(),Nb=(e,t,r=2)=>{let n=t&&t.length,s=n?t[0]*r:e.length,o=kb(e,0,s,r,!0),i=[];if(!o||o.next===o.prev)return i;let c,a,l,f,h;if(n&&(o=Ab(e,t,o,r)),e.length>80*r){c=l=e[0],a=f=e[1];for(let p=r;p<s;p+=r){let d=e[p],m=e[p+1];d<c&&(c=d),m<a&&(a=m),d>l&&(l=d),m>f&&(f=m)}h=Math.max(l-c,f-a),h=h!==0?1/h:0}return Zt(o,i,r,c,a,h),i},Zt=(e,t,r,n,s,o,i)=>{if(!e)return;!i&&o&&Bb(e,n,s,o);let c=e,a,l;for(;e.prev!==e.next;){if(a=e.prev,l=e.next,o?Fb(e,n,s,o):Vb(e)){t.push(a.i/r),t.push(e.i/r),t.push(l.i/r),bb(e),e=l.next,c=l.next;continue}if(e=l,e===c){i?i===1?(e=Sb(Rr(e),t,r),Zt(e,t,r,n,s,o,2)):i===2&&Rb(e,t,r,n,s,o):Zt(Rr(e),t,r,n,s,o,1);break}}},Vb=e=>{let t=e.prev,r=e,n=e.next;if(Ie(t,r,n)>=0)return!1;let s=e.next.next;for(;s!==e.prev;){if(Dt(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&Ie(s.prev,s,s.next)>=0)return!1;s=s.next}return!0},Fb=(e,t,r,n)=>{let s=e.prev,o=e,i=e.next;if(Ie(s,o,i)>=0)return!1;let c=s.x<o.x?s.x<i.x?s.x:i.x:o.x<i.x?o.x:i.x,a=s.y<o.y?s.y<i.y?s.y:i.y:o.y<i.y?o.y:i.y,l=s.x>o.x?s.x>i.x?s.x:i.x:o.x>i.x?o.x:i.x,f=s.y>o.y?s.y>i.y?s.y:i.y:o.y>i.y?o.y:i.y,h=Rs(c,a,t,r,n),p=Rs(l,f,t,r,n),d=e.prevZ,m=e.nextZ;for(;d&&d.z>=h&&m&&m.z<=p;){if(d!==e.prev&&d!==e.next&&Dt(s.x,s.y,o.x,o.y,i.x,i.y,d.x,d.y)&&Ie(d.prev,d,d.next)>=0||(d=d.prevZ,m!==e.prev&&m!==e.next&&Dt(s.x,s.y,o.x,o.y,i.x,i.y,m.x,m.y)&&Ie(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Dt(s.x,s.y,o.x,o.y,i.x,i.y,d.x,d.y)&&Ie(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==e.prev&&m!==e.next&&Dt(s.x,s.y,o.x,o.y,i.x,i.y,m.x,m.y)&&Ie(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0},Rb=(e,t,r,n,s,o)=>{let i=e;do{let c=i.next.next;for(;c!==i.prev;){if(i.i!==c.i&&Tb(i,c)){let a=Ob(i,c);i=Rr(i,i.next),a=Rr(a,a.next),Zt(i,t,r,n,s,o),Zt(a,t,r,n,s,o);return}c=c.next}i=i.next}while(i!==e)},Bb=(e,t,r,n)=>{let s=e;do s.z===null&&(s.z=Rs(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,Mb(s,o=>o.z)},Rs=(e,t,r,n,s)=>(e=32767*(e-r)*s,t=32767*(t-n)*s,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1);Ap.exports=Nb});var Sp=u(($F,Mp)=>{var{area:zb}=_e(),{toOutlines:Cb}=z(),{arePointsInside:Db}=lr(),Zb=e=>{let t=Cb(e),r=[],n=[];t.forEach((i,c)=>{let a=zb(i);a<0?n.push(c):a>0&&r.push(c)});let s=[],o=[];return r.forEach((i,c)=>{let a=t[i];s[c]=[],n.forEach((l,f)=>{let h=t[l];Db([h[0]],{vertices:a})&&(s[c].push(l),o[f]||(o[f]=[]),o[f].push(c))})}),n.forEach((i,c)=>{if(o[c]&&o[c].length>1){let a=Gb(o[c],l=>s[l].length);o[c].forEach((l,f)=>{f!==a&&(s[l]=s[l].filter(h=>h!==i))})}}),s.map((i,c)=>({solid:t[r[c]],holes:i.map(a=>t[a])}))},Gb=(e,t)=>{let r,n;return e.forEach((s,o)=>{let i=t(s);(n===void 0||i<n)&&(r=o,n=i)}),r};Mp.exports=Zb});var Op=u((YF,kp)=>{var Ib=z(),Tp=fe(),Xb=Z(),te=V(),$b=Os(),Yb=Sp(),Bs=class{constructor(t){this.plane=$b(t);let r=te.orthogonal(te.create(),this.plane),n=te.cross(te.create(),this.plane,r);this.v=te.normalize(n,n),this.u=te.cross(te.create(),this.v,this.plane),this.basisMap=new Map;let s=t.edges.map(i=>i.map(c=>this.to2D(c))),o=Ib.create(s);this.roots=Yb(o)}to2D(t){let r=Xb.fromValues(te.dot(t,this.u),te.dot(t,this.v));return this.basisMap.set(r,t),r}to3D(t){let r=this.basisMap.get(t);if(r)return r;{console.log("Warning: point not in original slice");let n=te.scale(te.create(),this.u,t[0]),s=te.scale(te.create(),this.v,t[1]),o=te.scale(te.create(),Tp,Tp[3]),i=te.add(n,n,o);return te.add(s,s,i)}}};kp.exports=Bs});var Vp=u((LF,Np)=>{var Lb=X(),Ub=bp(),Hb=Op(),Wb=e=>{let t=new Hb(e),r=[];return t.roots.forEach(({solid:n,holes:s})=>{let o=n.length,i=[];s.forEach((h,p)=>{i.push(o),o+=h.length});let c=[n,...s].flat(),a=c.flat(),l=h=>t.to3D(c[h]),f=Ub(a,i);for(let h=0;h<f.length;h+=3){let p=f.slice(h,h+3).map(l);r.push(Lb.fromPointsAndPlane(p,t.plane))}}),r};Np.exports=Wb});var Bp=u((UF,Rp)=>{var Fp=V(),_b=e=>e.reduce((t,r)=>t+=`[${Fp.toString(r[0])}, ${Fp.toString(r[1])}], `,""),Kb=e=>`[${_b(e.edges)}]`;Rp.exports=Kb});var Cp=u((HF,zp)=>{var Br=V(),Qb=ke(),Jb=(e,t)=>{let r=t.edges.map(n=>[Br.transform(Br.create(),n[0],e),Br.transform(Br.create(),n[1],e)]);return Qb(r)};zp.exports=Jb});var Xe=u((WF,Dp)=>{Dp.exports={calculatePlane:Os(),clone:j2(),create:ke(),equals:tp(),fromPoints:np(),fromSides:op(),isA:cp(),reverse:lp(),toEdges:fp(),toPolygons:Vp(),toString:Bp(),transform:Cp()}});var Ip=u((_F,Gp)=>{var Zp=V(),jb=ke(),e8=e=>{if(!e.edges)return e;let t=e.edges,r=new Map,n=new Map;t=t.filter(i=>!Zp.equals(i[0],i[1])),t.forEach(i=>{let c=i[0].toString(),a=i[1].toString();r.set(c,i[0]),r.set(a,i[1]),n.set(c,(n.get(c)||0)+1),n.set(a,(n.get(a)||0)-1)});let s=[],o=[];return n.forEach((i,c)=>{i<0&&s.push(c),i>0&&o.push(c)}),s.forEach(i=>{let c=r.get(i),a=1/0,l;o.forEach(f=>{let h=r.get(f),p=Zp.distance(c,h);p<a&&(a=p,l=h)}),console.warn(`slice.repair: repairing vertex gap ${c} to ${l} distance ${a}`),t=t.map(f=>f[0].toString()===i?[l,f[1]]:f[1].toString()===i?[f[0],l]:f)}),jb(t)};Gp.exports=e8});var Hp=u((KF,Up)=>{var{EPS:Xp}=I(),st=V(),zr=X(),$p=Xe(),zs=(e,t)=>e===t?e:e<t?zs(t,e):t===1?1:t===0?e:zs(t,e%t),t8=(e,t)=>e*t/zs(e,t),Yp=(e,t)=>{let r=e/t.length;if(r===1)return t;let n=st.fromValues(r,r,r),s=[];return t.forEach(o=>{let i=st.subtract(st.create(),o[1],o[0]);st.divide(i,i,n);let c=o[0];for(let a=1;a<=r;++a){let l=st.add(st.create(),c,i);s.push([c,l]),c=l}}),s},Lp=Xp*Xp/2*Math.sin(Math.PI/3),r8=(e,t)=>{let r=$p.toEdges(e),n=$p.toEdges(t);if(r.length!==n.length){let o=t8(r.length,n.length);o!==r.length&&(r=Yp(o,r)),o!==n.length&&(n=Yp(o,n))}let s=[];return r.forEach((o,i)=>{let c=n[i],a=zr.create([o[0],o[1],c[1]]),l=zr.measureArea(a);Number.isFinite(l)&&l>Lp&&s.push(a);let f=zr.create([o[0],c[1],c[0]]),h=zr.measureArea(f);Number.isFinite(h)&&h>Lp&&s.push(f)}),s};Up.exports=r8});var Gt=u((QF,Qp)=>{var Wp=Y(),_p=z(),n8=C(),Cs=X(),Oe=Xe(),s8=Ip(),Kp=Hp(),o8=(e,t,r)=>{let n=null;return _p.isA(r)&&(n=Oe.fromSides(_p.toSides(r))),Cs.isA(r)&&(n=Oe.fromPoints(Cs.toPoints(r))),e===0||e===1?Oe.transform(Wp.fromTranslation(Wp.create(),[0,0,e]),n):null},i8=(e,t)=>{let r={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:o8},{numberOfSlices:n,capStart:s,capEnd:o,close:i,repair:c,callback:a}=Object.assign({},r,e);if(n<2)throw new Error("numberOfSlices must be 2 or more");c&&(t=s8(t));let l=n-1,f=null,h=null,p=null,d=[];for(let m=0;m<n;m++){let g=a(m/l,m,t);if(g){if(!Oe.isA(g))throw new Error("the callback function must return slice objects");if(Oe.toEdges(g).length===0)throw new Error("the callback function must return slices with one or more edges");p&&(d=d.concat(Kp(p,g))),m===0&&(f=g),m===n-1&&(h=g),p=g}}if(o){let m=Oe.toPolygons(h);d=d.concat(m)}if(s){let m=Oe.toPolygons(f).map(Cs.invert);d=d.concat(m)}return!s&&!o&&i&&!Oe.equals(h,f)&&(d=d.concat(Kp(h,f))),n8.create(d)};Qp.exports=i8});var Zs=u((JF,Jp)=>{var{TAU:ue}=I(),It=Y(),{mirrorX:c8}=nt(),Cr=z(),Ds=Xe(),a8=Gt(),l8=(e,t)=>{let r={segments:12,startAngle:0,angle:ue,overflow:"cap"},{segments:n,startAngle:s,angle:o,overflow:i}=Object.assign({},r,e);if(n<3)throw new Error("segments must be greater then 3");s=Math.abs(s)>ue?s%ue:s,o=Math.abs(o)>ue?o%ue:o;let c=s+o;if(c=Math.abs(c)>ue?c%ue:c,c<s){let v=s;s=c,c=v}let a=c-s;if(a<=0&&(a=ue),Math.abs(a)<ue){let v=ue/n;n=Math.floor(Math.abs(a)/v),Math.abs(a)>n*v&&n++}let l=Cr.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let f=l.filter(v=>v[0][0]<0),h=l.filter(v=>v[0][0]>=0);f.length>0&&h.length>0&&i==="cap"&&(f.length>h.length?(l=l.map(v=>{let E=v[0],x=v[1];return E=[Math.min(E[0],0),E[1]],x=[Math.min(x[0],0),x[1]],[E,x]}),t=Cr.create(l),t=c8(t)):h.length>=f.length&&(l=l.map(v=>{let E=v[0],x=v[1];return E=[Math.max(E[0],0),E[1]],x=[Math.max(x[0],0),x[1]],[E,x]}),t=Cr.create(l)));let d=a/n,m=Math.abs(a)<ue,g=Ds.fromSides(Cr.toSides(t));Ds.reverse(g,g);let q=It.create(),w=(v,E,x)=>{let P=d*E+s;return a===ue&&E===n&&(P=s),It.multiply(q,It.fromZRotation(q,P),It.fromXRotation(It.create(),ue/4)),Ds.transform(q,x)};return e={numberOfSlices:n+1,capStart:m,capEnd:m,close:!m,callback:w},a8(e,g)};Jp.exports=l8});var ot=u((jF,nd)=>{var u8=B(),jp=Y(),ed=z(),td=C(),rd=$(),Dr=(e,...t)=>{if(!Array.isArray(e))throw new Error("angles must be an array");if(t=u8(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=e[2],n=e[1],s=e[0],o=jp.fromTaitBryanRotation(jp.create(),r,n,s),i=t.map(c=>rd.isA(c)?rd.transform(o,c):ed.isA(c)?ed.transform(o,c):td.isA(c)?td.transform(o,c):c);return i.length===1?i[0]:i},f8=(e,...t)=>Dr([e,0,0],t),h8=(e,...t)=>Dr([0,e,0],t),p8=(e,...t)=>Dr([0,0,e],t);nd.exports={rotate:Dr,rotateX:f8,rotateY:h8,rotateZ:p8}});var Ne=u((eR,ad)=>{var d8=B(),sd=Y(),od=z(),id=C(),cd=$(),Zr=(e,...t)=>{if(!Array.isArray(e))throw new Error("offset must be an array");if(t=d8(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=sd.fromTranslation(sd.create(),e),n=t.map(s=>cd.isA(s)?cd.transform(r,s):od.isA(s)?od.transform(r,s):id.isA(s)?id.transform(r,s):s);return n.length===1?n[0]:n},g8=(e,...t)=>Zr([e,0,0],t),m8=(e,...t)=>Zr([0,e,0],t),q8=(e,...t)=>Zr([0,0,e],t);ad.exports={translate:Zr,translateX:g8,translateY:m8,translateZ:q8}});var ud=u((tR,ld)=>{var{TAU:x8}=I(),w8=Zs(),{rotate:v8}=ot(),{translate:y8}=Ne(),E8=ys(),{isGT:Gs,isGTE:Is}=K(),P8=e=>{let t={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:x8},{innerRadius:r,innerSegments:n,outerRadius:s,outerSegments:o,innerRotation:i,startAngle:c,outerRotation:a}=Object.assign({},t,e);if(!Gs(r,0))throw new Error("innerRadius must be greater than zero");if(!Is(n,3))throw new Error("innerSegments must be three or more");if(!Gs(s,0))throw new Error("outerRadius must be greater than zero");if(!Is(o,3))throw new Error("outerSegments must be three or more");if(!Is(c,0))throw new Error("startAngle must be positive");if(!Gs(a,0))throw new Error("outerRotation must be greater than zero");if(r>=s)throw new Error("inner circle is two large to rotate about the outer circle");let l=E8({radius:r,segments:n});return i!==0&&(l=v8([0,0,i],l)),l=y8([s,0],l),w8({startAngle:c,angle:a,segments:o},l)};ld.exports=P8});var hd=u((rR,fd)=>{var{NEPS:it}=I(),Xt=Z(),A8=z(),{isNumberArray:b8}=K(),Xs=(e,t,r)=>Math.acos((e*e+t*t-r*r)/(2*e*t)),M8=(e,t,r)=>t>it?Math.sqrt(e*e+r*r-2*e*r*Math.cos(t)):Math.sqrt((e-r)*(e-r)+e*r*t*t*(1-t*t/12)),S8=e=>{if(Math.abs(e[0]+e[1]+e[2]-Math.PI)>it)throw new Error("AAA triangles require angles that sum to PI");let r=e[0],n=e[1],s=Math.PI-r-n,o=1,i=o/Math.sin(s)*Math.sin(r),c=o/Math.sin(s)*Math.sin(n);return ct(r,n,s,i,c,o)},T8=e=>{let t=e[0],r=e[1],n=Math.PI+it-t-r;if(n<it)throw new Error("AAS triangles require angles that sum to PI");let s=e[2],o=s/Math.sin(t)*Math.sin(r),i=s/Math.sin(t)*Math.sin(n);return ct(t,r,n,s,o,i)},k8=e=>{let t=e[0],r=e[2],n=Math.PI+it-t-r;if(n<it)throw new Error("ASA triangles require angles that sum to PI");let s=e[1],o=s/Math.sin(n)*Math.sin(t),i=s/Math.sin(n)*Math.sin(r);return ct(t,r,n,o,i,s)},O8=e=>{let t=e[0],r=e[1],n=e[2],s=M8(t,r,n),o=Xs(s,t,n),i=Math.PI-o-r;return ct(o,r,i,n,s,t)},N8=e=>{let t=e[0],r=e[1],n=e[2],s=Math.asin(r*Math.sin(n)/t),o=Math.PI-s-n,i=t/Math.sin(n)*Math.sin(o);return ct(s,o,n,r,i,t)},V8=e=>{let t=e[1],r=e[2],n=e[0];if(t+r<=n||r+n<=t||n+t<=r)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");let s=Xs(r,n,t),o=Xs(n,t,r),i=Math.PI-s-o;return ct(s,o,i,t,r,n)},ct=(e,t,r,n,s,o)=>{let i=Xt.fromValues(0,0),c=Xt.fromValues(o,0),a=Xt.fromValues(n,0);return Xt.add(a,Xt.rotate(a,a,[0,0],Math.PI-t),c),A8.fromPoints([i,c,a])},F8=e=>{let t={type:"SSS",values:[1,1,1]},{type:r,values:n}=Object.assign({},t,e);if(typeof r!="string")throw new Error("triangle type must be a string");if(r=r.toUpperCase(),!((r[0]==="A"||r[0]==="S")&&(r[1]==="A"||r[1]==="S")&&(r[2]==="A"||r[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!b8(n,3))throw new Error("triangle values must contain three values");if(!n.every(s=>s>0))throw new Error("triangle values must be greater than zero");switch(r){case"AAA":return S8(n);case"AAS":return T8(n);case"ASA":return k8(n);case"SAS":return O8(n);case"SSA":return N8(n);case"SSS":return V8(n);default:throw new Error("invalid triangle type, try again")}};fd.exports=F8});var dd=u((nR,pd)=>{pd.exports={arc:Fh(),circle:ys(),cube:$h(),cuboid:wr(),cylinder:bs(),cylinderElliptic:As(),ellipse:vs(),ellipsoid:Ms(),geodesicSphere:c2(),line:l2(),polygon:f2(),polyhedron:Ss(),rectangle:yr(),roundedCuboid:E2(),roundedCylinder:T2(),roundedRectangle:R2(),sphere:ks(),square:C2(),star:I2(),torus:ud(),triangle:hd()}});var md=u((sR,gd)=>{gd.exports={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}});var $s=u((oR,qd)=>{var R8=md(),B8={xOffset:0,yOffset:0,input:"?",align:"left",font:R8,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},z8=(e,t)=>{!t&&typeof e=="string"&&(e={input:e}),e=e||{};let r=Object.assign({},B8,e);return r.input=t||r.input,r};qd.exports=z8});var Ys=u((iR,xd)=>{var C8=$s(),D8=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,extrudeOffset:c}=C8(e,t),a=s.charCodeAt(0);(!a||!o[a])&&(a=63);let l=[].concat(o[a]),f=(i-c)/o.height,h=c/2,p=l.shift()*f,d=[],m=[];for(let g=0,q=l.length;g<q;g+=2){let w=f*l[g]+r,v=f*l[g+1]+n+h;if(l[g]!==void 0){m.push([w,v]);continue}d.push(m),m=[],g--}return m.length&&d.push(m),{width:p,height:i,segments:d}};xd.exports=D8});var yd=u((cR,vd)=>{var Z8=Ys(),G8=$s(),wd=(e,t)=>{let{x:r,y:n}=Object.assign({x:0,y:0},e||{}),s=t.segments,o=null,i=null;for(let c=0,a=s.length;c<a;c++){o=s[c];for(let l=0,f=o.length;l<f;l++)i=o[l],o[l]=[i[0]+r,i[1]+n]}return t},I8=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,align:c,extrudeOffset:a,lineSpacing:l,letterSpacing:f}=G8(e,t),[h,p]=[r,n],d,m,g,q,w,v,E={width:0,segments:[]},x=[],P=[],y=0,A=h,b=()=>{x.push(E),y=Math.max(y,E.width),E={width:0,segments:[]}};for(d=0,m=s.length;d<m;d++){if(g=s[d],q=Z8({xOffset:h,yOffset:p,font:o,height:i,extrudeOffset:a},g),g===`
`){h=A,p-=q.height*l,b();continue}w=q.width*f,E.width+=w,h+=w,g!==" "&&(E.segments=E.segments.concat(q.segments))}for(E.segments.length&&b(),d=0,m=x.length;d<m;d++)E=x[d],y>E.width&&(v=y-E.width,c==="right"?E=wd({x:v},E):c==="center"&&(E=wd({x:v/2},E))),P=P.concat(E.segments);return P};vd.exports=I8});var Pd=u((aR,Ed)=>{Ed.exports={vectorChar:Ys(),vectorText:yd()}});var at=u((lR,Ad)=>{var X8=z(),$8=C(),Y8=$(),L8=e=>{let t;for(let r of e){let n=0;if(X8.isA(r)&&(n=1),$8.isA(r)&&(n=2),Y8.isA(r)&&(n=3),t&&n!==t)return!1;t=n}return!0};Ad.exports=L8});var Md=u((uR,bd)=>{var U8=e=>e*.017453292519943295;bd.exports=U8});var Ls=u((fR,Sd)=>{var H8=(e,t)=>e-t;Sd.exports=H8});var kd=u((hR,Td)=>{var W8=(e,t,r)=>{let n=0,s=e.length;for(;s>n;){let o=Math.floor((n+s)/2),i=e[o];r(t,i)>0?n=o+1:s=o}e.splice(n,0,t)};Td.exports=W8});var Vd=u((pR,Nd)=>{var{TAU:Od}=I(),_8=(e,t,r)=>{let n=t>0?e*Od/t:0,s=r>0?Od/r:0;return Math.ceil(Math.max(n,s,4))};Nd.exports=_8});var Rd=u((dR,Fd)=>{var K8=e=>e*57.29577951308232;Fd.exports=K8});var Us=u((gR,Bd)=>{Bd.exports={areAllShapesTheSameType:at(),degToRad:Md(),flatten:B(),fnNumberSort:Ls(),insertSorted:kd(),radiusToSegments:Vd(),radToDeg:Rd()}});var Gr=u((mR,Cd)=>{var zd=Z(),Q8=z(),J8=(e,t)=>{if(t.vertices.length<4)return null;let r=[],n=t.vertices.filter((i,c)=>i[2]>0?(r.push(c),!0):!1);if(n.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");let s=n.map(i=>{let c=Math.round(i[0]/e)*e+0,a=Math.round(i[1]/e)*e+0;return zd.fromValues(c,a)});if(zd.equals(s[0],s[1]))return null;let o=r[1]-r[0];if(o===1||o===3)o===1&&s.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return s},j8=(e,t)=>{let r=t.map(n=>J8(e,n)).filter(n=>n!==null);return Q8.create(r)};Cd.exports=j8});var Ir=u((qR,Dd)=>{var Ve=V(),e6=z(),t6=C(),r6=X(),n6=(e,t,r)=>{let n=[Ve.fromVec2(Ve.create(),r[0],e),Ve.fromVec2(Ve.create(),r[1],e),Ve.fromVec2(Ve.create(),r[1],t),Ve.fromVec2(Ve.create(),r[0],t)];return r6.create(n)},s6=(e,t)=>{let n=e6.toSides(t).map(o=>n6(e.z0,e.z1,o));return t6.create(n)};Dd.exports=s6});var Id=u((xR,Gd)=>{var Zd=Y(),o6=Z(),Q=V(),$e=function(e,t){arguments.length<2&&(t=Q.orthogonal(Q.create(),e)),this.v=Q.normalize(Q.create(),Q.cross(Q.create(),e,t)),this.u=Q.cross(Q.create(),this.v,e),this.plane=e,this.planeorigin=Q.scale(Q.create(),e,e[3])};$e.GetCartesian=function(e,t){let r=e+"/"+t,n,s;if(r==="X/Y")n=[0,0,1],s=[1,0,0];else if(r==="Y/-X")n=[0,0,1],s=[0,1,0];else if(r==="-X/-Y")n=[0,0,1],s=[-1,0,0];else if(r==="-Y/X")n=[0,0,1],s=[0,-1,0];else if(r==="-X/Y")n=[0,0,-1],s=[-1,0,0];else if(r==="-Y/-X")n=[0,0,-1],s=[0,-1,0];else if(r==="X/-Y")n=[0,0,-1],s=[1,0,0];else if(r==="Y/X")n=[0,0,-1],s=[0,1,0];else if(r==="X/Z")n=[0,-1,0],s=[1,0,0];else if(r==="Z/-X")n=[0,-1,0],s=[0,0,1];else if(r==="-X/-Z")n=[0,-1,0],s=[-1,0,0];else if(r==="-Z/X")n=[0,-1,0],s=[0,0,-1];else if(r==="-X/Z")n=[0,1,0],s=[-1,0,0];else if(r==="-Z/-X")n=[0,1,0],s=[0,0,-1];else if(r==="X/-Z")n=[0,1,0],s=[1,0,0];else if(r==="Z/X")n=[0,1,0],s=[0,0,1];else if(r==="Y/Z")n=[1,0,0],s=[0,1,0];else if(r==="Z/-Y")n=[1,0,0],s=[0,0,1];else if(r==="-Y/-Z")n=[1,0,0],s=[0,-1,0];else if(r==="-Z/Y")n=[1,0,0],s=[0,0,-1];else if(r==="-Y/Z")n=[-1,0,0],s=[0,-1,0];else if(r==="-Z/-Y")n=[-1,0,0],s=[0,0,-1];else if(r==="Y/-Z")n=[-1,0,0],s=[0,1,0];else if(r==="Z/Y")n=[-1,0,0],s=[0,0,1];else throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");return new $e(new Plane(new Vector3D(n),0),new Vector3D(s))};$e.Z0Plane=function(){let e=new Plane(new Vector3D([0,0,1]),0);return new $e(e,new Vector3D([1,0,0]))};$e.prototype={getProjectionMatrix:function(){return Zd.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){let e=Q.scale(Q.create(),this.plane,this.plane[3]);return Zd.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,e[0],e[1],e[2],1)},to2D:function(e){return o6.fromValues(Q.dot(e,this.u),Q.dot(e,this.v))},to3D:function(e){let t=Q.scale(Q.create(),this.u,e[0]),r=Q.scale(Q.create(),this.v,e[1]),n=Q.add(t,t,this.planeorigin);return Q.add(r,r,n)},line3Dto2D:function(e){let t=e.point,r=e.direction.plus(t),n=this.to2D(t),s=this.to2D(r);return Line2D.fromPoints(n,s)},line2Dto3D:function(e){let t=e.origin(),r=e.direction().plus(t),n=this.to3D(t),s=this.to3D(r);return Line3D.fromPoints(n,s)},transform:function(e){let t=this.plane.transform(e),r=this.u.transform(e),n=new Vector3D(0,0,0).transform(e),s=r.minus(n);return new $e(t,s)}};Gd.exports=$e});var Yd=u((wR,$d)=>{var{EPS:ye}=I(),Fe=dr(),he=Z(),i6=Id(),lt=os(),{insertSorted:c6,fnNumberSort:a6}=Us(),Xd=X(),l6=e=>{if(e.length<2)return e;let t=[],r=e.length,n=Xd.plane(e[0]),s=new i6(n),o=[],i=[],c=new Map,a=new Map,l=new Map,f=10/ye;for(let m=0;m<r;m++){let g=e[m],q=[],w=g.vertices.length,v=-1;if(w>0){let E,x;for(let P=0;P<w;P++){let y=s.to2D(g.vertices[P]),A=Math.floor(y[1]*f),b;l.has(A)?b=l.get(A):l.has(A+1)?b=l.get(A+1):l.has(A-1)?b=l.get(A-1):(b=y[1],l.set(A,y[1])),y=he.fromValues(y[0],b),q.push(y);let M=y[1];(P===0||M<E)&&(E=M,v=P),(P===0||M>x)&&(x=M);let T=a.get(M);T||(T={},a.set(M,T)),T[m]=!0}if(E>=x)q=[],w=0,v=-1;else{let P=c.get(E);P||(P=[],c.set(E,P)),P.push(m)}}q.reverse(),v=w-v-1,o.push(q),i.push(v)}let h=[];a.forEach((m,g)=>h.push(g)),h.sort(a6);let p=[],d=[];for(let m=0;m<h.length;m++){let g=[],q=h[m],w=a.get(q);for(let E=0;E<p.length;++E){let x=p[E],P=x.polygonindex;if(w[P]){let y=o[P],A=y.length,b=x.leftvertexindex,M=x.rightvertexindex;for(;;){let S=b+1;if(S>=A&&(S=0),y[S][1]!==q)break;b=S}let T=M-1;if(T<0&&(T=A-1),y[T][1]===q&&(M=T),b!==x.leftvertexindex&&b===M)p.splice(E,1),--E;else{x.leftvertexindex=b,x.rightvertexindex=M,x.topleft=y[b],x.topright=y[M];let S=b+1;S>=A&&(S=0),x.bottomleft=y[S];let O=M-1;O<0&&(O=A-1),x.bottomright=y[O]}}}let v;if(m>=h.length-1)p=[],v=null;else{v=Number(h[m+1]);let E=.5*(q+v),x=c.get(q);for(let P in x){let y=x[P],A=o[y],b=A.length,M=i[y],T=M;for(;;){let D=T+1;if(D>=b&&(D=0),A[D][1]!==q||D===M)break;T=D}let S=M;for(;;){let D=S-1;if(D<0&&(D=b-1),A[D][1]!==q||D===T)break;S=D}let O=T+1;O>=b&&(O=0);let G=S-1;G<0&&(G=b-1);let R={polygonindex:y,leftvertexindex:T,rightvertexindex:S,topleft:A[T],topright:A[S],bottomleft:A[O],bottomright:A[G]};c6(p,R,(D,N)=>{let ee=lt(D.topleft,D.bottomleft,E),ne=lt(N.topleft,N.bottomleft,E);return ee>ne?1:ee<ne?-1:0})}}for(let E in p){let x=p[E],P=lt(x.topleft,x.bottomleft,q),y=he.fromValues(P,q);P=lt(x.topright,x.bottomright,q);let A=he.fromValues(P,q);P=lt(x.topleft,x.bottomleft,v);let b=he.fromValues(P,v);P=lt(x.topright,x.bottomright,v);let M=he.fromValues(P,v),T={topleft:y,topright:A,bottomleft:b,bottomright:M,leftline:Fe.fromPoints(Fe.create(),y,b),rightline:Fe.fromPoints(Fe.create(),M,A)};if(g.length>0){let S=g[g.length-1],O=he.distance(T.topleft,S.topright),G=he.distance(T.bottomleft,S.bottomright);O<ye&&G<ye&&(T.topleft=S.topleft,T.leftline=S.leftline,T.bottomleft=S.bottomleft,g.splice(g.length-1,1))}g.push(T)}if(m>0){let E=new Set,x=new Set;for(let P=0;P<g.length;P++){let y=g[P];for(let A=0;A<d.length;A++)if(!x.has(A)){let b=d[A];if(he.distance(b.bottomleft,y.topleft)<ye&&he.distance(b.bottomright,y.topright)<ye){x.add(A);let M=Fe.direction(y.leftline),T=Fe.direction(b.leftline),S=M[0]-T[0],O=Fe.direction(y.rightline),G=Fe.direction(b.rightline),R=O[0]-G[0],D=Math.abs(S)<ye,N=Math.abs(R)<ye,ee=D||S>=0,ne=N||R>=0;ee&&ne&&(y.outpolygon=b.outpolygon,y.leftlinecontinues=D,y.rightlinecontinues=N,E.add(A));break}}}for(let P=0;P<d.length;P++)if(!E.has(P)){let y=d[P];y.outpolygon.rightpoints.push(y.bottomright),he.distance(y.bottomright,y.bottomleft)>ye&&y.outpolygon.leftpoints.push(y.bottomleft),y.outpolygon.leftpoints.reverse();let b=y.outpolygon.rightpoints.concat(y.outpolygon.leftpoints).map(T=>s.to3D(T)),M=Xd.fromPointsAndPlane(b,n);M.vertices.length&&t.push(M)}}for(let E=0;E<g.length;E++){let x=g[E];x.outpolygon?(x.leftlinecontinues||x.outpolygon.leftpoints.push(x.topleft),x.rightlinecontinues||x.outpolygon.rightpoints.push(x.topright)):(x.outpolygon={leftpoints:[],rightpoints:[]},x.outpolygon.leftpoints.push(x.topleft),he.distance(x.topleft,x.topright)>ye&&x.outpolygon.rightpoints.push(x.topright))}d=g}return t};$d.exports=l6});var ut=u((vR,Ud)=>{var Ld=C(),u6=X(),{NEPS:f6}=I(),h6=Yd(),p6=e=>{if(e.isRetesselated)return e;let t=Ld.toPolygons(e).map((o,i)=>({vertices:o.vertices,plane:u6.plane(o),index:i})),r=d6(t),n=[];r.forEach(o=>{if(Array.isArray(o)){let i=h6(o);n.push(...i)}else n.push(o)});let s=Ld.create(n);return s.isRetesselated=!0,s},d6=e=>{let t=[e],r=[];for(let s=3;s>=0;s--){let o=[],i=s===3?15e-9:f6;t.forEach(c=>{c.sort(g6(s,i));let a=0;for(let l=1;l<c.length;l++)c[l].plane[s]-c[a].plane[s]>i&&(l-a===1?r.push(c[a]):o.push(c.slice(a,l)),a=l);c.length-a===1?r.push(c[a]):o.push(c.slice(a))}),t=o}let n=[];return t.forEach(s=>{s[0]&&(n[s[0].index]=s)}),r.forEach(s=>{n[s.index]=s}),n},g6=(e,t)=>(r,n)=>r.plane[e]-n.plane[e]>t?1:n.plane[e]-r.plane[e]>t?-1:0;Ud.exports=p6});var Xr=u((yR,Wd)=>{var{EPS:ft}=I(),Hd=be(),m6=(e,t)=>{if(e.polygons.length===0||t.polygons.length===0)return!1;let r=Hd(e),n=r[0],s=r[1],o=Hd(t),i=o[0],c=o[1];return!(i[0]-s[0]>ft||n[0]-c[0]>ft||i[1]-s[1]>ft||n[1]-c[1]>ft||i[2]-s[2]>ft||n[2]-c[2]>ft)};Wd.exports=m6});var Qd=u((ER,Kd)=>{var _d=fe(),q6=X(),Hs=class e{constructor(t){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=t}invert(){let t=[this],r;for(let n=0;n<t.length;n++){r=t[n],r.plane&&(r.plane=_d.flip(_d.create(),r.plane)),r.front&&t.push(r.front),r.back&&t.push(r.back);let s=r.front;r.front=r.back,r.back=s}}clipPolygons(t,r){let n={node:this,polygontreenodes:t},s,o=[];do{if(s=n.node,t=n.polygontreenodes,s.plane){let i=s.plane,c=[],a=[],l=r?c:a,f=t.length;for(let p=0;p<f;p++){let d=t[p];d.isRemoved()||d.splitByPlane(i,l,c,a,c)}s.front&&a.length>0&&o.push({node:s.front,polygontreenodes:a});let h=c.length;if(s.back&&h>0)o.push({node:s.back,polygontreenodes:c});else for(let p=0;p<h;p++)c[p].remove()}n=o.pop()}while(n!==void 0)}clipTo(t,r){let n=this,s=[];do n.polygontreenodes.length>0&&t.rootnode.clipPolygons(n.polygontreenodes,r),n.front&&s.push(n.front),n.back&&s.push(n.back),n=s.pop();while(n!==void 0)}addPolygonTreeNodes(t){let r={node:this,polygontreenodes:t},n=[];do{let s=r.node,o=r.polygontreenodes;if(o.length===0){r=n.pop();continue}if(!s.plane){let l=0;l=Math.floor(o.length/2);let f=o[l].getPolygon();s.plane=q6.plane(f)}let i=[],c=[],a=o.length;for(let l=0;l<a;++l)o[l].splitByPlane(s.plane,s.polygontreenodes,c,i,c);i.length>0&&(s.front||(s.front=new e(s)),a===i.length&&c.length===0?s.front.polygontreenodes=i:n.push({node:s.front,polygontreenodes:i})),c.length>0&&(s.back||(s.back=new e(s)),a===c.length&&i.length===0?s.back.polygontreenodes=c:n.push({node:s.back,polygontreenodes:c})),r=n.pop()}while(r!==void 0)}};Kd.exports=Hs});var jd=u((PR,Jd)=>{var ht=V(),x6=(e,t,r)=>{let n=ht.subtract(ht.create(),r,t),s=(e[3]-ht.dot(e,t))/ht.dot(e,n);return Number.isNaN(s)&&(s=0),s>1&&(s=1),s<0&&(s=0),ht.scale(n,n,s),ht.add(n,t,n),n};Jd.exports=x6});var t5=u((AR,e5)=>{var{EPS:$r}=I(),w6=fe(),Yr=V(),Ws=X(),v6=jd(),y6=(e,t)=>{let r={type:null,front:null,back:null},n=t.vertices,s=n.length,o=Ws.plane(t);if(w6.equals(o,e))r.type=0;else{let i=!1,c=!1,a=[],l=-$r;for(let f=0;f<s;f++){let h=Yr.dot(e,n[f])-e[3],p=h<l;a.push(p),h>$r&&(i=!0),h<l&&(c=!0)}if(!i&&!c){let f=Yr.dot(e,o);r.type=f>=0?0:1}else if(!c)r.type=2;else if(!i)r.type=3;else{r.type=4;let f=[],h=[],p=a[0];for(let m=0;m<s;m++){let g=n[m],q=m+1;q>=s&&(q=0);let w=a[q];if(p===w)p?h.push(g):f.push(g);else{let v=n[q],E=v6(e,g,v);p?(h.push(g),h.push(E),f.push(E)):(f.push(g),f.push(E),h.push(E))}p=w}let d=$r*$r;if(h.length>=3){let m=h[h.length-1];for(let g=0;g<h.length;g++){let q=h[g];Yr.squaredDistance(q,m)<d&&(h.splice(g,1),g--),m=q}}if(f.length>=3){let m=f[f.length-1];for(let g=0;g<f.length;g++){let q=f[g];Yr.squaredDistance(q,m)<d&&(f.splice(g,1),g--),m=q}}f.length>=3&&(r.front=Ws.fromPointsAndPlane(f,o)),h.length>=3&&(r.back=Ws.fromPointsAndPlane(h,o))}}return r};e5.exports=y6});var s5=u((bR,n5)=>{var{EPS:E6}=I(),P6=V(),r5=X(),A6=t5(),_s=class e{constructor(t,r){this.parent=t,this.children=[],this.polygon=r,this.removed=!1}addPolygons(t){if(!this.isRootNode())throw new Error("Assertion failed");let r=this;t.forEach(n=>{r.addChild(n)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;let t=this.parent.children,r=t.indexOf(this);if(r<0)throw new Error("Assertion failed");t.splice(r,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(t){let r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s)for(r=n[s],o=0,i=r.length;o<i;o++)c=r[o],c.polygon?t.push(c.polygon):c.children.length>0&&n.push(c.children)}splitByPlane(t,r,n,s,o){if(this.children.length){let i=[this.children],c,a,l,f,h;for(c=0;c<i.length;c++)for(h=i[c],a=0,l=h.length;a<l;a++)f=h[a],f.children.length>0?i.push(f.children):f._splitByPlane(t,r,n,s,o)}else this._splitByPlane(t,r,n,s,o)}_splitByPlane(t,r,n,s,o){let i=this.polygon;if(i){let c=r5.measureBoundingSphere(i),a=c[3]+E6,l=c,f=P6.dot(t,l)-t[3];if(f>a)s.push(this);else if(f<-a)o.push(this);else{let h=A6(t,i);switch(h.type){case 0:r.push(this);break;case 1:n.push(this);break;case 2:s.push(this);break;case 3:o.push(this);break;case 4:if(h.front){let p=this.addChild(h.front);s.push(p)}if(h.back){let p=this.addChild(h.back);o.push(p)}break}}}}addChild(t){let r=new e(this,t);return this.children.push(r),r}invertSub(){let t=[this],r=[t],n,s,o,i;for(n=0;n<r.length;n++)for(t=r[n],s=0,o=t.length;s<o;s++)i=t[s],i.polygon&&(i.polygon=r5.invert(i.polygon)),i.children.length>0&&r.push(i.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let t=[this],r=[t];for(let n=0;n<r.length;++n){t=r[n];let s=t.length;for(let o=0;o<s;o++){let i=t[o];i.polygon&&(i.polygon=null),i.parent&&(i.parent=null),i.children.length>0&&r.push(i.children),i.children=[]}}}toString(){let t="",r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s){r=n[s];let a=" ".repeat(s);for(o=0,i=r.length;o<i;o++)c=r[o],t+=`${a}PolygonTreeNode (${c.isRootNode()}): ${c.children.length}`,c.polygon?t+=`
 ${a}polygon: ${c.polygon.vertices}
`:t+=`
`,c.children.length>0&&n.push(c.children)}return t}};n5.exports=_s});var i5=u((MR,o5)=>{var b6=Qd(),M6=s5(),Ks=class{constructor(t){this.polygonTree=new M6,this.rootnode=new b6(null),t&&this.addPolygons(t)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(t,r=!1){this.rootnode.clipTo(t,r)}allPolygons(){let t=[];return this.polygonTree.getPolygons(t),t}addPolygons(t){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=this.polygonTree.addChild(t[n]);this.rootnode.addPolygonTreeNodes(r)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};o5.exports=Ks});var Lr=u((SR,c5)=>{c5.exports={Tree:i5()}});var u5=u((TR,l5)=>{var Ur=C(),S6=Xr(),{Tree:a5}=Lr(),T6=(e,t)=>{if(!S6(e,t))return Ur.create();let r=new a5(Ur.toPolygons(e)),n=new a5(Ur.toPolygons(t));r.invert(),n.clipTo(r),n.invert(),r.clipTo(n),n.clipTo(r),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return Ur.create(s)};l5.exports=T6});var Qs=u((kR,f5)=>{var k6=B(),O6=ut(),N6=u5(),V6=(...e)=>{e=k6(e);let t=e.shift();return e.forEach(r=>{t=N6(t,r)}),t=O6(t),t};f5.exports=V6});var p5=u((OR,h5)=>{var F6=B(),R6=C(),B6=we(),z6=Gr(),C6=Ir(),D6=Qs(),Z6=(...e)=>{e=F6(e);let t=e.map(s=>C6({z0:-1,z1:1},s)),r=D6(t),n=B6(r);return z6(n,R6.toPolygons(r))};h5.exports=Z6});var g5=u((NR,d5)=>{var G6=B(),I6=at(),X6=z(),$6=C(),Y6=p5(),L6=Qs(),U6=(...e)=>{if(e=G6(e),e.length===0)throw new Error("wrong number of arguments");if(!I6(e))throw new Error("only intersect of the types are supported");let t=e[0];return X6.isA(t)?Y6(e):$6.isA(t)?L6(e):t};d5.exports=U6});var x5=u((VR,q5)=>{var Js=V(),H6=we(),m5=C(),W6=e=>e.sort((t,r)=>t-r).filter((t,r,n)=>!r||t!==n[r-1]),_6=(e,t,r)=>{let n=`${t}`,s=e.get(n);s===void 0?e.set(n,[r]):s.push(r)},K6=(e,t)=>{let r=`${t}`;return e.get(r)},Q6=e=>{let t=H6(e),r=m5.toPolygons(e),n=r.length,s=new Map,o=Js.create();r.forEach((f,h)=>{f.vertices.forEach(p=>{_6(s,Js.snap(o,p,t),h)})});let i=r.map(f=>{let h=[];return f.vertices.forEach(p=>{h=h.concat(K6(s,Js.snap(o,p,t)))}),{e:1,d:W6(h)}});s.clear();let c=0,a=i.length;for(let f=0;f<a;f++){let h=i[f];if(h.e>0){let p=new Array(n);p[f]=!0;do c=0,p.forEach((d,m)=>{let g=i[m];if(g.e>0){g.e=-1;for(let q=0;q<g.d.length;q++)p[g.d[q]]=!0;c++}});while(c>0);h.indexes=p}}let l=[];for(let f=0;f<a;f++)if(i[f].indexes){let h=[];i[f].indexes.forEach((p,d)=>h.push(r[d])),l.push(m5.create(h))}return l};q5.exports=Q6});var v5=u((FR,w5)=>{var J6=B(),j6=C(),e7=x5(),t7=(...e)=>{if(e=J6(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>j6.isA(r)?e7(r):r);return t.length===1?t[0]:t};w5.exports=t7});var P5=u((RR,E5)=>{var Hr=C(),r7=Xr(),{Tree:y5}=Lr(),n7=(e,t)=>{if(!r7(e,t))return Hr.clone(e);let r=new y5(Hr.toPolygons(e)),n=new y5(Hr.toPolygons(t));r.invert(),r.clipTo(n),n.clipTo(r,!0),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return Hr.create(s)};E5.exports=n7});var js=u((BR,A5)=>{var s7=B(),o7=ut(),i7=P5(),c7=(...e)=>{e=s7(e);let t=e.shift();return e.forEach(r=>{t=i7(t,r)}),t=o7(t),t};A5.exports=c7});var M5=u((zR,b5)=>{var a7=B(),l7=C(),u7=we(),f7=Gr(),h7=Ir(),p7=js(),d7=(...e)=>{e=a7(e);let t=e.map(s=>h7({z0:-1,z1:1},s)),r=p7(t),n=u7(r);return f7(n,l7.toPolygons(r))};b5.exports=d7});var T5=u((CR,S5)=>{var g7=B(),m7=at(),q7=z(),x7=C(),w7=M5(),v7=js(),y7=(...e)=>{if(e=g7(e),e.length===0)throw new Error("wrong number of arguments");if(!m7(e))throw new Error("only subtract of the types are supported");let t=e[0];return q7.isA(t)?w7(e):x7.isA(t)?v7(e):t};S5.exports=y7});var eo=u((DR,O5)=>{var pt=C(),E7=Xr(),{Tree:k5}=Lr(),P7=(e,t)=>{if(!E7(e,t))return A7(e,t);let r=new k5(pt.toPolygons(e)),n=new k5(pt.toPolygons(t));r.clipTo(n,!1),n.clipTo(r),n.invert(),n.clipTo(r),n.invert();let s=r.allPolygons().concat(n.allPolygons());return pt.create(s)},A7=(e,t)=>{let r=pt.toPolygons(e);return r=r.concat(pt.toPolygons(t)),pt.create(r)};O5.exports=P7});var to=u((ZR,N5)=>{var b7=B(),M7=ut(),S7=eo(),T7=(...e)=>{e=b7(e);let t;for(t=1;t<e.length;t+=2)e.push(S7(e[t-1],e[t]));let r=e[t-1];return r=M7(r),r};N5.exports=T7});var ro=u((GR,V5)=>{var k7=B(),O7=C(),N7=we(),V7=Gr(),F7=Ir(),R7=to(),B7=(...e)=>{e=k7(e);let t=e.map(s=>F7({z0:-1,z1:1},s)),r=R7(t),n=N7(r);return V7(n,O7.toPolygons(r))};V5.exports=B7});var Wr=u((IR,F5)=>{var z7=B(),C7=at(),D7=z(),Z7=C(),G7=ro(),I7=to(),X7=(...e)=>{if(e=z7(e),e.length===0)throw new Error("wrong number of arguments");if(!C7(e))throw new Error("only unions of the same type are supported");let t=e[0];return D7.isA(t)?G7(e):Z7.isA(t)?I7(e):t};F5.exports=X7});var B5=u((XR,R5)=>{R5.exports={intersect:g5(),scission:v5(),subtract:T5(),union:Wr()}});var Yt=u(($R,C5)=>{var{EPS:$7,TAU:Y7}=I(),z5=is(),$t=dr(),H=Z(),L7=Ot(),U7=(e,t)=>{let r={delta:1,corners:"edge",closed:!1,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(Math.abs(n)<$7)return t;let c=e.closed?L7(t):1;c===0&&(c=1);let a=c>0&&n>=0||c<0&&n<0;n=Math.abs(n);let l=null,f=[],h=[],p=H.create(),d=t.length;for(let m=0;m<d;m++){let g=(m+1)%d,q=t[m],w=t[g];a?H.subtract(p,q,w):H.subtract(p,w,q),H.normal(p,p),H.normalize(p,p),H.scale(p,p,n);let v=H.add(H.create(),q,p),E=H.add(H.create(),w,p),x=[v,E];if(l!=null&&(o||!o&&g!==0)){let P=z5(l[0],l[1],x[0],x[1]);P?(f.pop(),x[0]=P):h.push({c:q,s0:l,s1:x})}l=[v,E],!(g===0&&!o)&&(f.push(x[0]),f.push(x[1]))}if(o&&l!=null){let m=f[0],g=f[1],q=z5(l[0],l[1],m,g);if(q)f[0]=q,f.pop();else{let w=t[0],v=[m,g];h.push({c:w,s0:l,s1:v})}}if(s==="edge"){let m=new Map;f.forEach((w,v)=>m.set(w,v));let g=$t.create(),q=$t.create();h.forEach(w=>{$t.fromPoints(g,w.s0[0],w.s0[1]),$t.fromPoints(q,w.s1[0],w.s1[1]);let v=$t.intersectPointOfLines(g,q);if(Number.isFinite(v[0])&&Number.isFinite(v[1])){let E=w.s0[1],x=m.get(E);f[x]=v,f[(x+1)%f.length]=void 0}else{let E=w.s1[0],x=m.get(E);f[x]=void 0}}),f=f.filter(w=>w!==void 0)}if(s==="round"){let m=Math.floor(i/4),g=H.create();h.forEach(q=>{let w=H.angle(H.subtract(g,q.s1[0],q.c));if(w-=H.angle(H.subtract(g,q.s0[1],q.c)),a&&w<0&&(w=w+Math.PI,w<0&&(w=w+Math.PI)),!a&&w>0&&(w=w-Math.PI,w>0&&(w=w-Math.PI)),w!==0){m=Math.floor(i*(Math.abs(w)/Y7));let v=w/m,E=H.angle(H.subtract(g,q.s0[1],q.c)),x=[];for(let P=1;P<m;P++){let y=E+v*P,A=H.fromAngleRadians(H.create(),y);H.scale(A,A,n),H.add(A,A,q.c),x.push(A)}if(x.length>0){let P=q.s0[1],y=f.findIndex(A=>H.equals(P,A));y=(y+1)%f.length,f.splice(y,0,...x)}}else{let v=q.s1[0],E=f.findIndex(x=>H.equals(v,x));f.splice(E,1)}})}return f};C5.exports=U7});var Z5=u((YR,D5)=>{var _r=z(),H7=Yt(),W7=(e,t)=>{let r={delta:1,corners:"edge",segments:16},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let a=_r.toOutlines(t).map(l=>(e={delta:n,corners:s,closed:!0,segments:o},H7(e,l))).reduce((l,f)=>l.concat(_r.toSides(_r.fromPoints(f))),[]);return _r.create(a)};D5.exports=W7});var X5=u((LR,I5)=>{var G5=Y(),_7=V(),K7=C(),Lt=X(),Q7=(e,t)=>{_7.dot(Lt.plane(t),e)>0&&(t=Lt.invert(t));let n=[t],s=Lt.transform(G5.fromTranslation(G5.create(),e),t),o=t.vertices.length;for(let i=0;i<o;i++){let c=i<o-1?i+1:0,a=Lt.create([t.vertices[i],s.vertices[i],s.vertices[c],t.vertices[c]]);n.push(a)}return n.push(Lt.invert(s)),K7.create(n)};I5.exports=Q7});var L5=u((UR,Y5)=>{var{EPS:J7,TAU:no}=I(),$5=Y(),L=V(),j7=Ls(),so=C(),Ye=X(),eM=ks(),tM=ut(),oo=eo(),rM=X5(),nM=(e,t,r)=>{let n=t.toString();if(e.has(n))e.get(n)[1].push(r);else{let s=[t,[r]];e.set(n,s)}},sM=(e,t,r)=>{let n=t[0].toString(),s=t[1].toString(),o=n<s?`${n},${s}`:`${s},${n}`;if(e.has(o))e.get(o)[1].push(r);else{let i=[t,[r]];e.set(o,i)}},io=(e,t)=>{e.findIndex(n=>n===t)<0&&e.push(t)},oM=(e,t)=>{let r={delta:1,segments:12},{delta:n,segments:s}=Object.assign({},r,e),o=so.create(),i=new Map,c=new Map,a=L.create(),l=L.create();return so.toPolygons(t).forEach((h,p)=>{let d=L.scale(L.create(),Ye.plane(h),2*n),m=Ye.transform($5.fromTranslation($5.create(),L.scale(L.create(),d,-.5)),h),g=rM(d,m);o=oo(o,g);let q=h.vertices;for(let w=0;w<q.length;w++){nM(i,q[w],Ye.plane(h));let v=(w+1)%q.length,E=[q[w],q[v]];sM(c,E,Ye.plane(h))}}),c.forEach(h=>{let p=h[0],d=h[1],m=p[0],g=p[1],q=L.subtract(L.create(),g,m);L.normalize(q,q);let w=d[0],v=L.cross(L.create(),w,q),E=[];for(let S=0;S<s;S++)io(E,S*no/s);for(let S=0,O=d.length;S<O;S++){let G=d[S],R=L.dot(v,G),D=L.dot(w,G),N=Math.atan2(R,D);N<0&&(N+=no),io(E,N),N=Math.atan2(-R,-D),N<0&&(N+=no),io(E,N)}E=E.sort(j7);let x=E.length,P,y,A=[],b=[],M=[];for(let S=-1;S<x;S++){let O=E[S<0?S+x:S],G=Math.sin(O),R=Math.cos(O);L.scale(a,w,R*n),L.scale(l,v,G*n),L.add(a,a,l);let D=L.add(L.create(),m,a),N=L.add(L.create(),g,a),ee=!1;if(S>=0&&L.distance(D,P)<J7&&(ee=!0),!ee){if(S>=0){A.push(D),b.push(N);let ne=[y,N,D,P],Pe=Ye.create(ne);M.push(Pe)}P=D,y=N}}b.reverse(),M.push(Ye.create(A)),M.push(Ye.create(b));let T=so.create(M);o=oo(o,T)}),i.forEach(h=>{let p=h[0],d=h[1],m=d[0],g=null,q=0;for(let x=1;x<d.length;x++){let P=d[x],y=L.cross(a,m,P),A=L.length(y);A>.05&&A>q&&(q=A,g=P)}g||(g=L.orthogonal(a,m));let w=L.cross(a,m,g);L.normalize(w,w);let v=L.cross(l,w,m),E=eM({center:[p[0],p[1],p[2]],radius:n,segments:s,axes:[m,w,v]});o=oo(o,E)}),tM(o)};Y5.exports=oM});var H5=u((HR,U5)=>{var iM=C(),cM=Wr(),aM=L5(),lM=(e,t)=>{let r={delta:1,corners:"round",segments:12},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(s!=="round")throw new Error('corners must be "round" for 3D geometries');if(iM.toPolygons(t).length===0)throw new Error("the given geometry cannot be empty");e={delta:n,corners:s,segments:o};let c=aM(e,t);return cM(t,c)};U5.exports=lM});var K5=u((WR,_5)=>{var uM=Ot(),ae=Z(),dt=z(),Ut=$(),W5=Yt(),fM=e=>{let{external:t,internal:r}=e;uM(t)<0?t=t.reverse():r=r.reverse();let n=Ut.fromPoints({closed:!0},t),s=Ut.fromPoints({closed:!0},r),o=dt.toSides(dt.fromPoints(Ut.toPoints(n))),i=dt.toSides(dt.fromPoints(Ut.toPoints(s)));return o.push(...i),dt.create(o)},hM=(e,t,r,n)=>{let{points:s,external:o,internal:i}=e,c=Math.floor(t/2),a=[],l=[];if(r==="round"&&c>0){let h=Math.PI/c,p=s[s.length-1],d=ae.angle(ae.subtract(ae.create(),o[o.length-1],p)),m=s[0],g=ae.angle(ae.subtract(ae.create(),i[0],m));for(let q=1;q<c;q++){let w=d+h*q,v=ae.fromAngleRadians(ae.create(),w);ae.scale(v,v,n),ae.add(v,v,p),a.push(v),w=g+h*q,v=ae.fromAngleRadians(ae.create(),w),ae.scale(v,v,n),ae.add(v,v,m),l.push(v)}}let f=[];return f.push(...o,...a,...i.reverse(),...l),dt.fromPoints(f)},pM=(e,t)=>{e=Object.assign({},{delta:1,corners:"edge",segments:16},e);let{delta:n,corners:s,segments:o}=e;if(n<=0)throw new Error("the given delta must be positive for paths");if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=t.isClosed,c=Ut.toPoints(t);if(c.length===0)throw new Error("the given geometry cannot be empty");let a={points:c,external:W5({delta:n,corners:s,segments:o,closed:i},c),internal:W5({delta:-n,corners:s,segments:o,closed:i},c)};return t.isClosed?fM(a):hM(a,o,s,n)};_5.exports=pM});var Kr=u((_R,Q5)=>{var dM=B(),gM=z(),mM=C(),qM=$(),xM=Z5(),wM=H5(),vM=K5(),yM=(e,...t)=>{if(t=dM(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>qM.isA(n)?vM(e,n):gM.isA(n)?xM(e,n):mM.isA(n)?wM(e,n):n);return r.length===1?r[0]:r};Q5.exports=yM});var eg=u((KR,j5)=>{var Qr=z(),J5=lr(),EM=Yt(),PM=(e,t)=>{let r={delta:1,corners:"edge",segments:0},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=Qr.toOutlines(t),a=i.map(l=>(e={delta:i.reduce((p,d)=>p+J5.arePointsInside(l,J5.create(d)),0)%2===0?n:-n,corners:s,closed:!0,segments:o},EM(e,l))).reduce((l,f)=>l.concat(Qr.toSides(Qr.fromPoints(f))),[]);return Qr.create(a)};j5.exports=PM});var ng=u((QR,rg)=>{var tg=$(),AM=Yt(),bM=(e,t)=>{let r={delta:1,corners:"edge",closed:t.isClosed,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');e={delta:n,corners:s,closed:o,segments:i};let c=AM(e,tg.toPoints(t));return tg.fromPoints({closed:o},c)};rg.exports=bM});var og=u((JR,sg)=>{var MM=B(),SM=z(),TM=$(),kM=eg(),OM=ng(),NM=(e,...t)=>{if(t=MM(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>TM.isA(n)?OM(e,n):SM.isA(n)?kM(e,n):n);return r.length===1?r[0]:r};sg.exports=NM});var cg=u((jR,ig)=>{ig.exports={expand:Kr(),offset:og()}});var Wt=u((eB,ag)=>{var Ht=Y(),co=V(),VM=z(),ao=Xe(),FM=Gt(),RM=(e,t)=>{let r={offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0},{offset:n,twistAngle:s,twistSteps:o,repair:i}=Object.assign({},r,e);if(o<1)throw new Error("twistSteps must be 1 or more");s===0&&(o=1);let c=co.clone(n),a=VM.toSides(t);if(a.length===0)throw new Error("the given geometry cannot be empty");let l=ao.fromSides(a);c[2]<0&&ao.reverse(l,l);let f=Ht.create(),h=(p,d,m)=>{let g=d/o*s,q=co.scale(co.create(),c,d/o);return Ht.multiply(f,Ht.fromZRotation(f,g),Ht.fromTranslation(Ht.create(),q)),ao.transform(f,m)};return e={numberOfSlices:o+1,capStart:!0,capEnd:!0,repair:i,callback:h},FM(e,l)};ag.exports=RM});var ug=u((tB,lg)=>{var BM=z(),zM=$(),CM=Wt(),DM=(e,t)=>{if(!t.isClosed)throw new Error("extruded path must be closed");let r=zM.toPoints(t),n=BM.fromPoints(r);return CM(e,n)};lg.exports=DM});var hg=u((rB,fg)=>{var ZM=B(),GM=z(),IM=$(),XM=Wt(),$M=ug(),YM=(e,...t)=>{let r={height:1,twistAngle:0,twistSteps:1,repair:!0},{height:n,twistAngle:s,twistSteps:o,repair:i}=Object.assign({},r,e);if(t=ZM(t),t.length===0)throw new Error("wrong number of arguments");e={offset:[0,0,n],twistAngle:s,twistSteps:o,repair:i};let c=t.map(a=>IM.isA(a)?$M(e,a):GM.isA(a)?XM(e,a):a);return c.length===1?c[0]:c};fg.exports=YM});var dg=u((nB,pg)=>{var LM=$(),UM=Kr(),HM=Wt(),WM=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(e.delta=n,e.offset=[0,0,s],LM.toPoints(t).length===0)throw new Error("the given geometry cannot be empty");let i=UM(e,t);return HM(e,i)};pg.exports=WM});var mg=u((sB,gg)=>{var{area:_M}=_e(),lo=z(),KM=$(),QM=Kr(),JM=Wt(),jM=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);e.delta=n,e.offset=[0,0,s];let o=lo.toOutlines(t);if(o.length===0)throw new Error("the given geometry cannot be empty");let c=o.map(l=>(_M(l)<0&&l.reverse(),QM(e,KM.fromPoints({closed:!0},l)))).reduce((l,f)=>l.concat(lo.toSides(f)),[]),a=lo.create(c);return JM(e,a)};gg.exports=jM});var xg=u((oB,qg)=>{var eS=B(),tS=z(),rS=$(),nS=dg(),sS=mg(),oS=(e,...t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(t=eS(t),t.length===0)throw new Error("wrong number of arguments");if(n<=0)throw new Error("size must be positive");if(s<=0)throw new Error("height must be positive");let o=t.map(i=>rS.isA(i)?nS(e,i):tS.isA(i)?sS(e,i):i);return o.length===1?o[0]:o};qg.exports=oS});var vg=u((iB,wg)=>{var{TAU:_t}=I(),uo=Xe(),me=Y(),iS=Gt(),cS=z(),aS=(e,t)=>{let r={angle:_t,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:n,endOffset:s,segmentsPerRotation:o,startAngle:i}=Object.assign({},r,e),c;if(!e.pitch&&e.height?c=e.height/(n/_t):c=e.pitch?e.pitch:r.pitch,o<3)throw new Error("The number of segments per rotation needs to be at least 3.");let l=cS.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let f=l.filter(w=>w[0][0]>=0),h=uo.fromSides(l);f.length===0&&(h=uo.reverse(h));let p=Math.round(o/_t*Math.abs(n)),d=p>=2?p:2,m=me.create(),g,q=(w,v,E)=>{let x=i+n/d*v,P=s/d*v,y=(x-i)/_t*c;return me.multiply(m,me.fromTranslation(me.create(),[P,0,y*Math.sign(n)]),me.fromXRotation(me.create(),-_t/4*Math.sign(n))),g=me.create(),me.multiply(g,me.fromZRotation(me.create(),x),m),uo.transform(g,E)};return iS({numberOfSlices:d+1,callback:q},h)};wg.exports=aS});var Mg=u((cB,bg)=>{var lS=B(),yg=pr(),fo=fe(),Eg=Y(),Pg=z(),Ag=C(),gt=X(),uS=we(),fS=ro(),hS=(e,t)=>{let r=fo.fromNormalAndPoint(fo.create(),e.axis,e.origin);if(Number.isNaN(r[0])||Number.isNaN(r[1])||Number.isNaN(r[2])||Number.isNaN(r[3]))throw new Error("project: invalid axis or origin");let n=uS(t),s=n*n*Math.sqrt(3)/4;if(n===0)return Pg.create();let o=Ag.toPolygons(t),i=[];for(let a=0;a<o.length;a++){let l=o[a].vertices.map(p=>fo.projectionOfPoint(r,p)),f=gt.create(l),h=gt.plane(f);yg(r,h)&&(gt.measureArea(f)<s||i.push(f))}if(!yg(r,[0,0,1])){let a=Eg.fromVectorRotation(Eg.create(),r,[0,0,1]);i=i.map(l=>gt.transform(a,l))}i=i.sort((a,l)=>gt.measureArea(l)-gt.measureArea(a));let c=i.map(a=>Pg.fromPoints(a.vertices));return fS(c)},pS=(e,...t)=>{let r={axis:[0,0,1],origin:[0,0,0]},{axis:n,origin:s}=Object.assign({},r,e);if(t=lS(t),t.length===0)throw new Error("wrong number of arguments");e={axis:n,origin:s};let o=t.map(i=>Ag.isA(i)?hS(e,i):i);return o.length===1?o[0]:o};bg.exports=pS});var Tg=u((aB,Sg)=>{Sg.exports={extrudeFromSlices:Gt(),extrudeLinear:hg(),extrudeRectangular:xg(),extrudeRotate:Zs(),extrudeHelical:vg(),project:Mg(),slice:Xe()}});var ho=u((lB,Og)=>{var kg=Z(),dS=e=>{let t=kg.fromValues(1/0,1/0);e.forEach(s=>{(s[1]<t[1]||s[1]===t[1]&&s[0]<t[0])&&(t=s)});let r=[];e.forEach(s=>{let o=mS(s[1]-t[1],s[0]-t[0]),i=kg.squaredDistance(s,t);r.push({point:s,angle:o,distSq:i})}),r.sort((s,o)=>s.angle!==o.angle?s.angle-o.angle:s.distSq-o.distSq);let n=[];return r.forEach(s=>{let o=n.length;for(;o>1&&gS(n[o-2],n[o-1],s.point)<=Number.EPSILON;)n.pop(),o=n.length;n.push(s.point)}),n},gS=(e,t,r)=>(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0]),mS=(e,t)=>e===0&&t===0?-1/0:-t/e;Og.exports=dS});var Jr=u((uB,Rg)=>{var Ng=z(),Vg=C(),Fg=$(),qS=e=>{let t=new Set,r=[],n=s=>{let o=s.toString();t.has(o)||(r.push(s),t.add(o))};return e.forEach(s=>{Ng.isA(s)?Ng.toPoints(s).forEach(n):Vg.isA(s)?Vg.toPoints(s).forEach(o=>o.forEach(n)):Fg.isA(s)&&Fg.toPoints(s).forEach(n)}),r};Rg.exports=qS});var zg=u((fB,Bg)=>{var xS=B(),wS=$(),vS=ho(),yS=Jr(),ES=(...e)=>{e=xS(e);let t=yS(e),r=vS(t);return wS.fromPoints({closed:!0},r)};Bg.exports=ES});var Zg=u((hB,Dg)=>{var PS=B(),Cg=z(),AS=ho(),bS=Jr(),MS=(...e)=>{e=PS(e);let t=bS(e),r=AS(t);return r.length<3?Cg.create():Cg.fromPoints(r)};Dg.exports=MS});var $g=u((pB,Xg)=>{var SS=He(),Gg=yt(),Ig=wn(),TS=(e,t,r)=>{let n=[],s=[],o=[];Gg(n,r,t),Gg(s,e,t);let i=Ig(SS(o,s,n)),c=Ig(n);if(c===0)throw Error("a and b are the same point");return i/c},kS=(e,t,r)=>Math.sqrt(TS(e,t,r));Xg.exports=kS});var Ug=u((dB,Lg)=>{var OS=He(),NS=tr(),Yg=yt(),VS=(e,t,r,n)=>{let s=[0,0,0];return Yg(e,t,r),Yg(s,r,n),OS(e,e,s),NS(e,e)};Lg.exports=VS});var Wg=u((gB,Hg)=>{var po=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(t,r){r.prev=t.prev,r.next=t,r.prev?r.prev.next=r:this.head=r,t.prev=r}insertAfter(t,r){r.prev=t,r.next=t.next,r.next?r.next.prev=r:this.tail=r,t.next=r}add(t){this.head?this.tail.next=t:this.head=t,t.prev=this.tail,t.next=null,this.tail=t}addAll(t){for(this.head?this.tail.next=t:this.head=t,t.prev=this.tail;t.next;)t=t.next;this.tail=t}remove(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeChain(t,r){t.prev?t.prev.next=r.next:this.head=r.next,r.next?r.next.prev=t.prev:this.tail=t.prev}first(){return this.head}isEmpty(){return!this.head}};Hg.exports=po});var Kg=u((mB,_g)=>{var go=class{constructor(t,r){this.point=t,this.index=r,this.next=null,this.prev=null,this.face=null}};_g.exports=go});var Jg=u((qB,Qg)=>{var FS=pn(),RS=xn(),mo=class{constructor(t,r){this.vertex=t,this.face=r,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?FS(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?RS(this.tail().point,this.head().point):-1}setOpposite(t){this.opposite=t,t.opposite=this}};Qg.exports=mo});var tm=u((xB,em)=>{var qo=fn(),BS=hn(),zS=He(),xo=wt(),CS=dn(),DS=tr(),jr=qn(),wo=yt(),vo=Jg(),jg=0,ZS=1,yo=2,Eo=class e{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=jg,this.edge=null,this.nVertices=0}getEdge(t){if(typeof t!="number")throw Error("requires a number");let r=this.edge;for(;t>0;)r=r.next,t-=1;for(;t<0;)r=r.prev,t+=1;return r}computeNormal(){let t=this.edge,r=t.next,n=r.next,s=wo([],r.head().point,t.head().point),o=[],i=[];for(this.nVertices=2,this.normal=[0,0,0];n!==t;)BS(i,s),wo(s,n.head().point,t.head().point),qo(this.normal,this.normal,zS(o,i,s)),n=n.next,this.nVertices+=1;this.area=CS(this.normal),this.normal=jr(this.normal,this.normal,1/this.area)}computeNormalMinArea(t){if(this.computeNormal(),this.area<t){let r,n=0,s=this.edge;do{let f=s.lengthSquared();f>n&&(r=s,n=f),s=s.next}while(s!==this.edge);let o=r.tail().point,i=r.head().point,c=wo([],i,o),a=Math.sqrt(n);jr(c,c,1/a);let l=xo(this.normal,c);jr(c,c,-l),qo(this.normal,this.normal,c),DS(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let t=this.edge;do qo(this.centroid,this.centroid,t.head().point),t=t.next;while(t!==this.edge);jr(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(t){typeof t<"u"?this.computeNormalMinArea(t):this.computeNormal(),this.computeCentroid(),this.offset=xo(this.normal,this.centroid)}distanceToPlane(t){return xo(this.normal,t)-this.offset}connectHalfEdges(t,r){let n;if(t.opposite.face===r.opposite.face){let s=r.opposite.face,o;t===this.edge&&(this.edge=r),s.nVertices===3?(o=r.opposite.prev.opposite,s.mark=yo,n=s):(o=r.opposite.next,s.edge===o.prev&&(s.edge=o),o.prev=o.prev.prev,o.prev.next=o),r.prev=t.prev,r.prev.next=r,r.setOpposite(o),s.computeNormalAndCentroid()}else t.next=r,r.prev=t;return n}mergeAdjacentFaces(t,r){let n=t.opposite,s=n.face;r.push(s),s.mark=yo;let o=t.prev,i=t.next,c=n.prev,a=n.next;for(;o.opposite.face===s;)o=o.prev,a=a.next;for(;i.opposite.face===s;)i=i.next,c=c.prev;let l;for(l=a;l!==c.next;l=l.next)l.face=this;this.edge=i;let f;return f=this.connectHalfEdges(c,i),f&&r.push(f),f=this.connectHalfEdges(o,a),f&&r.push(f),this.computeNormalAndCentroid(),r}collectIndices(){let t=[],r=this.edge;do t.push(r.head().index),r=r.next;while(r!==this.edge);return t}static createTriangle(t,r,n,s=0){let o=new e,i=new vo(t,o),c=new vo(r,o),a=new vo(n,o);return i.next=a.prev=c,c.next=i.prev=a,a.next=c.prev=i,o.edge=i,o.computeNormalAndCentroid(s),o}};em.exports={VISIBLE:jg,NON_CONVEX:ZS,DELETED:yo,Face:Eo}});var im=u((wB,om)=>{var Po=wt(),GS=$g(),IS=Ug(),rm=Wg(),XS=Kg(),{Face:Ee,VISIBLE:mt,NON_CONVEX:nm,DELETED:$S}=tm(),YS=1,sm=2,Ao=class{constructor(t){if(!Array.isArray(t))throw TypeError("input is not a valid array");if(t.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=t.length,this.faces=[],this.newFaces=[],this.claimed=new rm,this.unclaimed=new rm,this.vertices=[];for(let r=0;r<t.length;r+=1)this.vertices.push(new XS(t[r],r));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(t,r){t.face=r,r.outside?this.claimed.insertBefore(r.outside,t):this.claimed.add(t),r.outside=t}removeVertexFromFace(t,r){t===r.outside&&(t.next&&t.next.face===r?r.outside=t.next:r.outside=null),this.claimed.remove(t)}removeAllVerticesFromFace(t){if(t.outside){let r=t.outside;for(;r.next&&r.next.face===t;)r=r.next;return this.claimed.removeChain(t.outside,r),r.next=null,t.outside}}deleteFaceVertices(t,r){let n=this.removeAllVerticesFromFace(t);if(n)if(!r)this.unclaimed.addAll(n);else{let s;for(let o=n;o;o=s)s=o.next,r.distanceToPlane(o.point)>this.tolerance?this.addVertexToFace(o,r):this.unclaimed.add(o)}}resolveUnclaimedPoints(t){let r=this.unclaimed.first();for(let n=r;n;n=r){r=n.next;let s=this.tolerance,o;for(let i=0;i<t.length;i+=1){let c=t[i];if(c.mark===mt){let a=c.distanceToPlane(n.point);if(a>s&&(s=a,o=c),s>1e3*this.tolerance)break}}o&&this.addVertexToFace(n,o)}}computeExtremes(){let t=[],r=[],n=[],s=[],o,i;for(o=0;o<3;o+=1)n[o]=s[o]=this.vertices[0];for(o=0;o<3;o+=1)t[o]=r[o]=this.vertices[0].point[o];for(o=1;o<this.vertices.length;o+=1){let c=this.vertices[o],a=c.point;for(i=0;i<3;i+=1)a[i]<t[i]&&(t[i]=a[i],n[i]=c);for(i=0;i<3;i+=1)a[i]>r[i]&&(r[i]=a[i],s[i]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(t[0]),Math.abs(r[0]))+Math.max(Math.abs(t[1]),Math.abs(r[1]))+Math.max(Math.abs(t[2]),Math.abs(r[2]))),[n,s]}createInitialSimplex(){let t=this.vertices,[r,n]=this.computeExtremes(),s,o,i,c,a=0,l=0;for(i=0;i<3;i+=1){let g=n[i].point[i]-r[i].point[i];g>a&&(a=g,l=i)}let f=r[l],h=n[l];for(a=0,i=0;i<this.vertices.length;i+=1){let g=this.vertices[i];if(g!==f&&g!==h){let q=GS(g.point,f.point,h.point);q>a&&(a=q,s=g)}}let p=IS([],f.point,h.point,s.point),d=Po(f.point,p);for(a=-1,i=0;i<this.vertices.length;i+=1){let g=this.vertices[i];if(g!==f&&g!==h&&g!==s){let q=Math.abs(Po(p,g.point)-d);q>a&&(a=q,o=g)}}let m=[];if(Po(o.point,p)-d<0)for(m.push(Ee.createTriangle(f,h,s),Ee.createTriangle(o,h,f),Ee.createTriangle(o,s,h),Ee.createTriangle(o,f,s)),i=0;i<3;i+=1){let g=(i+1)%3;m[i+1].getEdge(2).setOpposite(m[0].getEdge(g)),m[i+1].getEdge(1).setOpposite(m[g+1].getEdge(0))}else for(m.push(Ee.createTriangle(f,s,h),Ee.createTriangle(o,f,h),Ee.createTriangle(o,h,s),Ee.createTriangle(o,s,f)),i=0;i<3;i+=1){let g=(i+1)%3;m[i+1].getEdge(2).setOpposite(m[0].getEdge((3-i)%3)),m[i+1].getEdge(0).setOpposite(m[g+1].getEdge(1))}for(i=0;i<4;i+=1)this.faces.push(m[i]);for(i=0;i<t.length;i+=1){let g=t[i];if(g!==f&&g!==h&&g!==s&&g!==o){a=this.tolerance;let q;for(c=0;c<4;c+=1){let w=m[c].distanceToPlane(g.point);w>a&&(a=w,q=m[c])}q&&this.addVertexToFace(g,q)}}}reindexFaceAndVertices(){let t=[];for(let r=0;r<this.faces.length;r+=1){let n=this.faces[r];n.mark===mt&&t.push(n)}this.faces=t}collectFaces(t){let r=[];for(let n=0;n<this.faces.length;n+=1){if(this.faces[n].mark!==mt)throw Error("attempt to include a destroyed face in the hull");let s=this.faces[n].collectIndices();if(t)r.push(s);else for(let o=0;o<s.length-2;o+=1)r.push([s[0],s[o+1],s[o+2]])}return r}nextVertexToAdd(){if(!this.claimed.isEmpty()){let t,r,n=0,s=this.claimed.first().face;for(r=s.outside;r&&r.face===s;r=r.next){let o=s.distanceToPlane(r.point);o>n&&(n=o,t=r)}return t}}computeHorizon(t,r,n,s){this.deleteFaceVertices(n),n.mark=$S;let o;r?o=r.next:o=r=n.getEdge(0);do{let i=o.opposite,c=i.face;c.mark===mt&&(c.distanceToPlane(t)>this.tolerance?this.computeHorizon(t,i,c,s):s.push(o)),o=o.next}while(o!==r)}addAdjoiningFace(t,r){let n=Ee.createTriangle(t,r.tail(),r.head());return this.faces.push(n),n.getEdge(-1).setOpposite(r.opposite),n.getEdge(0)}addNewFaces(t,r){this.newFaces=[];let n,s;for(let o=0;o<r.length;o+=1){let i=r[o],c=this.addAdjoiningFace(t,i);n?c.next.setOpposite(s):n=c,this.newFaces.push(c.face),s=c}n.next.setOpposite(s)}oppositeFaceDistance(t){return t.face.distanceToPlane(t.opposite.face.centroid)}doAdjacentMerge(t,r){let n=t.edge,s=!0,o=0;do{if(o>=t.nVertices)throw Error("merge recursion limit exceeded");let i=n.opposite.face,c=!1;if(r===sm?(this.oppositeFaceDistance(n)>-this.tolerance||this.oppositeFaceDistance(n.opposite)>-this.tolerance)&&(c=!0):t.area>i.area?this.oppositeFaceDistance(n)>-this.tolerance?c=!0:this.oppositeFaceDistance(n.opposite)>-this.tolerance&&(s=!1):this.oppositeFaceDistance(n.opposite)>-this.tolerance?c=!0:this.oppositeFaceDistance(n)>-this.tolerance&&(s=!1),c){let a=t.mergeAdjacentFaces(n,[]);for(let l=0;l<a.length;l+=1)this.deleteFaceVertices(a[l],t);return!0}n=n.next,o+=1}while(n!==t.edge);return s||(t.mark=nm),!1}addVertexToHull(t){let r=[];this.unclaimed.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,r),this.addNewFaces(t,r);for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===mt)for(;this.doAdjacentMerge(s,YS););}for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===nm)for(s.mark=mt;this.doAdjacentMerge(s,sm););}this.resolveUnclaimedPoints(this.newFaces)}build(){let t;for(this.createInitialSimplex();t=this.nextVertexToAdd();)this.addVertexToHull(t);this.reindexFaceAndVertices()}};om.exports=Ao});var am=u((vB,cm)=>{var LS=im(),US=(e,t={})=>{let r=new LS(e);return r.build(),r.collectFaces(t.skipTriangulation)};cm.exports=US});var um=u((yB,lm)=>{var HS=B(),WS=C(),_S=X(),KS=am(),QS=Jr(),JS=(...e)=>{if(e=HS(e),e.length===1)return e[0];let t=QS(e),n=KS(t,{skipTriangulation:!0}).map(s=>{let o=s.map(i=>t[i]);return _S.create(o)});return WS.create(n)};lm.exports=JS});var bo=u((EB,fm)=>{var jS=B(),e9=at(),t9=z(),r9=C(),n9=$(),s9=zg(),o9=Zg(),i9=um(),c9=(...e)=>{if(e=jS(e),e.length===0)throw new Error("wrong number of arguments");if(!e9(e))throw new Error("only hulls of the same type are supported");let t=e[0];return n9.isA(t)?s9(e):t9.isA(t)?o9(e):r9.isA(t)?i9(e):t};fm.exports=c9});var pm=u((PB,hm)=>{var a9=B(),l9=Wr(),u9=bo(),f9=(...e)=>{if(e=a9(e),e.length<2)throw new Error("wrong number of arguments");let t=[];for(let r=1;r<e.length;r++)t.push(u9(e[r-1],e[r]));return l9(t)};hm.exports=f9});var gm=u((AB,dm)=>{dm.exports={hull:bo(),hullChain:pm()}});var So=u((bB,qm)=>{var Mo=V(),mm=X(),h9=(e,t)=>{let r=Math.abs(mm.measureArea(t));return Number.isFinite(r)&&r>e},p9=(e,t)=>{let r=t.map(s=>{let o=s.vertices.map(a=>Mo.snap(Mo.create(),a,e)),i=[];for(let a=0;a<o.length;a++){let l=(a+1)%o.length;Mo.equals(o[a],o[l])||i.push(o[a])}let c=mm.create(i);return s.color&&(c.color=s.color),c}),n=e*e*Math.sqrt(3)/4;return r=r.filter(s=>h9(n,s)),r};qm.exports=p9});var vm=u((MB,wm)=>{var d9=pr(),qt=V(),en=X(),g9=e=>{let t=en.toPoints(e),r=[];for(let n=0;n<t.length;n++){let s=(n+1)%t.length,o={v1:t[n],v2:t[s]};r.push(o)}for(let n=0;n<r.length;n++){let s=(n+1)%t.length;r[n].next=r[s],r[s].prev=r[n]}return r},m9=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.set(r,t)},To=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.delete(r)},q9=(e,t)=>{let r=`${t.v2}:${t.v1}`;return e.get(r)},x9=(e,t,r)=>{let n=e.prev.v1,s=e.prev.v2,o=t.next.v2,i=xm(n,s,o,r);n=t.prev.v1,s=t.prev.v2,o=e.next.v2;let c=xm(n,s,o,r);return[i,c]},w9=qt.create(),v9=qt.create(),xm=(e,t,r,n)=>{let s=qt.subtract(w9,t,e),o=qt.subtract(v9,r,t);return qt.cross(s,s,o),qt.dot(s,n)},y9=e=>{let t,r=[];for(;e.next;){let n=e.next;r.push(e.v1),e.v1=null,e.v2=null,e.next=null,e.prev=null,e=n}return r.length>0&&(t=en.create(r)),t},E9=e=>{if(e.length<2)return e;let t=e[0].plane,r=e.slice(),n=new Map;for(;r.length>0;){let o=r.shift(),i=g9(o);for(let c=0;c<i.length;c++){let a=i[c],l=q9(n,a);if(l){let f=x9(a,l,t);if(f[0]>=0&&f[1]>=0){let h=l.next,p=a.next;a.prev.next=l.next,a.next.prev=l.prev,l.prev.next=a.next,l.next.prev=a.prev,a.v1=null,a.v2=null,a.next=null,a.prev=null,To(n,l),l.v1=null,l.v2=null,l.next=null,l.prev=null;let d=(m,g,q)=>{let w={v1:q.v1,v2:g.v2,next:g.next,prev:q.prev};q.prev.next=w,g.next.prev=w,To(m,g),g.v1=null,g.v2=null,g.next=null,g.prev=null,To(m,q),q.v1=null,q.v2=null,q.next=null,q.prev=null};f[0]===0&&d(n,h,h.prev),f[1]===0&&d(n,p,p.prev)}}else a.next&&m9(n,a)}}let s=[];return n.forEach(o=>{let i=y9(o);i&&s.push(i)}),n.clear(),s},P9=(e,t)=>Math.abs(e[3]-t[3])<15e-8?d9(e,t):!1,A9=(e,t)=>{let r=[];t.forEach(s=>{let o=r.find(i=>P9(i[0],en.plane(s)));o?o[1].push(s):r.push([en.plane(s),[s]])});let n=[];return r.forEach(s=>{let o=s[1],i=E9(o);n=n.concat(i)}),n};wm.exports=A9});var Am=u((SB,Pm)=>{var ym=I(),qe=V(),b9=X(),Re=!1,re=e=>`${e}`,Em=(e,t,r,n,s,o)=>{let i=re(n),c=re(s);if(Re&&i===c)throw new Error("assert failed");let a=`${i}/${c}`,l=`${c}/${i}`;if(e.has(l))return tn(e,t,r,s,n,null),null;let f={vertex0:n,vertex1:s,polygonindex:o};return e.has(a)?e.get(a).push(f):e.set(a,[f]),t.has(i)?t.get(i).push(a):t.set(i,[a]),r.has(c)?r.get(c).push(a):r.set(c,[a]),a},tn=(e,t,r,n,s,o)=>{let i=re(n),c=re(s),a=`${i}/${c}`;if(Re&&!e.has(a))throw new Error("assert failed");let l=-1,f=e.get(a);for(let h=0;h<f.length;h++){let p=f[h],d=re(p.vertex0);if(d===i&&(d=re(p.vertex1),d===c&&!(o!==null&&p.polygonindex!==o))){l=h;break}}if(Re&&l<0)throw new Error("assert failed");if(f.splice(l,1),f.length===0&&e.delete(a),l=t.get(i).indexOf(a),Re&&l<0)throw new Error("assert failed");if(t.get(i).splice(l,1),t.get(i).length===0&&t.delete(i),l=r.get(c).indexOf(a),Re&&l<0)throw new Error("assert failed");r.get(c).splice(l,1),r.get(c).length===0&&r.delete(c)},M9=e=>{let t=new Map;for(let r=0;r<e.length;r++){let n=e[r],s=n.vertices.length;if(s>=3){let o=n.vertices[0],i=re(o);for(let c=0;c<s;c++){let a=c+1;a===s&&(a=0);let l=n.vertices[a],f=re(l),h=`${i}/${f}`,p=`${f}/${i}`;if(t.has(p)){let d=t.get(p);d.splice(-1,1),d.length===0&&t.delete(p)}else{let d={vertex0:o,vertex1:l,polygonindex:r};t.has(h)?t.get(h).push(d):t.set(h,[d])}o=l,i=f}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(t.size>0){let r=new Map,n=new Map,s=new Map;for(let[i,c]of t)s.set(i,!0),c.forEach(a=>{let l=re(a.vertex0),f=re(a.vertex1);r.has(l)?r.get(l).push(i):r.set(l,[i]),n.has(f)?n.get(f).push(i):n.set(f,[i])});let o=e.slice(0);for(;t.size!==0;){for(let c of t.keys())s.set(c,!0);let i=!1;for(;;){let c=Array.from(s.keys());if(c.length===0)break;let a=c[0],l=!0;if(t.has(a)){let f=t.get(a);if(Re&&f.length===0)throw new Error("assert failed");let h=f[0];for(let p=0;p<2;p++){let d=p===0?h.vertex0:h.vertex1,m=p===0?h.vertex1:h.vertex0,g=re(d),q=re(m),w=[];p===0?n.has(g)&&(w=n.get(g)):r.has(g)&&(w=r.get(g));for(let v=0;v<w.length;v++){let E=w[v],x=t.get(E)[0],P=p===0?x.vertex0:x.vertex1,y=p===0?x.vertex1:x.vertex0,A=re(P),b=re(y);if(Re&&b!==g)throw new Error("assert failed");if(A===q){tn(t,r,n,d,m,null),tn(t,r,n,m,d,null),l=!1,p=2,i=!0;break}else{let M=d,T=m,S=P,O=qe.subtract(qe.create(),S,M),G=qe.dot(qe.subtract(qe.create(),T,M),O)/qe.dot(O,O);if(G>0&&G<1){let R=qe.scale(qe.create(),O,G);if(qe.add(R,R,M),qe.squaredDistance(R,T)<ym.EPS*ym.EPS){let N=x.polygonindex,ee=o[N],ne=re(x.vertex1),Pe=-1;for(let jt=0;jt<ee.vertices.length;jt++)if(re(ee.vertices[jt])===ne){Pe=jt;break}if(Re&&Pe<0)throw new Error("assert failed");let xt=ee.vertices.slice(0);xt.splice(Pe,0,m);let Jt=b9.create(xt);o[N]=Jt,tn(t,r,n,x.vertex0,x.vertex1,N);let Ue=Em(t,r,n,x.vertex0,m,N),zo=Em(t,r,n,m,x.vertex1,N);Ue!==null&&s.set(Ue,!0),zo!==null&&s.set(zo,!0),l=!1,p=2,i=!0;break}}}}}}l&&s.delete(a)}if(!i)break}e=o}return t.clear(),e};Pm.exports=M9});var Mm=u((TB,bm)=>{var ko=V(),Oo=X(),S9=(e,t,r)=>{let n=t.vertices.length;if(n>3){if(n>4){let i=[0,0,0];t.vertices.forEach(c=>ko.add(i,i,c)),ko.snap(i,ko.divide(i,i,[n,n,n]),e);for(let c=0;c<n;c++){let a=Oo.create([i,t.vertices[c],t.vertices[(c+1)%n]]);t.color&&(a.color=t.color),r.push(a)}return}let s=Oo.create([t.vertices[0],t.vertices[1],t.vertices[2]]),o=Oo.create([t.vertices[0],t.vertices[2],t.vertices[3]]);t.color&&(s.color=t.color,o.color=t.color),r.push(s,o);return}r.push(t)},T9=(e,t)=>{let r=[];return t.forEach(n=>{S9(e,n,r)}),r};bm.exports=T9});var km=u((kB,Tm)=>{var k9=B(),O9=we(),N9=z(),Sm=C(),V9=$(),F9=So(),R9=vm(),B9=Am(),z9=Mm(),C9=(e,t)=>t,D9=(e,t)=>t,Z9=(e,t)=>{let r={snap:!1,simplify:!1,triangulate:!1},{snap:n,simplify:s,triangulate:o}=Object.assign({},r,e),i=O9(t),c=Sm.toPolygons(t);n&&(c=F9(i,c)),s&&(c=R9(i,c)),o&&(c=B9(c),c=z9(i,c));let a=Object.assign({},t);return a.polygons=c,a},G9=(e,...t)=>{if(t=k9(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>{if(V9.isA(n))return C9(e,n);if(N9.isA(n))return D9(e,n);if(Sm.isA(n))return Z9(e,n);throw new Error("invalid geometry")});return r.length===1?r[0]:r};Tm.exports=G9});var Nm=u((OB,Om)=>{var I9=B(),Le=Z(),No=z(),Vo=C(),Fo=$(),Ro=we(),X9=So(),$9=e=>{let t=Ro(e),n=Fo.toPoints(e).map(s=>Le.snap(Le.create(),s,t));return Fo.create(n)},Y9=e=>{let t=Ro(e),n=No.toSides(e).map(s=>[Le.snap(Le.create(),s[0],t),Le.snap(Le.create(),s[1],t)]);return n=n.filter(s=>!Le.equals(s[0],s[1])),No.create(n)},L9=e=>{let t=Ro(e),r=Vo.toPolygons(e),n=X9(t,r);return Vo.create(n)},U9=(...e)=>{if(e=I9(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>Fo.isA(r)?$9(r):No.isA(r)?Y9(r):Vo.isA(r)?L9(r):r);return t.length===1?t[0]:t};Om.exports=U9});var Fm=u((NB,Vm)=>{Vm.exports={generalize:km(),snap:Nm(),retessellate:ut()}});var Bm=u((VB,Rm)=>{var H9=(e,t,r)=>{for(e=e.slice();e.length<r;)e.push(t);return e};Rm.exports=H9});var Gm=u((FB,Zm)=>{var W9=B(),zm=Bm(),Dm=qr(),{translate:_9}=Ne(),K9=e=>{if(!Array.isArray(e.modes)||e.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(e.modes=zm(e.modes,"none",3),e.modes.filter(t=>["center","max","min","none"].includes(t)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(e.relativeTo)||e.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(e.relativeTo=zm(e.relativeTo,0,3),e.relativeTo.filter(t=>Number.isFinite(t)||t==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof e.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return e},Q9=(e,t,r)=>{for(let n=0;n<3;n++)e[n]==null&&(t[n]==="center"?e[n]=(r[0][n]+r[1][n])/2:t[n]==="max"?e[n]=r[1][n]:t[n]==="min"&&(e[n]=r[0][n]));return e},Cm=(e,t,r)=>{let n=Dm(e),s=[0,0,0];for(let o=0;o<3;o++)t[o]==="center"?s[o]=r[o]-(n[0][o]+n[1][o])/2:t[o]==="max"?s[o]=r[o]-n[1][o]:t[o]==="min"&&(s[o]=r[o]-n[0][o]);return _9(s,e)},J9=(e,...t)=>{e=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},e),e=K9(e);let{modes:n,relativeTo:s,grouped:o}=e;if(t=W9(t),t.length===0)throw new Error("align(): No geometries were provided to act upon");if(s.filter(i=>i==null).length){let i=Dm(t);s=Q9(s,n,i)}return o?t=Cm(t,n,s):t=t.map(i=>Cm(i,n,s)),t.length===1?t[0]:t};Zm.exports=J9});var Kt=u((RB,Im)=>{var j9=B(),eT=z(),tT=C(),rT=$(),nT=be(),{translate:sT}=Ne(),Bo=(e,t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e),o=nT(t),i=[0,0,0];return n[0]&&(i[0]=s[0]-(o[0][0]+(o[1][0]-o[0][0])/2)),n[1]&&(i[1]=s[1]-(o[0][1]+(o[1][1]-o[0][1])/2)),n[2]&&(i[2]=s[2]-(o[0][2]+(o[1][2]-o[0][2])/2)),sT(i,t)},rn=(e,...t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e);if(t=j9(t),t.length===0)throw new Error("wrong number of arguments");if(s.length!==3)throw new Error("relativeTo must be an array of length 3");e={axes:n,relativeTo:s};let o=t.map(i=>rT.isA(i)||eT.isA(i)||tT.isA(i)?Bo(e,i):i);return o.length===1?o[0]:o},oT=(...e)=>rn({axes:[!0,!1,!1]},e),iT=(...e)=>rn({axes:[!1,!0,!1]},e),cT=(...e)=>rn({axes:[!1,!1,!0]},e);Im.exports={center:rn,centerX:oT,centerY:iT,centerZ:cT}});var Qt=u((BB,Um)=>{var aT=B(),Xm=Y(),$m=z(),Ym=C(),Lm=$(),nn=(e,...t)=>{if(!Array.isArray(e))throw new Error("factors must be an array");if(t=aT(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(1);if(e[0]<=0||e[1]<=0||e[2]<=0)throw new Error("factors must be positive");let r=Xm.fromScaling(Xm.create(),e),n=t.map(s=>Lm.isA(s)?Lm.transform(r,s):$m.isA(s)?$m.transform(r,s):Ym.isA(s)?Ym.transform(r,s):s);return n.length===1?n[0]:n},lT=(e,...t)=>nn([e,1,1],t),uT=(e,...t)=>nn([1,e,1],t),fT=(e,...t)=>nn([1,1,e],t);Um.exports={scale:nn,scaleX:lT,scaleY:uT,scaleZ:fT}});var Qm=u((zB,Km)=>{var hT=B(),Hm=z(),Wm=C(),_m=$(),pT=(e,...t)=>{if(t=hT(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>_m.isA(n)?_m.transform(e,n):Hm.isA(n)?Hm.transform(e,n):Wm.isA(n)?Wm.transform(e,n):n);return r.length===1?r[0]:r};Km.exports=pT});var jm=u((CB,Jm)=>{Jm.exports={align:Gm(),center:Kt().center,centerX:Kt().centerX,centerY:Kt().centerY,centerZ:Kt().centerZ,mirror:nt().mirror,mirrorX:nt().mirrorX,mirrorY:nt().mirrorY,mirrorZ:nt().mirrorZ,rotate:ot().rotate,rotateX:ot().rotateX,rotateY:ot().rotateY,rotateZ:ot().rotateZ,scale:Qt().scale,scaleX:Qt().scaleX,scaleY:Qt().scaleY,scaleZ:Qt().scaleZ,transform:Qm(),translate:Ne().translate,translateX:Ne().translateX,translateY:Ne().translateY,translateZ:Ne().translateZ}});var dT=u((DB,eq)=>{eq.exports={colors:n0(),curves:y0(),geometries:ur(),maths:Uf(),measurements:kh(),primitives:dd(),text:Pd(),utils:Us(),booleans:B5(),expansions:cg(),extrusions:Tg(),hulls:gm(),modifiers:Fm(),transforms:jm()}});export default dT();
